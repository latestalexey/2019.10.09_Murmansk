<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="общая операция занесений данных в сам документ" fullscreen="Inherit" lock="No" name="ЕГАИС3 Занесение в документ" serverHosted="False"><Actions capacity="64" count="48"><ConditionAction breakPoint="False" expression="Document.ServerHosted == true" id="49f26cba-c5bf-4797-bd01-cee793bf00d4" indent="0" name="27 1" nextDirection="" noDirection="29" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.ИмяПользователя=CurrentUser.Name;&#xD;&#xA;SelectedProduct.ИдПользователя=CurrentUser.Id;" id="f9c0eeea-596d-42d1-9c02-4a8f98bdd916" indent="1" nextDirection="29" /><ForeachAction breakPoint="False" buttonExit="False" canFinishAlways="False" comment="опускаем заполненые строки вниз" cyclic="True" exitButtonText="" exitGroupCode="" fullscreen="Inherit" id="86486bfb-8d27-4bbc-8e2e-a770d98d9877" indent="1" items="{Document.DeclaredItems}" name="29" nextDirection="" transactionNotch="False"><Actions count="2"><ConditionAction breakPoint="False" expression="SelectedLine.UnderloadedOrOverloaded == false" id="e79228fb-c792-4bca-b535-b59fa11ed007" indent="1" nextDirection="" noDirection="continue" yesDirection="" /><AssignAction breakPoint="False" expression="Document.DeclaredItems.TopBottom(SelectedLine,  false)" id="f9097301-7622-494b-9130-23606dab4e16" indent="1" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><ConditionAction breakPoint="False" expression="СтрокиДляСпускаВниз != null" id="e4bbb8e0-da03-47de-903d-5457dbd8ebbf" indent="0" name="Перед записью" nextDirection="" noDirection="26" yesDirection="" /><ForeachAction breakPoint="False" buttonExit="False" canFinishAlways="False" comment="поднимаем текущую строку по товару вверх" cyclic="True" exitButtonText="" exitGroupCode="" fullscreen="Inherit" id="9c056242-60de-40c3-a2c6-ddec70c654c2" indent="1" items="{СтрокиДляСпускаВниз}" nextDirection="" transactionNotch="False"><Actions count="1"><AssignAction breakPoint="False" expression="Document.DeclaredItems.TopBottom(SelectedLine,  true)" id="b45248cc-c796-41f4-82c6-30b2edffc8df" indent="1" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><ConditionAction breakPoint="False" expression="SelectedProduct.Алко == true" id="a2a11a1d-4d81-4bba-ab0f-c4a117622022" indent="0" name="26" nextDirection="" noDirection="20" yesDirection="" /><AssignAction breakPoint="False" expression="ВШапку = SelectedProduct.АлкоНаим" id="ecb24cfa-981a-4714-9bc2-ea2c0e73e049" indent="1" name="24" nextDirection="22" /><AssignAction breakPoint="False" expression="ВШапку = SelectedProduct.Product.Name" id="004c8f04-016b-4f1c-84d1-ebbf6d24f527" indent="1" name="20" nextDirection="" /><ConditionAction breakPoint="False" expression="Document.DocumentType.Name == &quot;ПодборЗаказа&quot;" id="9de0ccfb-aaa6-4914-81eb-6219f1b942a8" indent="0" name="22" nextDirection="" noDirection="21" yesDirection="Проверка принадлежности товара1" /><ConditionAction breakPoint="False" expression="НаборАлкоСерийныхНомеровЗавершен == true" id="d065db5c-b2f8-4f0e-b811-1499299b9ac1" indent="0" name="21" nextDirection="" noDirection="17" yesDirection="" /><ClearSessionAction all="False" breakPoint="False" id="3fa4151b-60a6-4932-8d10-2ab255efe6b7" indent="1" nextDirection=""><KeyNames count="1"><String>НаборАлкоСерийныхНомеровЗавершен</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="Document.КонтрольКолва == 1 &amp;&amp; КонтрольТовараБезКолич == false" id="ea0b7d21-321c-4092-835b-8666160d1a38" indent="1" name="14 1 1" nextDirection="" noDirection="18" yesDirection="C Проверкой 2222" /><AcceptBufferAction breakPoint="False" checkDocumentInfill="False" combineEqualCurrentItems="False" id="7e60d389-ad57-49a8-8864-b74fea156fd0" ignoreFieldsInDeclaredItems="False" indent="1" name="18" nextDirection="return" onlyInCurrentItems="False"><ComparingFieldNames count="1"><String>АлкоКод</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems count="2"><String>АлкоКод</String><String>АлкоПДФ</String></ComparingFieldNamesForCurrentItems></AcceptBufferAction><AcceptBufferAction breakPoint="False" checkDocumentInfill="False" combineEqualCurrentItems="False" id="1e57a342-6ef9-4f34-a016-b09f1deaaf4a" ignoreFieldsInDeclaredItems="False" indent="1" name="C Проверкой 2222" nextDirection="return" onlyInCurrentItems="False"><ComparingFieldNames count="1"><String>АлкоКод</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems count="2"><String>АлкоКод</String><String>АлкоПДФ</String></ComparingFieldNamesForCurrentItems></AcceptBufferAction><ConditionAction breakPoint="False" expression="SelectedProduct.Алко == true" id="c744613b-8d4e-43a3-8725-f87c08ccab0f" indent="0" name="17" nextDirection="" noDirection="Проверка принадлежности товара1" yesDirection="" /><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоМарк == false &amp;&amp; SelectedProduct.Маркировка != &quot;Алкоголь&quot;" id="fbf55710-29d0-4911-9148-38443a90b080" indent="0" nextDirection="" noDirection="" yesDirection="14" /><ConditionAction breakPoint="False" expression="Document.АлкоМногоДМ == true &amp;&amp; Document.АлкоДМ == true" id="55bb749f-72ec-4b9f-a7b4-2e837be7c32e" indent="0" nextDirection="" noDirection="14" yesDirection="" /><ConditionAction breakPoint="False" expression="Document.КонтрольКолва == 1 &amp;&amp; КонтрольТовараБезКолич == false" id="722cbce4-5d3c-4e13-8ca9-c8a9caeab7cf" indent="0" name="14 1" nextDirection="" noDirection="15" yesDirection="16" /><FillBufferAction breakPoint="False" bufferName="" checkQuantity="False" combineItems="False" errorQuantityMessage="Товара больше, чем разрешает документ." fillWithRemains="False" id="5eaa6d02-ff75-444e-b1b1-1b3a290c5985" ignoreFieldsInDocument="False" indent="1" name="15" nextDirection="return" noProductErrorDirection="" noProductInDocumentMessage="Такой товар отсутствует в документе." quantityErrorDirection="" useSelectedLine="False"><ComparingFieldNames count="0" /></FillBufferAction><FillBufferAction breakPoint="False" bufferName="" checkQuantity="True" combineItems="False" errorQuantityMessage="Товара больше, чем разрешает документ." fillWithRemains="False" id="533fa653-f1f9-4c66-81ff-b952b8c9db93" ignoreFieldsInDocument="False" indent="1" name="16" nextDirection="return" noProductErrorDirection="Товар нет в плане" noProductInDocumentMessage="Такой товар отсутствует в документе." quantityErrorDirection="Перебор" useSelectedLine="False"><ComparingFieldNames count="1"><String>АлкоКод</String></ComparingFieldNames></FillBufferAction><AssignAction breakPoint="False" comment="                 // Попытка реализовать запись товара, если в плане он выгружен как неизвестный" expression="if(SelectedProduct.АлкоКод!=&quot;&quot;){&#xD;&#xA;MemSelectedLine = SelectedLine;&#xD;&#xA;СтрокиАлкоКода = Document.DeclaredItems.FindByField(&quot;АлкоКод&quot;,SelectedProduct.АлкоКод);}" id="ae7221d8-817e-413c-b59b-f9c382e0c5e1" indent="0" name="14" nextDirection="27" /><ConditionAction breakPoint="False" expression="СтрокиАлкоКода.Count!=0" id="cd007128-5d6a-4a41-b53c-9d5b4d0b5873" indent="0" name="27" nextDirection="" noDirection="14Old" yesDirection="28" /><SelectDocumentLineAction breakPoint="False" id="73ae073d-c6c6-458d-a351-78e55d259803" indent="0" name="28" nextDirection="ЕслиВДокументеЕстьПланАлкокод" sessionVariable="SelectedLine"><Query copySelection="False" documentLines="Declared" from="СтрокиАлкоКода" sourceWhereExpression="" tableAlias="СтрокиАлкоКода" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ProductId!=SelectedProduct.Product.Id"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="SelectedLine!=null" id="acc74c65-b74b-4a51-ac53-297ff30fc446" indent="0" name="ЕслиВДокументеЕстьПланАлкокод" nextDirection="" noDirection="14Old" yesDirection="14New" /><ConditionAction breakPoint="False" expression="Document.КонтрольКолва == 1 &amp;&amp; КонтрольТовараБезКолич == false" id="5ef7727b-3339-486d-b6df-449591a2b41e" indent="0" name="14New" nextDirection="" noDirection="запись 1" yesDirection="РучнойКонтроль" /><ConditionAction breakPoint="False" expression="SelectedLine.CurrentQuantity+SelectedProduct.Quantity&gt;SelectedLine.DeclaredQuantity " id="c5f274bb-5b4a-4695-9a87-62ab2ef4f3ce" indent="0" name="РучнойКонтроль" nextDirection="" noDirection="запись 1" yesDirection="Перебор" /><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="False" checkQuantity="False" combineEqualCurrentItems="True" declaredExpression="" errorQuantityMessage="" id="294b8496-a920-4fdf-9693-67c27664f9fd" ignoreFieldsInDocument="False" indent="1" name="запись 1" nextDirection="ПоправитьПланДляОтображения" noProductErrorDirection="" noProductInDocumentMessage="" onlyInCurrentItems="True" quantityErrorDirection="" useSelectedLine="True"><ComparingFieldNames count="1"><String>АлкоКод</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems count="2"><String>АлкоКод</String><String>АлкоПДФ</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="False" checkQuantity="True" combineEqualCurrentItems="True" declaredExpression="" errorQuantityMessage="" id="1353a068-3dab-4131-a6fc-80095cfbf85b" ignoreFieldsInDocument="False" indent="1" name="ЗаписьТолькоВФакт" nextDirection="ПоправитьПланДляОтображения" noProductErrorDirection="Товар нет в плане" noProductInDocumentMessage="" onlyInCurrentItems="True" quantityErrorDirection="Перебор" useSelectedLine="True"><ComparingFieldNames count="1"><String>АлкоКод</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems count="2"><String>АлкоКод</String><String>АлкоПДФ</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><AssignAction breakPoint="False" expression="if(LastChangedCurrentItems.Count!=0&amp;&amp;LastChangedCurrentItems[0].DeclaredQuantity==0)&#xD;&#xA;LastChangedCurrentItems[0].DeclaredQuantity = SelectedLine.DeclaredQuantity;&#xD;&#xA;SelectedLine.CurrentQuantity = SelectedLine.CurrentQuantity+SelectedProduct.Quantity;&#xD;&#xA;SelectedLine = MemSelectedLine;" id="dbbb636b-9f15-40a4-ab96-4e1af067685b" indent="1" name="ПоправитьПланДляОтображения" nextDirection="7" /><ConditionAction breakPoint="False" expression="Document.КонтрольКолва == 1 &amp;&amp; КонтрольТовараБезКолич == false" id="0c5fa95b-df6a-4fa6-be30-e44d2d75a37f" indent="0" name="14Old" nextDirection="" noDirection="запись" yesDirection="С проверкой" /><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="False" checkQuantity="False" combineEqualCurrentItems="True" declaredExpression="" errorQuantityMessage="" id="dd4fc1a7-d536-40d2-aba2-b6f8378d4333" ignoreFieldsInDocument="False" indent="1" name="запись" nextDirection="7" noProductErrorDirection="" noProductInDocumentMessage="" onlyInCurrentItems="False" quantityErrorDirection="" useSelectedLine="False"><ComparingFieldNames count="1"><String>АлкоКод</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems count="2"><String>АлкоКод</String><String>АлкоПДФ</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="False" checkQuantity="True" combineEqualCurrentItems="True" declaredExpression="" errorQuantityMessage="" id="a1737a06-ed5a-434b-9dc4-71796d8cff56" ignoreFieldsInDocument="False" indent="1" name="С проверкой" nextDirection="7" noProductErrorDirection="Товар нет в плане" noProductInDocumentMessage="" onlyInCurrentItems="False" quantityErrorDirection="Перебор" useSelectedLine="False"><ComparingFieldNames count="1"><String>АлкоКод</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems count="2"><String>АлкоКод</String><String>АлкоПДФ</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><ConditionAction breakPoint="False" expression="Document.КонтрольКолва == 1 &amp;&amp; КонтрольТовараБезКолич == false" id="6061f9e4-a31c-456a-b142-187480602748" indent="0" name="Проверка принадлежности товара1" nextDirection="" noDirection="11" yesDirection="12" /><ConditionAction breakPoint="False" expression="SelectedProduct.Product.Id == UnknownProduct.Id" id="01f5ab82-28d8-4d89-9601-9c8b88f2d2a8" indent="1" name="11" nextDirection="" noDirection="13" yesDirection="" /><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="False" checkQuantity="False" combineEqualCurrentItems="True" declaredExpression="{(SelectedProduct.Алко==false || Item.АлкоКод == SelectedProduct.АлкоКод) &amp;&amp; (SelectedProduct.Алко==true || Item.ШК == SelectedProduct.ШК) &amp;&amp; (ПоДатеРозлива==false || Item.ДатаРозлива == SelectedProduct.ДатаРозлива)}" errorQuantityMessage="" id="d4b5bece-e128-48a8-8872-ccaa16a7d707" ignoreFieldsInDocument="False" indent="2" name="Обычная запись 1" nextDirection="7" noProductErrorDirection="" noProductInDocumentMessage="" onlyInCurrentItems="False" quantityErrorDirection="" useSelectedLine="False"><ComparingFieldNames count="3"><String>ШК</String><String>Характеристика</String><String>ИдСерии</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems capacity="16" count="11"><String>FirstStorageBarcode</String><String>ШК</String><String>СН</String><String>Цена</String><String>ЦенаПриемки</String><String>НомерСтрокиДокумента</String><String>ИдСерии</String><String>АлкоСН</String><String>АлкоКод</String><String>АлкоПДФ</String><String>ДатаРозлива</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><ConditionAction breakPoint="False" expression="SelectedProduct.Packing.Весовой == true" id="fa48e688-1ea1-4075-ac42-bfd54b89ea45" indent="1" name="13" nextDirection="" noDirection="Обычная запись" yesDirection="" /><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="False" checkQuantity="False" combineEqualCurrentItems="False" declaredExpression="{Item.ИмяХарактеристики == SelectedProduct.ИмяХарактеристики &amp;&amp; (Item.АлкоКод == &quot;&quot; || Item.АлкоКод == SelectedProduct.АлкоКод) &amp;&amp; (ПоДатеРозлива==false || Item.ДатаРозлива == null || Item.ДатаРозлива.Ticks == 0 || Item.ДатаРозлива == SelectedProduct.ДатаРозлива)}" errorQuantityMessage="" id="a4258224-abb2-4240-b64b-2289a646c676" ignoreFieldsInDocument="False" indent="2" name="Обычная запись весовой" nextDirection="7" noProductErrorDirection="" noProductInDocumentMessage="" onlyInCurrentItems="False" quantityErrorDirection="" useSelectedLine="False"><ComparingFieldNames count="0" /><ComparingFieldNamesForCurrentItems capacity="16" count="10"><String>FirstStorageBarcode</String><String>СН</String><String>Цена</String><String>ЦенаПриемки</String><String>НомерСтрокиДокумента</String><String>ИдСерии</String><String>АлкоСН</String><String>АлкоКод</String><String>АлкоПДФ</String><String>ДатаРозлива</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="False" checkQuantity="False" combineEqualCurrentItems="True" declaredExpression="{Item.ИмяХарактеристики == SelectedProduct.ИмяХарактеристики &amp;&amp; (Item.АлкоКод == &quot;&quot; || Item.АлкоКод == SelectedProduct.АлкоКод) &amp;&amp; (ПоДатеРозлива==false || Item.ДатаРозлива == null || Item.ДатаРозлива.Ticks == 0 || Item.ДатаРозлива == SelectedProduct.ДатаРозлива)}" errorQuantityMessage="" id="2bfe4c6a-baa3-48cc-bec3-0b18491b4ef3" ignoreFieldsInDocument="False" indent="2" name="Обычная запись" nextDirection="7" noProductErrorDirection="" noProductInDocumentMessage="" onlyInCurrentItems="False" quantityErrorDirection="" useSelectedLine="False"><ComparingFieldNames count="0" /><ComparingFieldNamesForCurrentItems capacity="16" count="12"><String>FirstStorageBarcode</String><String>СН</String><String>Цена</String><String>ЦенаПриемки</String><String>НомерСтрокиДокумента</String><String>ИдСерии</String><String>АлкоСН</String><String>АлкоКод</String><String>АлкоПДФ</String><String>ДатаРозлива</String><String>ИмяПользователя</String><String>ИдПользователя</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><ConditionAction breakPoint="False" expression="SelectedProduct.Packing.Весовой == true" id="f31aeaff-1aa6-467e-b113-b0d643c502ad" indent="1" name="12" nextDirection="" noDirection="Запись с проверкой" yesDirection="" /><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="True" checkQuantity="True" combineEqualCurrentItems="False" declaredExpression="{Item.ИмяХарактеристики == SelectedProduct.ИмяХарактеристики &amp;&amp; (Item.АлкоКод == &quot;&quot; || Item.АлкоКод == SelectedProduct.АлкоКод) &amp;&amp; (ПоДатеРозлива==false || Item.ДатаРозлива == null || Item.ДатаРозлива.Ticks == 0 || Item.ДатаРозлива == SelectedProduct.ДатаРозлива)}" errorQuantityMessage="" id="599171dc-4b80-4d33-9dc9-df986f35d6cc" ignoreFieldsInDocument="False" indent="2" name="Запись с проверкой весовой" nextDirection="7" noProductErrorDirection="Товар нет в плане" noProductInDocumentMessage="" onlyInCurrentItems="False" quantityErrorDirection="Перебор" useSelectedLine="False"><ComparingFieldNames count="0" /><ComparingFieldNamesForCurrentItems capacity="16" count="10"><String>FirstStorageBarcode</String><String>СН</String><String>Цена</String><String>ЦенаПриемки</String><String>НомерСтрокиДокумента</String><String>ИдСерии</String><String>АлкоСН</String><String>АлкоКод</String><String>АлкоПДФ</String><String>ДатаРозлива</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><AcceptInDocumentAction breakPoint="False" checkDocumentInfill="True" checkQuantity="True" combineEqualCurrentItems="True" declaredExpression="{Item.ИмяХарактеристики == SelectedProduct.ИмяХарактеристики &amp;&amp; (Item.АлкоКод == &quot;&quot; || Item.АлкоКод == SelectedProduct.АлкоКод) &amp;&amp; (ПоДатеРозлива==false || Item.ДатаРозлива == null || Item.ДатаРозлива.Ticks == 0 || Item.ДатаРозлива == SelectedProduct.ДатаРозлива)}" errorQuantityMessage="" id="ca922e9c-466f-4c69-9328-4a3d02ff8c5c" ignoreFieldsInDocument="False" indent="2" name="Запись с проверкой" nextDirection="7" noProductErrorDirection="Товар нет в плане" noProductInDocumentMessage="" onlyInCurrentItems="False" quantityErrorDirection="Перебор" useSelectedLine="False"><ComparingFieldNames count="0" /><ComparingFieldNamesForCurrentItems capacity="16" count="10"><String>FirstStorageBarcode</String><String>СН</String><String>Цена</String><String>ЦенаПриемки</String><String>НомерСтрокиДокумента</String><String>ИдСерии</String><String>АлкоСН</String><String>АлкоКод</String><String>АлкоПДФ</String><String>ДатаРозлива</String></ComparingFieldNamesForCurrentItems></AcceptInDocumentAction><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" defaultButtonHeight="35 px" fullscreen="Inherit" headerText="&lt;b size=&quot;+1&quot;&gt;ПЕРЕБОР&lt;/b&gt;&#xD;&#xA;{SelectedProduct.стрВШапкахОкон}&#xD;&#xA;{SelectedProduct.Алко == true:{SelectedProduct.стрАлкоКороткое};}&#xD;&#xA;&lt;b size=&quot;+1&quot; align=&quot;left&quot; color=&quot;DarkGray&quot;&gt;Набрано: {Document.CurrentItems.FindByField(&quot;ProductId&quot;,SelectedProduct.ProductId).CurrentQuantity:0.####} из {Document.CurrentItems.FindFirstByField(&quot;ProductId&quot;,SelectedProduct.ProductId).DeclaredQuantity:0.####} {SelectedProduct.Packing.Name}!&lt;/b&gt;&#xD;&#xA;&lt;b size=&quot;+1&quot; align=&quot;left&quot; color=&quot;Black&quot;&gt;ПЫТАЕТЕСЬ ВЗЯТЬ &lt;Red&gt;{SelectedProduct.QuantityString}&lt;/Red&gt;&lt;/b&gt;" id="830ce633-b4b2-4ea4-8418-b873b2a6f096" indent="0" name="Перебор" nextDirection="" showAsMsgBox="False" transactionNotch="False" welcomeText=""><ButtonDirections count="1"><String>25</String></ButtonDirections><ButtonTexts count="1"><String>&lt;b&gt;Отмена сканирования&lt;/b&gt;</String></ButtonTexts><KeyJumps count="0" /></QuestionAction><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" defaultButtonHeight="35 px" fullscreen="Inherit" headerText="&lt;b size=&quot;+1&quot;&gt;ТОВАРА НЕТ В ПЛАНЕ&lt;/b&gt;&#xD;&#xA;{SelectedProduct.стрВШапкахОкон}&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ЦенаСклад}" id="3294905a-37ed-4c1b-93dd-4918b959ac09" indent="0" name="Товар нет в плане" nextDirection="" showAsMsgBox="False" transactionNotch="False" welcomeText=""><ButtonDirections count="1"><String>25</String></ButtonDirections><ButtonTexts count="1"><String>&lt;b&gt;Отмена сканирования&lt;/b&gt;</String></ButtonTexts><KeyJumps count="0" /></QuestionAction><AssignAction breakPoint="False" expression="ВШапку = &quot;&quot;" id="c95af4a1-67ce-47bf-a56e-b6ff863ef434" indent="0" name="25" nextDirection="abort" /><AssignAction breakPoint="False" comment="Если документ создан на терминале или работа без контроля кол-ва, то пишем последнюю отсканированную ячейку в план" expression="СтрокиТекущегоТовара = LastChangedDeclaredItems;&#xD;&#xA;ФактическиеДобавленныеСтроки = LastChangedCurrentItems;&#xD;&#xA;if(Document.КонтрольКолва != 1&amp;&amp;Document.РаботаемСЯчейками == true&amp;&amp;LastChangedCurrentItems.Count!=0&amp;&amp;LastChangedCurrentItems[0].FirstStorageBarcode!=&quot;&quot;&amp;&amp;LastChangedCurrentItems[0].BindedLine.FirstCellId != LastChangedCurrentItems[0].FirstStorageBarcode)&#xD;&#xA;LastChangedCurrentItems[0].BindedLine.FirstCellId = LastChangedCurrentItems[0].FirstStorageBarcode;" id="6d304535-0676-485d-aa90-68e146124c8d" indent="0" name="7" nextDirection="" /><ConditionAction breakPoint="False" expression="SelectedProduct.Алко == true &amp;&amp; GlobalVars.РежимСканироватьEAN13[Document.DocumentType.Name] == &quot;Не использовать&quot;" id="d6562671-148c-4fc8-9a46-6ac0698291a7" indent="0" nextDirection="" noDirection="Финал" yesDirection="return" /><AssignAction breakPoint="False" comment="                //Для работы только по 417 тоже нужно поднятие строки" expression="СтрокиПоказа.TopBottom(SelectedLine,  true)" id="ef1c44a0-2586-488d-8cdc-f775d230792e" indent="0" name="1" nextDirection="return" /><ForeachAction breakPoint="False" buttonExit="False" canFinishAlways="False" cyclic="True" exitButtonText="" exitGroupCode="" fullscreen="Inherit" id="fe923756-b5e1-4dcd-b096-74ea2b5a0251" indent="0" items="{СтрокиТекущегоТовара}" name="Финал" nextDirection="return" transactionNotch="False"><Actions capacity="8" count="7"><ConditionAction breakPoint="False" expression="SelectedProduct.ЦенаПриемки&gt;0" id="abccba6b-30c4-4c7d-8d78-a29e8a5fec0b" indent="0" nextDirection="" noDirection="3" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedLine.ЦенаПриемки = SelectedProduct.ЦенаПриемки" id="af858720-c31d-47a5-8997-25221ff6a258" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="SelectedProduct.НомерСтрокиДокумента &gt; 0" id="2c8b1a1a-2131-4e29-856c-c1ef6a6a9498" indent="0" name="3" nextDirection="" noDirection="2" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedLine.НомерСтрокиДокумента = SelectedProduct.НомерСтрокиДокумента" id="a7126158-ada5-4adb-b565-7476c3f1089f" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="УдалятьСходящиеся &amp;&amp; SelectedLine.UnderloadedOrOverloaded == false" id="1a188391-a3ee-478a-8627-931e297c2c46" indent="0" name="2" nextDirection="" noDirection="1" yesDirection="" /><AssignAction breakPoint="False" expression="q=СтрокиПоказа.Remove(SelectedLine)" id="a67cf6a1-a9b9-478c-ab32-f6dfa7b1c629" indent="1" name="" nextDirection="continue" /><AssignAction breakPoint="False" expression="СтрокиПоказа.TopBottom(SelectedLine,  true)" id="309cde55-1646-4334-83ae-4c218a20ff09" indent="0" name="1" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction></Actions><Parameters capacity="8" count="8"><FieldInfo alias="" eanAI="None" fieldName="SelectedProduct" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SelectedProduct" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СтрокиДляСпускаВниз" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="StrokiDlyaSpuskaVniz" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="КонтрольТовараБезКолич" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="KontrolTovaraBezKolich" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СтрокиПоказа" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="StrokiPokaza" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="УдалятьСходящиеся" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="UdalyatShodyashhiesya" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПоДатеРозлива" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="PoDateRozliva" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="НаборАлкоСерийныхНомеровЗавершен" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="NaborAlkoSerijnyhNomerovZavershen" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="Buffer" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="Buffer" valueTemplate="" /></Parameters><Returns capacity="8" count="5"><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокиТекущегоТовара" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="StrokiTekushhegoTovara" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ФактическиеДобавленныеСтроки" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="FakticheskieDobavlennyeStroki" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="Buffer" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="Buffer" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокиПоказа" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="StrokiPokaza" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ВШапку" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="VShapku" valueTemplate="" /></Returns></Operation>