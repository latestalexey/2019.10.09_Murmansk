<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3 | sh" fullscreen="Inherit" lock="AllOperations" name="ЕГАИС3 СтрокиНоменклатура" serverHosted="True"><Actions capacity="16" count="11"><SelectDocumentLinesAction breakPoint="False" id="b7b005d4-8c48-4e13-b2cc-313cba5254b6" indent="0" nextDirection="" sessionVariable="СписокТоваров"><Query copySelection="False" documentLines="Declared" from="Document.Структура" sourceWhereExpression="" tableAlias="Document.Структура" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Родитель == ИдРодителя"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><SelectDocumentLinesAction breakPoint="False" id="7d912bd2-3a7d-40b7-b7fe-88c5de39c3b0" indent="0" name="49" nextDirection="" sessionVariable="СписокКоробок"><Query copySelection="False" documentLines="Declared" from="Document.КоробкиВНоменклатуре" sourceWhereExpression="" tableAlias="Document.КоробкиВНоменклатуре" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><SelectDocumentLineAction breakPoint="False" id="d64e3e05-2f41-4143-bc83-90b1ca8b74e2" indent="0" nextDirection="" sessionVariable="ТекущаяКоробка"><Query copySelection="False" documentLines="Declared" from="Document.Коробки" sourceWhereExpression="" tableAlias="Document.Коробки" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ИдРодителя"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><AssignAction breakPoint="False" comment="// Вынесено наружу, так как запрещено в серверной операции" expression="СтрокиНоменклатура = global::Cleverence.Warehouse.ObjectCollection.CreateServerHosted();&#xD;&#xA;СтрокиНоменклатура.AddRange(СписокТоваров);&#xD;&#xA;СтрокиНоменклатура.AddRange(СписокКоробок);" id="44f9b8e8-bdaf-4fc5-896a-a913305c54a6" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="СошлосьКоробок = СписокКоробок.Факт" id="8abbd835-9838-4e67-b065-e6c7ca1def1a" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="ВсегоКоробок = СписокКоробок.План" id="e93820b7-3f4f-4402-b13c-a1b409bcf2b2" indent="0" nextDirection="" /><SelectDocumentLinesAction breakPoint="False" id="22bfef2c-bfa4-4c6e-800f-3a019a6fe6a5" indent="0" nextDirection="" sessionVariable="СписокСтрок"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.РодительФакт == ИдРодителя"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="СошлосьСтрок = СписокСтрок.FindByField(&quot;ПоПлануДаНет&quot;, true).Count" id="0242d59f-d391-4e1e-95c8-7248fa6a7901" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="ПланСтрок = СписокТоваров.План" id="f134c5b6-9c10-452a-bc50-64c08f6c54e6" indent="0" name="117" nextDirection="" /><SelectDocumentLinesAction breakPoint="False" id="1b6daeb6-7eab-43ee-a43e-f5ead00b389d" indent="0" nextDirection="" sessionVariable="КоробкиДляОшибок"><Query copySelection="False" documentLines="Declared" from="Document.Коробки" sourceWhereExpression="" tableAlias="Document.Коробки" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><OperationAction abortDirection="" breakPoint="False" id="04a400eb-ad5e-4d15-a5dc-f48bc6d3a2b3" indent="0" name="116" nextDirection="" operationName="ЕГАИС3 СчитаемКоличествоОшибок" transactionNotch="False"><InKeys count="2"><String>СписокВсехКоробок</String><String>ЛПШтучек</String></InKeys><InValues count="2"><String>{КоробкиДляОшибок}</String><String>{СписокСтрок}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction></Actions><Parameters count="1"><FieldInfo alias="" eanAI="None" fieldName="ИдРодителя" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="IdRoditelya" valueTemplate="" /></Parameters><Returns capacity="16" count="10"><ReturnFieldInfo alias="" eanAI="None" fieldName="СписокКоробок" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SpisokKorobok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СписокТоваров" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SpisokTovarov" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СошлосьКоробок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SoshlosKorobok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ВсегоКоробок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="VsegoKorobok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СошлосьСтрок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SoshlosStrok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ПланСтрок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="PlanStrok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="КоличествоОшибок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="KolichestvoOshibok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ТекущаяКоробка" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="TekushhayaKorobka" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="МожноЗакрывать" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="MozhnoZakryvat" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокиНоменклатура" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="StrokiNomenklatura" valueTemplate="" /></Returns></Operation>