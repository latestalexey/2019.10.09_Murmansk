<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" fullscreen="Inherit" lock="No" name="ЕГАИС3 ПросмотрОстатков" serverHosted="False"><Actions capacity="16" count="12"><ConditionAction breakPoint="False" comment="Если выбрана характеристика" expression="Поз.ИмяХарактеристики != null &amp;&amp; Поз.ИмяХарактеристики != &quot;&quot;" id="a944b4ae-a5ea-4122-8948-74d050d7b4b2" indent="0" nextDirection="" noDirection="2" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Если выбрана характеристика" id="497dd1d1-fd06-4118-bf8a-2217df8cb9ee" indent="1" name="3" nextDirection="" sessionVariable="ОстаткиХарактеристики"><Query copySelection="False" documentLines="Declared" from="{Остатки}" sourceWhereExpression="" tableAlias="{Остатки}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдНоменклатуры == Поз.Product.Id &amp;&amp; Item.Характеристика == Поз.ИмяХарактеристики"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ItemsViewAction id="a3f46735-8967-4324-8889-4c72e89d510a" indent="1" name="4" nextDirection="7" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;&lt;r color=&quot;Black&quot;&gt;{Поз.Product.Name} - &lt;/r&gt;&lt;r size=&quot;+2&quot; color=&quot;SteelBlue&quot;&gt;&lt;b&gt;{Поз.ИмяХарактеристики}&lt;/b&gt;&lt;/r&gt;" footerText="&lt;button width=&quot;100%&quot; direction=&quot;2&quot;&gt;Все остатки товара&lt;/button&gt;" title="&lt;b size=&quot;+1&quot; color=&quot;SteelBlue&quot;&gt;Остатки&lt;/b&gt;" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{ОстаткиХарактеристики}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="3"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Склад.Наименование}" leftBorder="0" rightBorder="0" topBorder="0" width="60%" /><ItemsColumn align="MiddleCenter" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Количество}" leftBorder="0" rightBorder="0" title="Кол-во" topBorder="0" width="20%" /><ItemsColumn align="MiddleCenter" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Резерв}" leftBorder="0" rightBorder="0" title="Резерв" topBorder="0" width="20%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><AssignAction breakPoint="False" expression="=&quot;&quot;" id="acdc49de-ac22-4315-8929-d2d92904a0a3" indent="1" name="7" nextDirection="4" /><SelectDocumentLinesAction breakPoint="False" id="9ce570e3-da7c-4972-a5c4-e3d35725d59e" indent="0" name="2" nextDirection="" sessionVariable="ОстаткиНоменклатуры"><Query copySelection="False" documentLines="Declared" from="{Остатки}" sourceWhereExpression="" tableAlias="{Остатки}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдНоменклатуры == Поз.Product.Id"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="1"><String>ИдСклада1С</String></SortBy><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="i = 0;&#xD;&#xA;cnt = ОстаткиНоменклатуры.Count;&#xD;&#xA;res = new Cleverence.Warehouse.RowCollection();&#xD;&#xA;while(i &lt; cnt)&#xD;&#xA;{&#xD;&#xA;  if(i == 0 || ОстаткиНоменклатуры[i].ИдСклада1С != ОстаткиНоменклатуры[i-1].ИдСклада1С)&#xD;&#xA;  {&#xD;&#xA;   temp = res.AddNew();&#xD;&#xA;   temp.Заголовок = ОстаткиНоменклатуры[i].Склад.Наименование;&#xD;&#xA;  }&#xD;&#xA;res.Add(ОстаткиНоменклатуры[i]);&#xD;&#xA;temp.Количество = temp.Количество + ОстаткиНоменклатуры[i].Количество;&#xD;&#xA;temp.Резерв = temp.Резерв + ОстаткиНоменклатуры[i].Резерв;&#xD;&#xA;i = i + 1;&#xD;&#xA;}&#xD;&#xA;СтрокиДляПоказа = res;" id="ff6292ea-ba85-426a-b776-84dca4cbbda1" indent="0" nextDirection="6" /><SelectDocumentLinesAction breakPoint="False" id="0f2749a5-3692-445e-9f8c-129eb9ee3e8c" indent="0" nextDirection="" sessionVariable="ОстаткиНоменклатурыПоСкладам"><Query copySelection="False" documentLines="Declared" from="{ОстаткиНоменклатуры}" sourceWhereExpression="" tableAlias="{ОстаткиНоменклатуры}" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="1"><String>ИдСклада1С</String></GroupBy><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="СтрокиДляПоказа = new Cleverence.Warehouse.RowCollection()" id="5e2ab0e7-6cc5-4af1-899a-b0861e724b9c" indent="0" nextDirection="" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="25f3bc5f-3c8a-4c67-a87a-eab0c0d88683" indent="0" items="{ОстаткиНоменклатурыПоСкладам}" nextDirection="" transactionNotch="False"><Actions capacity="16" count="12"><SelectDocumentLinesAction breakPoint="False" id="ba06986d-0aad-4faa-866f-9f2399850a1d" indent="0" nextDirection="" sessionVariable="ПоСкладу"><Query copySelection="False" documentLines="Declared" from="{ОстаткиНоменклатуры}" sourceWhereExpression="" tableAlias="{ОстаткиНоменклатуры}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдСклада1С == SelectedLine.ИдСклада1С"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" expression="ПоСкладу.Count &gt; 1" id="b38f64c8-38f4-407f-bd86-72eb1e55df61" indent="0" nextDirection="" noDirection="1" yesDirection="" /><AssignAction breakPoint="False" expression="копия = new Cleverence.Warehouse.Row();&#xD;&#xA;копия.Группа = 1;&#xD;&#xA;копия.СкладНаименование = ПоСкладу[0].Склад.Наименование;" id="6a03826a-db2f-46cc-8147-95868f6dc30f" indent="1" nextDirection="2" /><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(копия)" id="3155b8ec-b1dd-4c75-a373-a567d1cbaa6c" indent="1" name="2" nextDirection="" /><AssignAction breakPoint="False" expression="Колво=0" id="5ccb8910-606a-4fe0-b3db-259e6bf5e845" indent="1" name="" nextDirection="" /><AssignAction breakPoint="False" expression="Резерв = 0" id="786453a0-a687-4078-9a84-cee78fdb40fc" indent="1" nextDirection="" /><AssignAction breakPoint="False" expression="СтрокаГруппы = копия" id="624b8c9e-7f52-4f3e-8d0b-08105dd384ed" indent="1" nextDirection="" /><AssignAction breakPoint="False" expression="СтрокаГруппы.Количество = 0" id="e8190fc0-d2ae-46c0-98c0-da16df6c47b5" indent="1" nextDirection="" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="07d8d89b-a615-4e14-af9d-20dac6ae17ad" indent="1" items="{ПоСкладу}" nextDirection="" transactionNotch="False"><Actions count="4"><AssignAction breakPoint="False" expression="SelectedLine.ВГруппе = 1" id="c30c0d19-1390-4163-a2df-3ba1f971db8b" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="Колво = Колво + SelectedLine.Количество" id="99e8a3f9-094b-48bd-9411-6ce84cf3e481" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="Резерв = Резерв + SelectedLine.Резерв" id="503eedd8-d93b-4ed2-891c-52f4c6e28666" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(SelectedLine)" id="571a06eb-2b38-4b47-b333-84baeec4d744" indent="0" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><AssignAction breakPoint="False" expression="СтрокаГруппы.Количество = Колво" id="91d52ef1-9e96-483d-b29f-7f031abc365e" indent="1" nextDirection="" /><AssignAction breakPoint="False" expression="СтрокаГруппы.Резерв = Резерв" id="4f8b438b-5287-4fcf-97b1-d4c485661548" indent="1" nextDirection="continue" /><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(ПоСкладу[0])" id="e2f29fa8-9e63-4156-91ce-461d1d9b533c" indent="0" name="1" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><ItemsViewAction id="f38876e9-6ded-4767-87cb-2862c319cda0" name="6" nextDirection="" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;&lt;r color=&quot;Black&quot;&gt;{Поз.Product.Name}&lt;/r&gt;&#xD;&#xA;" footerText="{Поз.ИмяХарактеристики != null &amp;&amp; Поз.ИмяХарактеристики != &quot;&quot;:&lt;button width=&quot;100%&quot; direction=&quot;5&quot;&gt;Остатки по характеристике&lt;/button&gt;;}" title="&lt;b size=&quot;+1&quot; color=&quot;SteelBlue&quot;&gt;Остатки&lt;/b&gt;" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{СтрокиДляПоказа}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="3"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="&lt;b&gt;{Item.Заголовок}&lt;/b&gt;{Item.Характеристика}" leftBorder="0" rightBorder="0" topBorder="0" width="60%" /><ItemsColumn align="MiddleCenter" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Заголовок != &quot;&quot;:&lt;b&gt;{Item.Количество}&lt;/b&gt;;{Item.Количество}}" leftBorder="0" rightBorder="0" title="Кол-во" topBorder="0" width="20%" /><ItemsColumn align="MiddleCenter" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Заголовок != &quot;&quot;:&lt;b&gt;{Item.Резерв}&lt;/b&gt;;{Item.Резерв}}" leftBorder="0" rightBorder="0" title="Резерв" topBorder="0" width="20%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><AssignAction breakPoint="False" expression="=&quot;&quot;" id="f6ceed43-5995-415c-ad3c-b5780b8aa858" indent="0" nextDirection="6" /><ClearSessionAction all="False" breakPoint="False" id="dc084e94-eed8-41b6-b612-f4673e84ac4e" indent="0" name="5" nextDirection="3"><KeyNames capacity="8" count="8"><String>СтрокиДляПоказа</String><String>СтрокаГруппы</String><String>ОстаткиНоменклатуры</String><String>ОстаткиНоменклатурыПоСкладам</String><String>ОстаткиХарактеристики</String><String>Колво</String><String>Резерв</String><String>копия</String></KeyNames></ClearSessionAction></Actions><Parameters count="1"><FieldInfo alias="" eanAI="None" fieldName="Поз" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="Poz" valueTemplate="" /></Parameters><Returns count="0" /></Operation>