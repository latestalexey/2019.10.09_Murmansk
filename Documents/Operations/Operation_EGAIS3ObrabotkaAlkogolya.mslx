<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="Алкоголь" fullscreen="True" lock="No" name="ЕГАИС3 ОбработкаАлкоголя" serverHosted="False"><Actions capacity="128" count="102"><AssignAction breakPoint="False" expression="сч = 0" id="067fd44d-405b-4f80-aa7d-a540fa2cae91" indent="0" name="Обнуление счётчика" nextDirection="" /><OperationAction abortDirection="" breakPoint="False" id="158e4786-a44d-4de1-96f3-fe3b701e2599" indent="0" name="Нужна ли проверка чекмарком" nextDirection="" operationName="ЕГАИС3 НужнаПроверкаЧекМарк" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="ПроверкаЧекМарк == true" id="28e68ca6-6a83-4c89-b738-2eae6186e787" indent="0" name="Если нужна проверка" nextDirection="" noDirection="19 1" yesDirection="19 1" /><OperationAction abortDirection="30" breakPoint="False" id="47b2321e-d7f0-4e9b-b653-8151056edbca" indent="2" name="Вызов чекмарк" nextDirection="Если есть план" operationName="ЕГАИС3 ВызовЧекМарк" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="СтрокаСАлкоголем == null" id="ffac559f-9e61-4eb5-a18c-453d89324a5b" indent="0" name="19 1" nextDirection="" noDirection="Перенос из проверенной строки" yesDirection="" /><OperationAction abortDirection="" breakPoint="False" id="f3bf9143-8614-4ddc-92f0-3a9f49f66479" indent="2" name="Перенос из товара" nextDirection="Если есть план" operationName="ЕГАИС3 ПереносАлкоДанныхИзТовара" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><OperationAction abortDirection="" breakPoint="False" id="8a01c374-252d-4d50-8d2a-82bcab602977" indent="3" name="Перенос из проверенной строки" nextDirection="Если есть план" operationName="ЕГАИС3 ПереносАлкоДанныхИзСтроки" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="ПланИФакт == true" id="6b6eb618-8cd4-4c3c-9255-26eebe188a26" indent="0" name="Если есть план" nextDirection="" noDirection="28" yesDirection="" /><OperationAction abortDirection="" breakPoint="False" id="67ee61db-c3be-483a-98bc-f02f3c5a2f59" indent="1" name="Отбор строк заявки" nextDirection="" operationName="ЕГАИС3 АлкоПодборСтрокЗаявки" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><SelectDocumentLinesAction breakPoint="False" id="bed2507a-5aa3-4a20-ad41-8c956e3c1407" indent="0" name="ПоискВЗаявке" nextDirection="" sessionVariable="СтрокиТекущегоТовара"><Query copySelection="False" documentLines="Declared" from="" sourceWhereExpression="" tableAlias="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.АлкоКод==SelectedProduct.АлкоКод"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" expression="СтрокиТекущегоТовара.Count &gt; 0" id="ac67098c-fa90-4326-8b24-cdf37f4d85b9" indent="0" nextDirection="" noDirection="22" yesDirection="" /><AssignAction breakPoint="False" expression="СтрокаТекущегоТовара = СтрокиТекущегоТовара[0]" id="bd88de2f-af8d-44d8-942f-aeb68b33cc55" indent="1" nextDirection="Проверка допустимости товара" /><AssignAction breakPoint="False" expression="СтрокаТекущегоТовара = null" id="772897b9-4a97-491e-a846-a0d3bc96298e" indent="0" name="22" nextDirection="" /><OperationAction abortDirection="abort" breakPoint="False" id="0fc0bf8f-a4fb-4971-b34e-3a42bb7038a8" indent="0" name="Проверка допустимости товара" nextDirection="28" operationName="ЕГАИС3 ПроверкаТовараВСтрокахДокумента" transactionNotch="False"><InKeys count="3"><String>SelectedProduct</String><String>СтрокиТекущегоТовара</String><String>КонтрольТовараБезКолич</String></InKeys><InValues count="3"><String>{SelectedProduct}</String><String>{СтрокиТекущегоТовара}</String><String>{КонтрольТовараБезКолич}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct.ДатаРозлива == &quot;&quot; || SelectedProduct.ДатаРозлива == null" id="e6489740-1186-4ee6-a9c3-f8f0f87012e0" indent="0" name="28" nextDirection="" noDirection="27" yesDirection="11" /><OperationAction abortDirection="abort" breakPoint="False" id="685d9366-d6e7-4f39-afba-04413de6f0ba" indent="1" name="11" nextDirection="" operationName="ЕГАИС3 ВводДатыРозлива" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct.ПроверкаЧМ == true" id="ca8509b7-592d-4e7a-a8e6-d9bc5353a8c6" indent="0" name="27" nextDirection="" noDirection="" yesDirection="Выбор строки с тем же АлкоСН" /><ConditionAction breakPoint="False" expression="Document.АлкоДМ != true &amp;&amp; SelectedProduct.АлкоСН != &quot;&quot; &amp;&amp; SelectedProduct.АлкоКод != &quot;&quot;" id="ff41c85d-a367-406c-9fa4-0d1c514edc52" indent="0" name="Если сбор ДМ и заполнены поля" nextDirection="" noDirection="" yesDirection="24" /><ConditionAction breakPoint="False" expression="НеСканироватьPDF == false" id="f2a47858-bab1-4a23-9b4b-563209be91cf" indent="0" nextDirection="" noDirection="Обнуление АлкоСН" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = &quot;&quot;" id="a79399de-e5ac-4388-8d90-2661d8cdb7d0" indent="1" name="Обнуление АлкоПДФ" nextDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоСН = &quot;&quot;" id="f88fe6d3-80b7-47a4-a580-e8c56eb9a902" indent="0" name="Обнуление АлкоСН" nextDirection="19" /><ConditionAction breakPoint="False" expression="Document.АлкоРежимСканироватьPDF == true &amp;&amp; НеСканироватьPDF == false" id="1d5a3c23-3018-4377-a961-b75c6d013748" indent="0" name="19" nextDirection="" noDirection="" yesDirection="20" /><ConditionAction breakPoint="False" expression="МаркаНовогоТипа == true" id="6de3457b-2c57-49d3-b95e-6f7281ca15b1" indent="0" nextDirection="" noDirection="" yesDirection="35" /><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоКод == empty" id="60baa747-3c71-4991-beac-0a19c82a3704" indent="0" name="18" nextDirection="" noDirection="35" yesDirection="20" /><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоМарк == true || SelectedProduct.Маркировка == &quot;Алкоголь&quot;" id="4781f002-aecc-40fe-812e-df5d92785327" indent="0" name="20" nextDirection="" noDirection="Если сбор много номеров 3" yesDirection="" /><AssignAction breakPoint="False" expression="Scanner.EnableBarcodeType(&quot;PDF417&quot;, true);&#xD;&#xA;Scanner.EnableBarcodeType(&quot;DataMatrix&quot;, false);" id="409c727d-5c16-40a5-8251-c96523e410df" indent="0" name="Сканер только PDF417" nextDirection="" /><FormattedPageAction autoCloseTime="0" backColor="White" backgroundImage="" breakPoint="False" cancelType="None" footerText="{SelectedProduct.ПроверкаЧМ==true || CheckMark.IsInstalled == false:;&lt;button direction=&quot;Вызов чекмарк 2&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Проверить в CheckMark&lt;/button&gt;}{GlobalVars.РежимСканироватьEAN13[Document.DocumentType.Name] == &quot;Новый АлкоКод&quot;:{сч==0:&lt;button direction=&quot;30&quot; enabled=&quot;true&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Назад&lt;/button&gt;;&lt;button direction=&quot;31&quot; enabled=&quot;true&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;({сч} ном.) Завершить&lt;/button&gt;};&lt;button direction=&quot;30&quot; enabled=&quot;true&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Назад&lt;/button&gt;}" fullscreen="Inherit" headerText="{SelectedProduct.стрВШапкахОкон}&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ДатаРозлива: Дата розлива: &lt;b color=&quot;DarkBlue&quot;&gt;(0:dd.MM.yyyy)&lt;/b&gt;}&#xD;&#xA;&lt;r size=&quot;+2&quot; color=&quot;Red&quot;&gt;{ErrorMessage}&lt;/r&gt;&lt;b size=&quot;+2&quot; align=&quot;center&quot; color=&quot;Red&quot;&gt;{MSG}&lt;/b&gt;&#xD;&#xA;&#xD;&#xA;" id="f77af28b-30cb-42c5-ae38-cdd7aea983bf" indent="0" name="Скан ПДФ" nextDirection="" singlePage="False" transactionNotch="True"><Blocks count="1"><LabelPageBlock align="TopCenter" allBorder="0" backColor="Transparent" bottomBorder="0" foreColor="Black" leftBorder="0" rightBorder="0" text="Сканируйте &lt;b size=&quot;+1&quot; color=&quot;Red&quot;&gt;PDF 417&lt;/b&gt;&#xA;&lt;img tcolor=&quot;no&quot; size=&quot;stretch&quot; maxwidth=&quot;100%&quot; align=&quot;center&quot; direction=&quot;&quot;&gt;egares.pdf417&lt;/img&gt;" topBorder="0" /></Blocks><KeyJumps count="3"><KeyToAction action="94" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="31" barcode="" condition="{многономеров==true &amp;&amp; сч &gt; 0}" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="30" barcode="" condition="{многономеров!=true || сч == 0}" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></FormattedPageAction><ClearSessionAction all="False" breakPoint="False" id="227104a6-4a9b-4621-923f-9318e585dbc8" indent="0" name="94" nextDirection=""><KeyNames capacity="16" count="10"><String>Error</String><String>ЭтоПалета</String><String>ЭтоКоробка</String><String>Коды</String><String>МаркаНовогоТипа</String><String>ErrBarcode</String><String>АлкоКод</String><String>НаименованиеОшибка</String><String>MSG</String><String>УжеПДФ</String></KeyNames></ClearSessionAction><OperationAction abortDirection="" breakPoint="False" id="a0a21f51-76e6-4e36-b345-c27c7e67b2cb" indent="0" name="93" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys count="1"><String>PDF417</String></InKeys><InValues count="1"><String>true</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error == true" id="a65fd4f8-b61f-419c-b726-d84a8f605fc7" indent="0" nextDirection="" noDirection="" yesDirection="back" /><ConditionAction breakPoint="False" expression="Document.КонтрольМарок == true" id="973eac06-5bc7-404c-b98c-412585cdcdc7" indent="0" name="34" nextDirection="" noDirection="Запись ПДФ в SelectedProduct" yesDirection="" /><AssignAction breakPoint="False" expression="ПоискПДФВПлане = Document.DeclaredItems.FindFirstByField(&quot;АлкоПДФ&quot;, ScannedBarcode)" id="7b7c9e01-a96a-4cf8-9dce-0e95d3749a2a" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="ПоискПДФВПлане == null &amp;&amp; Document.КонтрольКолва == true" id="bcf351cc-4704-48d4-8ea6-2971347a085f" indent="1" nextDirection="" noDirection="Запись ПДФ в SelectedProduct" yesDirection="" /><BaloonAction breakPoint="False" id="c48b5dcc-34a6-4207-9f49-cd7aa441020b" indent="2" isError="True" name="Ошибка ПДФ 2 1" nextDirection="28 1" seconds="3" text="PDF417 не найден в накладной" /><ClearSessionAction all="False" breakPoint="False" id="13c41d38-43a0-4471-8fd0-c30aa5c49695" indent="2" name="28 1" nextDirection="back"><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = ScannedBarcode" id="10bf0890-c01c-45f9-903f-2f762fff0b7c" indent="0" name="Запись ПДФ в SelectedProduct" nextDirection="" /><AssignAction breakPoint="False" expression="УжеПДФ = Document.CurrentItems.FindFirstByField(&quot;АлкоПДФ&quot;, SelectedProduct.АлкоПДФ)" id="fca11a4c-f89b-409b-a568-91a297f07bfe" indent="0" name="Выбор строки с тем же ПДФ 1" nextDirection="" /><ConditionAction breakPoint="False" expression="УжеПДФ != null" id="f5a74c2c-fcad-4f69-a556-864d81e4e2a5" indent="0" name="Если строка с ПДФ уже есть 1" nextDirection="" noDirection="95" yesDirection="" /><AssignAction breakPoint="False" expression="GO.PlayError();&#xD;&#xA;MSG = &quot;Марка уже сканировалась&quot;;" id="9a32a923-2415-47f7-8a43-60052fcb0896" indent="1" nextDirection="back" /><ConditionAction breakPoint="False" expression="МаркаНовогоТипа == true" id="cdb932c2-a4ee-4e74-94e9-ee33a77f173e" indent="0" name="95" nextDirection="" noDirection="АлкоКод из ПДФ" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоСерия = SelectedProduct.АлкоПДФ.Substring(3, 3);&#xD;&#xA;SelectedProduct.АлкоСН = SelectedProduct.АлкоПДФ.Substring(6, 8);" id="597cd727-68b9-4831-bfe6-7f9cea6df6bf" indent="1" nextDirection="Запомнить АлкоСН" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоКод = АлкоКод" id="4d42abac-cff5-4f87-bca4-6cd66af69a32" indent="0" name="АлкоКод из ПДФ" nextDirection="" /><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоКод == &quot;&quot;" id="972823f0-d097-4ecc-8163-68e34b00eb20" indent="1" name="Если АлкоКод не выбран" nextDirection="" noDirection="Если совпадает с прошлым АлкоКод" yesDirection="Ошибка ПДФ" /><ConditionAction breakPoint="False" expression="ПрошлыйАлкокод == null || SelectedProduct.АлкоКод == ПрошлыйАлкокод" id="206c914c-e2be-4f1c-af32-4f0d6466e405" indent="2" name="Если совпадает с прошлым АлкоКод" nextDirection="" noDirection="26" yesDirection="Выбор строки с тем же ПДФ" /><AssignAction breakPoint="False" expression="УжеПДФ = Document.CurrentItems.FindFirstByField(&quot;АлкоПДФ&quot;, SelectedProduct.АлкоПДФ)" id="13d2e76e-86ab-4056-ad31-72a1e3be6972" indent="3" name="Выбор строки с тем же ПДФ" nextDirection="Если строка с ПДФ уже есть" /><ConditionAction breakPoint="False" expression="УжеПДФ != null" id="3fc30274-b4f8-4667-9ac0-f613e68f38e6" indent="4" name="Если строка с ПДФ уже есть" nextDirection="" noDirection="35" yesDirection="back" /><BaloonAction breakPoint="False" id="ef70d218-3abe-4849-915f-840ef4dd5ac7" indent="3" isError="True" name="Ошибка ПДФ" nextDirection="back" seconds="3" text="неверный PDF 417" /><AssignAction breakPoint="False" expression="GO.PlayError();" id="83689b18-3525-4a6d-885b-87cb8a198d81" indent="3" name="26" nextDirection="" /><AssignAction breakPoint="False" expression="ВШапку = &quot;ДругойАлкоКод&quot;" id="db91a932-2bc7-482b-9b0c-36c94ee6f6b2" indent="3" name="25" nextDirection="31" /><ClearSessionAction all="False" breakPoint="False" id="351212dd-b8a7-4eb3-a732-184624bf5f03" indent="2" name="35" nextDirection=""><KeyNames count="1"><String>ErrorMessage</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="Document.АлкоДМ == true" id="76237773-9d53-4239-bf16-aa7e1bb02925" indent="0" name="18 1" nextDirection="" noDirection="Если сбор много номеров 3" yesDirection="" /><ConditionAction breakPoint="False" expression="Document.DocumentType.Name == &quot;ПодборЗаказа&quot;" id="c117e945-859e-4fbd-99a1-18530f7083a9" indent="0" nextDirection="" noDirection="" yesDirection="8" /><AssignAction breakPoint="False" expression="Scanner.EnableBarcodeType(&quot;DataMatrix&quot;, true)" id="21f716eb-b753-4a08-b3a2-63b7caedd8a7" indent="0" name="Сканер только DataMatrix" nextDirection="" /><ConditionAction breakPoint="False" expression="Document.АлкоМногоДМ == false" id="51f4befb-217f-4254-a02f-57c615b422e1" indent="0" nextDirection="" noDirection="21" yesDirection="96" /><AssignAction breakPoint="False" expression="НаборАлкоСерийныхНомеровЗавершен = false" id="a51ee926-c453-44f6-b3bc-b10f7c1315f6" indent="0" name="21" nextDirection="АлкоСН в SelectedProduct" /><ConditionAction breakPoint="False" expression="МаркаНовогоТипа == true" id="ce8442c9-e0b0-42e1-9079-cedd6ea45150" indent="0" name="96" nextDirection="" noDirection="" yesDirection="Запомнить АлкоСН" /><FormattedPageAction autoCloseDirection="" autoCloseTime="0" backColor="White" backgroundImage="" breakPoint="False" cancelType="None" comment="единичные сканы без списка" footerText="{SelectedProduct.ПроверкаЧМ==true || CheckMark.IsInstalled == false:;&lt;button direction=&quot;Вызов чекмарк 2&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Проверить в CheckMark&lt;/button&gt;}&lt;button direction=&quot;30&quot; enabled=&quot;true&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Назад&lt;/button&gt;" fullscreen="Inherit" headerText="&lt;Black&gt;{SelectedProduct.стрОсновное}{SelectedProduct.СН: &lt;b&gt;№(0)&lt;/b&gt;}&lt;/Black&gt;&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ДатаРозлива: Дата розлива: &lt;b color=&quot;DarkBlue&quot;&gt;(0:dd.MM.yyyy)&lt;/b&gt;}&#xD;&#xA;&lt;r size=&quot;-1&quot; color=&quot;Red&quot;&gt;{УжеСерийник != null:{УжеСерийник.АлкоСН} уже добавлен в документ!;}&#xD;&#xA;{ErrorMessage}&lt;/r&gt;" id="93af88f9-91f7-4cc1-a968-0bffd0852850" indent="0" name="Скан серийник" nextDirection="18 1" singlePage="False" transactionNotch="True"><Blocks count="1"><LabelPageBlock align="TopCenter" allBorder="0" backColor="Transparent" bottomBorder="0" foreColor="Black" leftBorder="0" rightBorder="0" text="Сканируйте &lt;b size=&quot;+1&quot; color=&quot;Red&quot;&gt;cерийник&lt;/b&gt;&#xA;&lt;img tcolor=&quot;no&quot; size=&quot;stretch&quot; maxwidth=&quot;100%&quot; align=&quot;center&quot; direction=&quot;&quot;&gt;egares.data_matrix&lt;/img&gt;" topBorder="0" /></Blocks><KeyJumps count="3"><KeyToAction action="Запись серийника в SelectedProduct" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="31" barcode="" condition="{многономеров==true &amp;&amp; сч &gt; 0}" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="30" barcode="" condition="{многономеров!=true || сч == 0}" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></FormattedPageAction><AssignAction breakPoint="False" expression="SelectedProduct.АлкоСН = ScannedBarcode" id="462c95a0-eda6-4d78-b892-8139cc0e96ce" indent="1" name="Запись серийника в SelectedProduct" nextDirection="Обработка АлкоСН" /><FieldEditAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="сканы со списком" eanAI="None" editType="DocumentColumn" fieldName="АлкоСН" fieldType="String" footerText="{SelectedProduct.ПроверкаЧМ==true || CheckMark.IsInstalled == false:;&lt;button direction=&quot;Вызов чекмарк 2&quot; width=&quot;100%&quot; height=&quot;15%&quot;&gt;Проверить в CheckMark&lt;/button&gt;}&#xD;&#xA;&lt;button direction=&quot;29&quot; width=&quot;40%&quot; height=&quot;15%&quot;&gt;Отмена&lt;/button&gt;{Buffer != null:&lt;button direction=&quot;ЗавершитьНаборАлкоСН&quot; width=&quot;60%&quot; height=&quot;15%&quot;&gt;({сч} ном.) Завершить&lt;/button&gt;;}" format="" fullscreen="True" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size=&quot;-2&quot;&gt;(esc) - прервать&lt;/r&gt;}&#xD;&#xA;&lt;Black&gt;{SelectedProduct.стрОсновное}{SelectedProduct.СН: &lt;b&gt;№(0)&lt;/b&gt;}&lt;/Black&gt;&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ДатаРозлива: Дата розлива: &lt;b color=&quot;DarkBlue&quot;&gt;(0:dd.MM.yyyy)&lt;/b&gt;}&#xD;&#xA;&lt;r size=&quot;-1&quot; color=&quot;Red&quot;&gt;{УжеСерийник != null:{УжеСерийник.АлкоСН} уже добавлен в документ!;}&#xD;&#xA;{ErrorMessage}&lt;/r&gt;" id="18e7ec52-bf5a-4d15-a2ff-9b47b885c8eb" indent="1" listCaption="&lt;b size=&quot;-1&quot;&gt;Отсканированные №:&lt;/b&gt;" listItemFormat="{&quot;&quot;}" name="АлкоСН в SelectedProduct" nextDirection="Если АлкоСН пустой" rememberPreviousValue="False" setForBuffer="False" showEditBox="True" showList="True" sizeType="Normal" transactionNotch="True" viewItems="{Buffer}" welcomeText="Сканируйте &lt;b size=&quot;+1&quot; color=&quot;Red&quot;&gt;cерийный № бутылки&lt;/b&gt;"><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="№ {Item.АлкоСН}" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><KeyJumps count="2"><KeyToAction action="29" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="ЗавершитьНаборАлкоСН" barcode="" condition="Buffer != null" foreColor="#00000000" key="Return" modifiers="None" viewType="InMenu" /></KeyJumps><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></FieldEditAction><ConditionAction breakPoint="False" expression="сч &gt; 0" id="8061ae63-92d6-4ae8-897a-e478d93b0ed0" indent="4" name="29" nextDirection="" noDirection="30" yesDirection="" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="a344730b-0b81-4219-9826-8f6309f8636d" indent="4" message="Вы уверены?" nextDirection="" noDirection="back" transactionNotch="True" yesDirection="30"><KeyJumps count="0" /></QuestionYesNoAction><OperationAction abortDirection="30" breakPoint="False" id="f4c5205a-ad29-4eba-8437-f7af710b4f81" indent="2" name="Вызов чекмарк 2" nextDirection="Выбор строки с тем же АлкоСН" operationName="ЕГАИС3 ВызовЧекМарк" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоСН == &quot;&quot;" id="829e3316-9379-4be0-b01c-120bd0f36144" indent="1" name="Если АлкоСН пустой" nextDirection="" noDirection="" yesDirection="back" /><OperationAction abortDirection="Ошибка серийника" breakPoint="False" id="f592e189-3b81-4b93-97d5-0a902f0b4626" indent="2" name="Обработка АлкоСН" nextDirection="Выбор строки с тем же АлкоСН" operationName="ЕГАИС3 ОбработкаАлкоСН" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><BaloonAction breakPoint="False" id="ceaed4c2-1db1-47d2-bba2-33d5f1ae6edd" indent="3" isError="True" name="Ошибка серийника" nextDirection="back" seconds="3" text="неверный серийный номер марки" /><AssignAction breakPoint="False" expression="УжеСерийник = Document.CurrentItems.FindFirstByField(&quot;АлкоСН&quot;, SelectedProduct.АлкоСН)" id="40f4681b-4b32-4d99-a138-b50060527745" indent="1" name="Выбор строки с тем же АлкоСН" nextDirection="" /><ConditionAction breakPoint="False" expression="Document.АлкоМногоДМ == true" id="e847a617-c999-496d-8be0-d23ca965099b" indent="1" nextDirection="" noDirection="37" yesDirection="" /><AssignAction breakPoint="False" expression="УжеСерийник = Buffer.FindFirstByField(&quot;АлкоСН&quot;, SelectedProduct.АлкоСН)" id="53407017-a081-4923-a188-e1c889b59847" indent="2" name="36" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="6ebb32ab-547d-4d12-af83-8278e8ee6ce3" indent="1" name="37" nextDirection=""><KeyNames count="1"><String>ErrorMessage</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="УжеСерийник != null" id="dbed6de4-b2f2-4c2f-a711-6f2e48f44891" indent="1" name="Если строка с серийником уже есть" nextDirection="" noDirection="" yesDirection="back" /><ConditionAction breakPoint="False" expression="GlobalVars.РежимПроверкиПоДиапазонам[Document.DocumentType.Name] == true" id="4399ed60-bf7e-4dec-bd59-c33f9de5d3f7" indent="1" name="24" nextDirection="" noDirection="Если сбор много номеров 3" yesDirection="" /><OperationAction abortDirection="back" breakPoint="False" id="1eea6ef1-ac2c-4e6d-8652-73e06b9ceb85" indent="1" name="Проверка по диапазонам" nextDirection="" operationName="ЕГАИС3 ПроверкаПоДиапазонамФормыА" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="(SelectedProduct.АлкоМарк == false &amp;&amp; SelectedProduct.Маркировка != &quot;Алкоголь&quot;) || (Document.докАлкоВводКолва == true &amp;&amp; Document.АлкоДМ == false)" id="dd1c95ed-c09b-48f4-aa3f-ae172861a59f" indent="1" name="Если сбор много номеров 3" nextDirection="" noDirection="Запомнить АлкоСН" yesDirection="" /><ClearSessionAction all="False" breakPoint="False" id="40d072c1-6472-46b1-beba-35685a9f5952" indent="1" name="23" nextDirection=""><KeyNames count="1"><String>SelectedProduct.АлкоСН</String></KeyNames></ClearSessionAction><SimpleQuantityAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" footerText="{SelectedProduct.ВводитьДопПоля==false &amp;&amp; CurrentAction.ValueChanged==false:&lt;b size=&quot;+1&quot; color=&quot;SteelBlue&quot; align=&quot;center&quot;&gt;ДЛЯ ВВОДА {SelectedProduct.Product.Весовой:СЛЕД. ЕД.;ПОШТУЧНО} &#xD;&#xA;МОЖНО СКАНИРОВАТЬ ДАЛЬШЕ&lt;/b&gt;;&lt;b size=&quot;+1&quot; color=&quot;Red&quot; align=&quot;center&quot;&gt;Нажмите ENTER для подтверждения&lt;/b&gt;}" fullscreen="True" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size=&quot;-2&quot;&gt;(esc) - отмена&lt;/r&gt;}&#xD;&#xA;{SelectedProduct.стрВШапкахОкон}&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ЦенаСкладВводКолва}&#xD;&#xA;&lt;b size=&quot;+2&quot; align=&quot;left&quot; color=&quot;DarkGray&quot;&gt;Было: {SelectedProduct.КолвоВДокументе:0.####} {SelectedProduct.Packing.Name}&lt;/b&gt;&#xD;&#xA;&lt;b size=&quot;+4&quot; align=&quot;left&quot; color=&quot;Black&quot;&gt;Будет: {SelectedProduct.КолвоВДокументе + CurrentAction.Value:0.####} {SelectedProduct.Packing.Name}&lt;/b&gt;" id="2625cda0-ac3d-43c4-a29f-368a2eacd90b" indent="1" name="Ввод количества" nextDirection="ПризнакСкана0" transactionNotch="False" welcomeText=""><KeyJumps count="2"><KeyToAction action="30" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="ПризнакСкана1" barcode="{any}" condition="{SelectedProduct.ВводитьДопПоля == false &amp;&amp; CurrentAction.ValueChanged==false}" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /></KeyJumps></SimpleQuantityAction><AssignAction breakPoint="False" expression="ОтсканированШК =false" id="34bcf387-05a4-41d9-ae42-7c0bfa66c9d6" indent="1" name="ПризнакСкана0" nextDirection="Запомнить АлкоСН" /><AssignAction breakPoint="False" expression="ОтсканированШК =true" id="3aba0a5e-1fd5-4a8e-94dc-1a036fc3bdff" indent="1" name="ПризнакСкана1" nextDirection="Запись данных в док" /><ScanAction autoCloseTime="0" autoSelectSingleProduct="True" autoShowSelectionList="False" backgroundImage="" barcodeConvertion="None" barcodeSessionVariable="ScannedBarcode" breakPoint="False" cancelType="None" canManualShowProductList="True" canSelectCell="False" canSelectPallet="False" cellDirection="" errorSelectDirection="Ввод количества" fullscreen="Inherit" id="d0e1917b-75e7-42bb-90d7-6b71729919bd" ignoreBaseBarcodes="False" ignoreQuantityPolicy="False" indent="1" name="Выбор товара по ШК" nextDirection="" notFoundErrorText="" palletDirection="" playAudioOnError="False" processSessionBarcode="True" productsListHeaderText="" quickSelectProduct="False" searchingProducts="" searchPreviousSelected="False" selectionCellNum="0" selectionCellText="" selectionFirstCellText="" selectionListFormat="{Item.товВСпискеВыбора}" selectionPalletText="" selectionSecondCellText="" selectionStorageVariable="" sucsessSelectDirection="ЗаполнимПоля" transactionNotch="False" useOnlyDocumentProducts="False" waitImage="" welcomeText="" withoutControls="False"><ExcludeClassificators count="0" /><IncludeClassificators count="0" /><KeyJumps count="1"><KeyToAction action="21" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><TreeTypeIds count="0" /></ScanAction><OperationAction abortDirection="" breakPoint="False" id="b6d5dc2a-3568-4018-980b-86aeeedaa61d" indent="0" name="ЗаполнимПоля" nextDirection="19 1" operationName="ЕГАИС3 ЗаполнениеДопПолейВыбранногоТовара" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" expression="ПрошлыйСН = SelectedProduct.АлкоСН" id="13771e7b-97d0-4743-86d1-8a0894ab3442" indent="1" name="Запомнить АлкоСН" nextDirection="" /><ConditionAction breakPoint="False" expression="SelectedProduct.ВводитьЦену == true" id="9efe48c9-1b73-4480-a9a8-f330527fb761" indent="1" name="8" nextDirection="" noDirection="5" yesDirection="" /><OperationAction abortDirection="undo" breakPoint="False" id="632a66a7-e6d5-4bcd-961e-c8ed99bcfe3c" indent="2" name="ВводЦены" nextDirection="" operationName="ЕГАИС3 ВводЦены" transactionNotch="False"><InKeys count="1"><String>SelectedProduct</String></InKeys><InValues count="1"><String>{SelectedProduct}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct.ВводитьНомерСтроки == true" id="7cb041da-a9c8-49c3-a019-6011775d8bc6" indent="1" name="5" nextDirection="" noDirection="Запись данных в док" yesDirection="" /><OperationAction abortDirection="undo" breakPoint="False" id="f07cf8ee-1415-4a1d-9ab4-149d38bbdf57" indent="2" name="ВводНомераСтроки" nextDirection="Запись данных в док" operationName="ЕГАИС3 ВводНомераСтрокиДокумента" transactionNotch="False"><InKeys count="1"><String>SelectedProduct</String></InKeys><InValues count="1"><String>{SelectedProduct}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><OperationAction abortDirection="30" breakPoint="False" id="c48de85b-46d2-4419-aa4b-53ea4f7f06c2" indent="0" name="Запись данных в док" nextDirection="33" operationName="ЕГАИС3 Занесение в документ" transactionNotch="False"><InKeys capacity="8" count="5"><String>СтрокиДляСпускаВниз</String><String>УдалятьСходящиеся</String><String>ПоДатеРозлива</String><String>НаборАлкоСерийныхНомеровЗавершен</String><String>Buffer</String></InKeys><InValues capacity="8" count="5"><String>{СтрокиТекущегоТовара}</String><String>{ПоказРасхожденийВСписке}</String><String>{Document.АлкоВводДатыРозлива}</String><String>{НаборАлкоСерийныхНомеровЗавершен}</String><String>{Buffer}</String></InValues><OutKeys count="3"><String>Buffer</String><String>TempSP</String><String>СтрокиПоказа</String></OutKeys><OutValues count="3"><String>{Buffer}</String><String>{TempSP}</String><String>{СтрокиПоказа}</String></OutValues></OperationAction><ConditionAction breakPoint="False" expression="МаркаНовогоТипа == true" id="63de88c6-3a5d-48ba-9a4c-b05b4450451a" indent="0" nextDirection="" noDirection="33" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоСН = &quot;&quot;;&#xD;&#xA;SelectedProduct.АлкоСерия = &quot;&quot;;" id="a34c0386-db2b-4ec8-bfb5-bbf21691c6b6" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоМарк == false &amp;&amp; SelectedProduct.Маркировка != &quot;Алкоголь&quot; &amp;&amp; ОтсканированШК==true" id="1f2ada89-9b73-4b7e-b44f-634dde0d8db2" indent="0" name="33" nextDirection="" noDirection="32" yesDirection="Выбор товара по ШК" /><ConditionAction breakPoint="False" expression="Document.DocumentType.Name == &quot;ПодборЗаказа&quot;" id="e4e2210e-8ff8-487e-bacf-909be53d8c76" indent="1" name="32" nextDirection="" noDirection="" yesDirection="31" /><AssignAction breakPoint="False" expression="сч = сч+SelectedProduct.Quantity" id="af0b554f-8b8d-41a7-85f4-2ef12e13b121" indent="1" name="Счётчик +1" nextDirection="" /><AssignAction breakPoint="False" expression="ПрошлыйАлкокод = SelectedProduct.АлкоКод" id="13ac6e8f-82a3-4d0d-b036-6d03592551f9" indent="1" name="Запомнить АлкоКод" nextDirection="" /><AssignAction breakPoint="False" expression="ПрошлыйЕАН = SelectedProduct.ШК" id="6891d039-a1b9-4fa8-8515-a1755668ad2e" indent="1" name="Запомнить ЕАН" nextDirection="" /><ConditionAction breakPoint="False" comment="если не завершен список ДМ" expression="Buffer.Count &gt; 0" id="5c53ac3c-c075-4fb5-ab41-b868ce5521c0" indent="0" nextDirection="" noDirection="" yesDirection="18 1" /><ConditionAction breakPoint="False" expression="GlobalVars.РежимСканироватьEAN13[Document.DocumentType.Name] == &quot;Новый АлкоКод&quot; &amp;&amp; (SelectedProduct.АлкоМарк == 1 || SelectedProduct.Маркировка == &quot;Алкоголь&quot;)" id="c3f10b32-85f1-4935-ad08-ed3807205e09" indent="0" name="" nextDirection="" noDirection="31" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = &quot;&quot;" id="83b47cf0-c53a-4490-bfff-eeb8e39ff9ef" indent="0" name="" nextDirection="Нужна ли проверка чекмарком" /><ConditionAction breakPoint="False" expression="GlobalVars.РежимСканироватьEAN13[Document.DocumentType.Name] == &quot;Не использовать&quot;" id="0994b3fc-9c1c-4ba0-878e-2fcac9dad408" indent="0" name="30" nextDirection="" noDirection="" yesDirection="abort" /><AssignAction breakPoint="False" expression="Scanner.EnableDefaultBarcodeTypes();&#xD;&#xA;Scanner.EnableBarcodeType(&quot;PDF417&quot;, false);" id="81923b14-4118-4915-b288-85771384ae7d" indent="0" name="Прервать" nextDirection="abort" /><ConditionAction breakPoint="False" expression="GlobalVars.РежимСканироватьEAN13[Document.DocumentType.Name] == &quot;Не использовать&quot;" id="14426c2b-ade8-471b-b230-e60dce6ee761" indent="0" name="31" nextDirection="" noDirection="" yesDirection="return" /><AssignAction breakPoint="False" expression="Scanner.EnableDefaultBarcodeTypes();&#xD;&#xA;Scanner.EnableBarcodeType(&quot;PDF417&quot;, false);" id="4135d355-6e58-4eb8-8513-745a53f137cd" indent="0" name="Завершить" nextDirection="return" /><AssignAction breakPoint="False" expression="НаборАлкоСерийныхНомеровЗавершен = true" id="33d6d82d-177f-479f-9f26-405222305d03" indent="0" name="ЗавершитьНаборАлкоСН" nextDirection="Запись данных в док 1" /><OperationAction abortDirection="30" breakPoint="False" id="d6423ff6-c22f-4008-a306-8a8b64adcff8" indent="0" name="Запись данных в док 1" nextDirection="" operationName="ЕГАИС3 Занесение в документ" transactionNotch="False"><InKeys capacity="8" count="5"><String>СтрокиДляСпускаВниз</String><String>УдалятьСходящиеся</String><String>ПоДатеРозлива</String><String>НаборАлкоСерийныхНомеровЗавершен</String><String>Buffer</String></InKeys><InValues capacity="8" count="5"><String>{СтрокиТекущегоТовара}</String><String>{ПоказРасхожденийВСписке}</String><String>{Document.АлкоВводДатыРозлива}</String><String>{НаборАлкоСерийныхНомеровЗавершен}</String><String>{Buffer}</String></InValues><OutKeys count="2"><String>Buffer</String><String>TempSP</String></OutKeys><OutValues count="2"><String>{Buffer}</String><String>{TempSP}</String></OutValues></OperationAction><ConditionAction breakPoint="False" expression="Document.DocumentType.Name == &quot;ПодборЗаказа&quot;" id="5c3c8181-640f-4510-9388-5edacf26fa62" indent="1" nextDirection="" noDirection="Запомнить АлкоКод" yesDirection="31" /></Actions><Parameters capacity="16" count="13"><FieldInfo alias="" eanAI="None" fieldName="SelectedProduct" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SelectedProduct" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПланИФакт" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="PlanIFakt" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПрошлыйЕАН" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ProshlyjEAN" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="сч" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="sch" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ЕстьФормыА" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="EstFormyA" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ВводЦены" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="VvodCeny" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ВводНомераСтроки" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="VvodNomeraStroki" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="КонтрольТовараБезКолич" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="KontrolTovaraBezKolich" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СтрокиПоказа" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="StrokiPokaza" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="НеСканироватьPDF" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="NeSkanirovatPDF" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СтрокаСАлкоголем" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="StrokaSAlkogolem" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ВводКолва" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="VvodKolva" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="МаркаНовогоТипа" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="MarkaNovogoTipa" valueTemplate="" /></Parameters><Returns capacity="8" count="5"><ReturnFieldInfo alias="" eanAI="None" fieldName="ИзмененныеСтрокиТовара" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="IzmenennyeStrokiTovara" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ПрошлыйЕАН" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="ProshlyjEAN" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="сч" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="sch" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ВШапку" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="VShapku" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокиПоказа" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="StrokiPokaza" valueTemplate="" /></Returns></Operation>