<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" fullscreen="Inherit" lock="No" name="Обработка неизвестного штрихкода" serverHosted="False"><Actions capacity="32" count="22"><ConditionAction breakPoint="False" expression="ПриниматьНеизвШК == false" id="838e64d2-3442-4f62-a17e-5f03fe4d3365" indent="0" nextDirection="" noDirection="Поиск штрихкода среди неизвестных товаров" yesDirection="Меню отмены для неизв. ШК" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;b color=&quot;Red&quot;&gt;ОШИБКА: {ScannedBarcode} - неизвестный ШК&lt;/b&gt;" id="76eb6a18-89a6-4171-8230-5027227f7218" indent="1" name="Меню отмены для неизв. ШК" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="1"><String>abort</String></ButtonDirections><ButtonTexts count="1"><String>&lt;b&gt;Отмена&lt;/b&gt;</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><SelectDocumentLineAction breakPoint="False" id="fa2d8228-7666-4708-a279-fe09e99afcc8" indent="0" name="Поиск штрихкода среди неизвестных товаров" nextDirection="" sessionVariable="СтрокаСНеизвестнымШК"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ШК==ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="СтрокаСНеизвестнымШК != null" id="b06739ac-bee8-42a1-9d80-e93f7cb3fb1c" indent="0" name="" nextDirection="" noDirection="14" yesDirection="" /><AssignAction breakPoint="False" expression="ИмяНеизвестного = СтрокаСНеизвестнымШК.ИмяНеизвестного" id="707f1e36-1eb8-44ee-bf42-60438649e997" indent="2" nextDirection="" /><AssignAction breakPoint="False" expression="if(АлкоРежим == true)&#xD;&#xA;АлкоМарк = СтрокаСНеизвестнымШК.АлкоМарк;&#xD;&#xA;if (СтрокаСНеизвестнымШК.Маркировка == &quot;Алкоголь&quot;)&#xD;&#xA;АлкоМарк = true;" id="39458e42-9e84-4d32-ab54-24eed23a79a7" indent="2" name="9 1" nextDirection="3" /><ConditionAction breakPoint="False" expression="ПриниматьНеизвАлкокодКакНеизвТовар == true" id="a0e15aab-0b06-4217-99b5-3b3983630fcf" indent="0" name="14" nextDirection="" noDirection="" yesDirection="13" /><BaloonAction breakPoint="False" id="b19a1c80-32af-4253-8e78-aebe3cdfa4db" indent="1" isError="True" name="4" nextDirection="" seconds="3" text="Неизвестный ШК" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" defaultButtonHeight="15%" fullscreen="Inherit" headerText="&lt;b color=&quot;Red&quot;&gt;По штрихкоду '{ScannedBarcode}' не найден товар&lt;/b&gt;" id="65ee5d02-54fa-4d20-a0f1-61f4a738e1c3" indent="0" name="Меню неизвестного ШК" nextDirection="" showAsMsgBox="False" transactionNotch="False" welcomeText=""><ButtonDirections capacity="8" count="5"><String>abort</String><String>8</String><String></String><String>11</String><String>5</String></ButtonDirections><ButtonTexts capacity="8" count="5"><String>&lt;b&gt;Отмена&lt;/b&gt;</String><String>{Document.ServerHosted != true:Привязать ШК к товару;{null}}</String><String>{АлкоРежим == true:&lt;MediumVioletRed&gt;Неизвестный алкоголь с акцизной маркой&lt;/MediumVioletRed&gt;;}</String><String>{АлкоРежим == true:&lt;DarkGoldenRod&gt;Неизвестный алкоголь без акцизной марки&lt;/DarkGoldenRod &gt;;}</String><String>{АлкоРежим == false &amp;&amp; ВыборТолкоИзТоваровДокумента == false&amp;&amp;Document.DocumentTypeName!="Переоценка":Принять неизвестный товар;}</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><AssignAction breakPoint="False" expression="АлкоМарк = true" id="82ce1469-cd3c-4dcb-8e91-bbabbb323fda" indent="1" name="13" nextDirection="15" /><AssignAction breakPoint="False" expression="АлкоМарк = false" id="87f1d62c-8f72-4d6e-a96e-8b9e15e56d8c" indent="1" name="11" nextDirection="" /><ConditionAction breakPoint="False" expression="НеВводитьОписаниеНеизвТовара == true || Document.КонтрольКолва == 1" id="b361d95c-afad-4dbd-916a-63be7a0faa91" indent="1" name="15" nextDirection="" noDirection="" yesDirection="3" /><MultilineFieldEditAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" headerText="&lt;b color=&quot;Red&quot;&gt;{ScannedBarcode}&lt;/b&gt;" id="17780bc5-9c66-4cbd-9224-0e00ce7ab4a6" indent="1" name="5" nextDirection="" processImmediately="False" transactionNotch="True"><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Lines count="1"><FieldEditLine allowEmpty="True" condition="" dataSource="" fieldType="String" fontSize="23" format="" password="False" path="{ИмяНеизвестного}" selectedItem="" sizeType="Normal" welcomeText="&lt;br/&gt;&#xA;&lt;b&gt;Описание товара:&lt;/b&gt;&#xA;&lt;r size=&quot;-2&quot; color=&quot;DimGray&quot;&gt;Это описание должно помочь оператору правильно завести товар в учетную систему&#xA;*заполнять необязательно&lt;/r&gt;" /></Lines></MultilineFieldEditAction><OperationAction abortDirection="abort" breakPoint="False" id="6cb70f4b-b000-4da5-8923-857fc064a1c2" indent="1" name="3" nextDirection="12" operationName="Выбор неизвестного товара" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><OperationAction abortDirection="abort" breakPoint="False" id="fcb7595d-beed-45e3-9f47-ebaf8afe2404" indent="0" name="8" nextDirection="10" operationName="Привязка ШК" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="АлкоРежим == true" id="8da742be-9a63-4f89-af66-13d101ac35f2" indent="0" name="12" nextDirection="" noDirection="9" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.Алко = true" id="218af9fe-8959-4f2b-ac19-56a4f5817f40" indent="1" nextDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоМарк = АлкоМарк;&#xD;&#xA;if (АлкоМарк == true)&#xD;&#xA;SelectedProduct.Маркировка = &quot;Алкоголь&quot;;" id="a6737053-ba48-4fdf-87ed-eb5982dcc48b" indent="1" nextDirection="10" /><ConditionAction breakPoint="False" expression="СессияРежимСканироватьEAN13 == &quot;Не использовать&quot;" id="65af1d75-79cb-4aa0-8514-a3f1a4982572" indent="1" nextDirection="" noDirection="9" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = ScannedBarcode" id="500444a6-12eb-4c26-8af4-e9ef68bc9460" indent="1" nextDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.Алко = false" id="4b0983bf-1d05-4781-8230-0e2f75ba591e" indent="0" name="9" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="35ee23c8-a0b8-4e2a-8862-78a4ef3392cb" indent="0" name="10" nextDirection="return"><KeyNames count="1"><String>ErrorMessage</String></KeyNames></ClearSessionAction></Actions><Parameters capacity="8" count="7"><FieldInfo alias="" eanAI="None" fieldName="ScannedBarcode" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ScannedBarcode" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПриниматьНеизвШК" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="PrinimatNeizvShK" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ТолькоТоварыДокумента" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="TolkoTovaryDokumenta" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="АлкоРежим" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="AlkoRezhim" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПриниматьНеизвАлкокодКакНеизвТовар" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="PrinimatNeizvAlkokodKakNeizvTovar" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="НеВводитьОписаниеНеизвТовара" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="NeVvoditOpisanieNeizvTovara" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СессияРежимСканироватьEAN13" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SessiyaRezhimSkanirovatEAN13" valueTemplate="" /></Parameters><Returns count="4"><ReturnFieldInfo alias="" eanAI="None" fieldName="SelectedProduct" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SelectedProduct" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ErrorMessage" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="ErrorMessage" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокаСНеизвестнымШК" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="StrokaSNeizvestnymShK" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ЭтоНовыйТовар" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="EtoNovyjTovar" valueTemplate="" /></Returns></Operation>