<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3" fullscreen="Inherit" lock="No" name="ЕГАИС3 ПакуемВсеНезапакованное" serverHosted="False"><Actions capacity="16" count="14"><ClearSessionAction all="False" breakPoint="False" id="d459f7dd-43ad-40dc-a9c7-5ff31b909902" indent="0" name="103" nextDirection=""><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><FieldEditAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" eanAI="None" editType="Session" fieldName="ScannedBarcode" fieldType="String" footerText="{GlobalVars.ШККоробок[&quot;АгрегацияЕГАИС3&quot;] == true:&lt;button direction=&quot;Ген1&quot; width=&quot;100%&quot; height=&quot;15%&quot;&gt;Распечатать ШК палеты&lt;/button&gt;;}" format="" fullscreen="Inherit" headerText="{MSG==&quot;Отсканирована коробка!&quot;:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;&lt;r color=&quot;Black&quot; size=&quot;-1&quot;&gt;'{ErrBarcode}'&lt;/r&gt;;}{MSG==&quot;Отсканирована марка!&quot;:&lt;r color=&quot;Black&quot; size=&quot;-1&quot;&gt;{НаименованиеОшибка}&lt;/r&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;&lt;r color=&quot;Black&quot; size=&quot;-1&quot;&gt;{ErrBarcode}&lt;/r&gt;&#xD;&#xA;;}{MSG==&quot;Отсканирован EAN-13!&quot;:&lt;r color=&quot;Black&quot; size=&quot;-1&quot;&gt;'{ErrBarcode}'&lt;/r&gt;;}{MSG==&quot;Не тот Штрихкод!&quot;:'{ErrBarcode}';}&#xD;&#xA;&lt;b size=&quot;+2&quot; align=&quot;center&quot; color=&quot;Red&quot;&gt;{MSG}&lt;/b&gt;" id="f7a2c98c-9482-41ff-99fd-3ea2a6e3120f" indent="0" listItemFormat="" name="49" nextDirection="102" rememberPreviousValue="False" setForBuffer="False" showEditBox="True" showList="False" sizeType="Normal" title="Сканирование палеты" transactionNotch="True" viewItems="" welcomeText="&lt;b size=&quot;+2&quot;&gt;Отсканируйте или введите палету&lt;/b&gt;"><Columns count="0" /><KeyJumps count="2"><KeyToAction action="102" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="return" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></FieldEditAction><OperationAction abortDirection="" breakPoint="False" id="1b31a83b-68a9-42cc-83f1-31aa5376eb61" indent="1" name="Ген1" nextDirection="" operationName="ЕГАИС3 ВременннаяКоробка" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="1"><String>ScannedBarcode</String></OutKeys><OutValues count="1"><String>ScannedBarcode</String></OutValues></OperationAction><OperationAction abortDirection="" breakPoint="False" id="78be5375-0733-418d-bd3c-fe662a29168f" indent="1" nextDirection="1" operationName="ЕГАИС3 Печать 3" transactionNotch="False"><InKeys count="2"><String>ШКПередан</String><String>PrintTemp</String></InKeys><InValues count="2"><String>{ScannedBarcode}</String><String>Pallet</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ClearSessionAction all="False" breakPoint="False" id="4cfa5253-2993-4390-91cc-cebec0667eba" indent="0" name="102" nextDirection=""><KeyNames count="4"><String>ErrBarcode</String><String>MSG</String><String>НаименованиеОшибка</String><String>Error</String></KeyNames></ClearSessionAction><OperationAction abortDirection="" breakPoint="False" id="ba923ee1-7d71-449d-ae4e-33eb55312e93" indent="0" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys count="1"><String>Pallet</String></InKeys><InValues count="1"><String>true</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error==True" id="deaf64fe-d055-452e-b237-010fd0dbdc66" indent="0" nextDirection="" noDirection="" yesDirection="103" /><AssignAction breakPoint="False" expression="КудаПакуем = ScannedBarcode" id="8f494f8d-0787-4fff-bf6f-0d84dc6275c9" indent="0" name="1" nextDirection="" /><SelectDocumentLinesAction breakPoint="False" id="6902b3cb-57f3-4ca6-9d66-50925a2b8a10" indent="0" nextDirection="" sessionVariable="ЧтоПакуем"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Родитель == &quot;&quot; &amp;&amp; Item.ЭтоРодитель == false"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="i = 0;&#xD;&#xA;cnt = ЧтоПакуем.Count;&#xD;&#xA;while (i &lt; cnt)&#xD;&#xA;{&#xD;&#xA;ЧтоПакуем[i].Родитель = КудаПакуем;&#xD;&#xA;i = i + 1;&#xD;&#xA;}" id="f2ca06cc-0d3c-497e-8176-2b012fa2e0c3" indent="0" nextDirection="" /><SelectDocumentLineAction breakPoint="False" id="4c920b76-aabc-4072-8b89-08478c763a67" indent="0" nextDirection="" sessionVariable="Проверка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="Проверка != null" id="9db377bc-597d-4358-b8e8-58b4356c0b5c" indent="0" nextDirection="" noDirection="34" yesDirection="" /><AssignAction breakPoint="False" expression="Проверка.Содержит = Проверка.Содержит + ЧтоПакуем.Count" id="368e354b-29c3-4428-9780-49091fd82229" indent="1" nextDirection="return" /><AssignAction breakPoint="False" comment="Создание палеты" expression="НовСтрока = new Cleverence.Warehouse.Row();&#xD;&#xA;НовСтрока.Ид = ScannedBarcode;&#xD;&#xA;НовСтрока.ЭтоРодитель = true;&#xD;&#xA;НовСтрока.Содержит = ЧтоПакуем.Count;&#xD;&#xA;НовСтрока.СерийныйНомерКоробки = Коды.Отображение;&#xD;&#xA;Document.КоробкиПалеты.Rows.Add(НовСтрока);" id="7ebd6e6c-c280-46f0-b93d-3ee47d80cd2a" indent="0" name="34" nextDirection="return" /></Actions><Parameters count="0" /><Returns count="0" /></Operation>