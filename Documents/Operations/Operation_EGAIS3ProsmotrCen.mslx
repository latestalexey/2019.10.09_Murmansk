<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" fullscreen="Inherit" lock="No" name="ЕГАИС3 ПросмотрЦен" serverHosted="False"><Actions capacity="16" count="12"><ConditionAction breakPoint="False" comment="Если выбрана характеристика" expression="Поз.ИмяХарактеристики != null &amp;&amp; Поз.ИмяХарактеристики != &quot;&quot;" id="a25ac9d6-7ef1-4c62-98c1-cfaf59536d07" indent="0" nextDirection="" noDirection="1" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Если выбрана характеристика" id="35d96db2-f757-44df-98bc-1fb0afb548e7" indent="1" name="15" nextDirection="" sessionVariable="ЦеныХарактеристики"><Query copySelection="False" documentLines="Declared" from="{Цены}" sourceWhereExpression="" tableAlias="{Цены}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдНоменклатуры == Поз.Product.Id &amp;&amp; Item.Характеристика == Поз.ИмяХарактеристики"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ItemsViewAction id="fa8f2e6d-1b9d-4f87-845f-0e790945af5b" indent="1" name="16" nextDirection="" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;&lt;r color=&quot;Black&quot;&gt;{Поз.Product.Name} - &lt;/r&gt;&lt;r size=&quot;+2&quot; color=&quot;SteelBlue&quot;&gt;&lt;b&gt;{Поз.ИмяХарактеристики}&lt;/b&gt;&lt;/r&gt;&#xD;&#xA;" footerText="&lt;button width=&quot;100%&quot; direction=&quot;1&quot;&gt;Все цены товара&lt;/button&gt;" title="&lt;b size=&quot;+1&quot; color=&quot;SteelBlue&quot;&gt;Цены&lt;/b&gt;" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{ЦеныХарактеристики}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.ВидЦены}" leftBorder="0" rightBorder="0" topBorder="0" width="70%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Цена} {Item.Валюта}" leftBorder="0" rightBorder="0" topBorder="0" width="30%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><AssignAction breakPoint="False" expression="=&quot;&quot;" id="bad584b8-5e6b-491d-ad3c-ee2e0c64fce4" indent="1" nextDirection="16" /><SelectDocumentLinesAction breakPoint="False" id="687ce6b4-d7f0-4e0e-95cb-9e356e7836a8" indent="0" name="1" nextDirection="" sessionVariable="ЦеныНоменклатуры"><Query copySelection="False" documentLines="Declared" from="{Цены}" sourceWhereExpression="" tableAlias="{Цены}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдНоменклатуры == Поз.Product.Id"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="1"><String>Характеристика</String></SortBy><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="i = 0;&#xD;&#xA;cnt = ЦеныНоменклатуры.Count;&#xD;&#xA;res = new Cleverence.Warehouse.RowCollection();&#xD;&#xA;while(i &lt; cnt)&#xD;&#xA;{&#xD;&#xA;  if(i == 0 || ЦеныНоменклатуры[i].Характеристика != ЦеныНоменклатуры[i-1].Характеристика)&#xD;&#xA;  {&#xD;&#xA;   temp = res.AddNew();&#xD;&#xA;   temp.Заголовок = ЦеныНоменклатуры[i].Характеристика;&#xD;&#xA;  }&#xD;&#xA;res.Add(ЦеныНоменклатуры[i]);&#xD;&#xA;i = i + 1;&#xD;&#xA;}&#xD;&#xA;ЦеныНоменклатуры = res;" id="98399695-6a3d-42f6-b094-08c36ca0cf41" indent="0" nextDirection="17" /><SelectDocumentLinesAction breakPoint="False" id="64628205-d278-4dda-bc4e-6948f191eda3" indent="0" name="18" nextDirection="" sessionVariable="ЦеныНоменклатурыПоХарактеристикам"><Query copySelection="False" documentLines="Declared" from="{ЦеныНоменклатуры}" sourceWhereExpression="" tableAlias="{ЦеныНоменклатуры}" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="1"><String>Характеристика</String></GroupBy><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="СтрокиДляПоказа = new Cleverence.Warehouse.RowCollection()" id="5982d12e-81ca-4954-8d94-b2aac0d44c48" indent="0" nextDirection="" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="42591cff-ccfd-430b-b86f-8d065382a99f" indent="0" items="{ЦеныНоменклатурыПоХарактеристикам}" nextDirection="" transactionNotch="False"><Actions capacity="8" count="6"><SelectDocumentLinesAction breakPoint="False" id="860b2b66-389e-4b5c-8c65-3fc7a995e179" indent="0" nextDirection="" sessionVariable="ПоХарактеристике"><Query copySelection="False" documentLines="Declared" from="{ЦеныНоменклатуры}" sourceWhereExpression="" tableAlias="{ЦеныНоменклатуры}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Характеристика == SelectedLine.Характеристика"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" expression="ПоХарактеристике.Count&gt;1" id="4e400d78-d670-4f88-8ccc-5ec17ae986d3" indent="0" nextDirection="" noDirection="1" yesDirection="" /><AssignAction breakPoint="False" expression="копия = new Cleverence.Warehouse.Row();&#xD;&#xA;копия.Группа = 1;&#xD;&#xA;копия.Характеристика = SelectedLine.Характеристика;" id="17f23f8b-f7eb-4ead-a874-020539fe38c5" indent="1" nextDirection="2" /><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(копия)" id="4f8b2a54-5237-49b2-bc7b-7c78d1a3e33c" indent="1" name="2" nextDirection="" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="adb1e185-28e8-4548-b495-df6461fad794" indent="1" items="{ПоХарактеристике}" nextDirection="continue" transactionNotch="False"><Actions count="2"><AssignAction breakPoint="False" expression="SelectedLine.ВГруппе = 1" id="7bf1bb39-c7ba-4496-9f34-c9eaa8b5ab8b" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(SelectedLine)" id="3ff7a333-5108-4d49-ad1d-7dd3f5fe23b2" indent="0" name="1 1" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(ПоХарактеристике[0])" id="74674eb6-ea9d-4fe0-bba5-7fa46e097048" indent="0" name="1" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><ItemsViewAction id="4d990fc4-6384-46f4-bb69-815dd6a657c1" name="17" nextDirection="" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;&lt;r color=&quot;Black&quot;&gt;{Поз.Product.Name}&lt;/r&gt;" footerText="{Поз.ИмяХарактеристики != null &amp;&amp; Поз.ИмяХарактеристики != &quot;&quot;:&lt;button width=&quot;100%&quot; direction=&quot;5&quot;&gt;Цены по характеристике&lt;/button&gt;;}" title="&lt;b size=&quot;+1&quot; color=&quot;SteelBlue&quot;&gt;Цены&lt;/b&gt;" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{ЦеныНоменклатуры}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="&lt;b align=&quot;right&quot;&gt;{Item.Заголовок}&lt;/b&gt;{Item.ВидЦены}&#xD;&#xA;" leftBorder="0" rightBorder="0" topBorder="0" width="70%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Цена} {Item.Валюта}" leftBorder="0" rightBorder="0" topBorder="0" width="30%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><AssignAction breakPoint="False" expression="=&quot;&quot;" id="29db4d04-1548-4cb7-9de0-1ea1ad78cc91" indent="0" nextDirection="17" /><ClearSessionAction all="False" breakPoint="False" id="fc81a00a-88c3-4243-a718-40d9704d662b" indent="0" name="5" nextDirection="15"><KeyNames capacity="8" count="5"><String>СтрокиДляПоказа</String><String>ЦеныНоменклатуры</String><String>ЦеныНоменклатурыПоХарактеристикам</String><String>ЦеныХарактеристики</String><String>копия</String></KeyNames></ClearSessionAction></Actions><Parameters count="1"><FieldInfo alias="" eanAI="None" fieldName="Поз" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="Poz" valueTemplate="" /></Parameters><Returns count="0" /></Operation>