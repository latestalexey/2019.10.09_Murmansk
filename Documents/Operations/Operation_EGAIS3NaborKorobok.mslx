<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3 | Бутылки в коробки" fullscreen="Inherit" lock="No" name="ЕГАИС3 НаборКоробок" serverHosted="False"><Actions capacity="128" count="85"><SelectDocumentLineAction breakPoint="False" comment="Проверка, закрыты ли все коробки" id="f3d0501d-cb41-4163-9528-a0f50f94ce39" indent="0" nextDirection="" sessionVariable="ПроверкаКоробок"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Статус == &quot;Набирается&quot; &amp;&amp; Item.ЭтоРодитель == false"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="Проверка, закрыты ли все коробки" expression="ПроверкаКоробок == null" id="ec477d6d-246e-495c-a562-b2ea8667b971" indent="1" nextDirection="" noDirection="" yesDirection="ОчисткаСтартовая" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Есть незакрытая коробка" defaultButtonHeight="15%" fullscreen="Inherit" headerText="&lt;h2&gt;Есть незакрытая коробка!&lt;/h2&gt;&#xD;&#xA;&#xD;&#xA;{ПроверкаКоробок.Ид}&#xD;&#xA;{ПроверкаКоробок.Статус == &quot;Набирается&quot;:&lt;r color=&quot;Blue&quot;&gt;{ПроверкаКоробок.Статус}&lt;/r&gt;,;{ПроверкаКоробок.Статус}} cодержит {ПроверкаКоробок.Содержит} бут." id="f75274f7-7e60-4111-ba2e-70a7ecce08fc" indent="2" name="Есть незакрытая коробка" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>ПродолжитьКоробку</String><String>Печать при закрытии 1</String></ButtonDirections><ButtonTexts count="2"><String>Продолжить работу</String><String>Закрыть коробку</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><AssignAction breakPoint="False" comment="Выбрано &quot;Продолжить работу&quot;" expression="ТекущаяКоробка = ПроверкаКоробок" id="f80aae7f-2088-409e-94ab-19f0d39fdfc0" indent="2" name="ПродолжитьКоробку" nextDirection="39 1" /><ConditionAction breakPoint="False" expression="ПроверкаКоробок.Ген == true" id="cb189507-f9f9-4730-a19d-0c577a1f543e" indent="2" name="Печать при закрытии 1" nextDirection="" noDirection="ЗакрытьКоробкуПриСтарте" yesDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="ПЕЧАТЬ" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;h2&gt;Распечатать ШК?&lt;/h2&gt;" id="3e26e6ce-605d-462c-b86f-7fe55572147d" indent="3" name="Печать ГенШК 1 1 1" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>67 1</String><String>ЗакрытьКоробкуПриСтарте</String></ButtonDirections><ButtonTexts count="2"><String>Распечатать ШК</String><String>Закрыть коробку</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><OperationAction abortDirection="Печать ГенШК 1 1 1" breakPoint="False" id="98f5c833-dfb4-40ca-a8c5-f99f67ee0bed" indent="4" name="67 1" nextDirection="ЗакрытьКоробкуПриСтарте" operationName="ЕГАИС3 Печать 3" transactionNotch="False"><InKeys count="2"><String>PrintTemp</String><String>ШКПередан</String></InKeys><InValues count="2"><String>Box</String><String>"Ген"</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" comment="Выбрано &quot;Закрыть коробку&quot;" expression="ПроверкаКоробок.Статус = &quot;Закрыта&quot;" id="ae0995cc-f1e4-4658-a7d6-c02f57653b60" indent="2" name="ЗакрытьКоробкуПриСтарте" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" comment="Выбрано &quot;Закрыть коробку&quot;" id="d0526a5a-0ad4-4245-bc25-6278e79d2173" indent="2" name="ОчисткаСтартовая" nextDirection=""><KeyNames capacity="8" count="5"><String>ScannedBarcode</String><String>SelectedProduct</String><String>ПроверкаКоробок</String><String>КоробкаПоШК</String><String>ТекущаяКоробка</String></KeyNames></ClearSessionAction><ClearSessionAction all="False" breakPoint="False" id="1a92e75d-bd55-4566-a7c4-feaa201811dd" indent="0" name="ОчисткаПриСтартовойКоробке" nextDirection=""><KeyNames count="2"><String>ScannedBarcode</String><String>SelectedProduct</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" comment="Автогенерация коробки" expression="ТекущаяКоробка == null &amp;&amp; GlobalVars.ШККоробок[&quot;АгрегацияЕГАИС3&quot;] == true" id="dccb622a-3d4e-4b4d-8802-f56c05090358" indent="0" name="76" nextDirection="" noDirection="" yesDirection="Ген1" /><SelectDocumentLinesAction breakPoint="False" id="5a657195-cdb6-412d-998c-1b5a875309aa" indent="0" name="93" nextDirection="" sessionVariable="Коробки"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ЭтоРодитель == false"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="1"><String>Статус DESC</String></SortBy><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><SelectDocumentLinesAction breakPoint="False" id="f3e41ed3-9ac6-43f0-a2f5-9a08da39b429" indent="0" nextDirection="" sessionVariable="КоробкиБезПалеты"><Query copySelection="False" documentLines="Declared" from="Коробки" sourceWhereExpression="" tableAlias="Коробки" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Родитель == &quot;&quot;"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ItemsViewAction id="3cc56a90-24fe-474e-af28-89f4164a2198" name="Скан ШК коробки" nextDirection="76 1 1" headerText="{MSG==&quot;&quot;:&lt;r color=&quot;black&quot; size=&quot;-1&quot;&gt;{Коды.Ост:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;{Коды.Расширение+Коды.Ост}}&lt;/r&gt;;{MSG==&quot;Не нужно сканировать марку!&quot;:&lt;r  align=&quot;center&quot; color=&quot;Red&quot;&gt;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;{НаименованиеОшибка}&lt;/r&gt;;}{MSG==&quot;Не нужно сканировать палету!&quot;:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt;&lt;r align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}{MSG==&quot;Не нужно сканировать EAN-13!&quot;:&lt;r align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}{MSG==&quot;Не тот штрихкод!&quot;:&lt;r  align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}&#xD;&#xA;&lt;b  align=&quot;center&quot; color=&quot;Red&quot; size=&quot;+2&quot;&gt;{MSG}&lt;/b&gt;}" footerText="{GlobalVars.КластьНаПалеты[Document.DocumentType.Name] == true:&lt;button enabled=&quot;{КоробкиБезПалеты.Count &gt; 0}&quot; direction=&quot;Пакуем&quot; height=&quot;15%&quot; width=&quot;100%&quot;&gt;Собрать палету&lt;/button&gt;;}" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{Коробки}" welcomeText="&lt;b size=&quot;+1&quot; align=&quot;left&quot;&gt;{Коробки.Count != 0:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;{Коробки.Count} кор.;}&lt;/b&gt;&#xD;&#xA;&lt;b size=&quot;+2&quot; align=&quot;left&quot; color=&quot;Black&quot;&gt;СКАНИРУЙТЕ КОРОБКУ&lt;/b&gt;"><KeyJumps count="2"><KeyToAction action="return" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="76 1" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="1"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Статус == &quot;Набирается&quot;:&lt;Blue&gt;{Item.Статус}&lt;/Blue&gt;;&lt;DarkRed&gt;{Item.Статус}&lt;/DarkRed&gt;} {Item.ЦветнойСН}&#xD;&#xA;Содержит {Item.Содержит} &lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;бут.&#xD;&#xA;{Item.Родитель != &quot;&quot;:&lt;CornflowerBlue&gt;Упаковано в: {Item.Родитель}&lt;/CornflowerBlue&gt;;}" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ЭтоРодитель == false"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="1"><String>Статус DESC</String></SortBy><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><ClearSessionAction all="False" breakPoint="False" id="6627ba15-faa0-4fa1-a76f-c70cd5ed6103" indent="0" name="76 1 1" nextDirection="40"><KeyNames count="4"><String>MSG</String><String>Error</String><String>ErrBarcode</String><String>НаименованиеОшибка</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Статус == &quot;Набирается&quot;" id="9f027aed-aabd-49ae-9325-7d2f3c79e1dc" indent="0" name="63" nextDirection="" noDirection="" yesDirection="Печать при закрытии" /><OperationAction abortDirection="ОчисткаПриСтартовойКоробке" breakPoint="False" id="3e520006-8357-4ac1-890d-d032f7cfa677" indent="0" name="Ген1" nextDirection="59" operationName="ЕГАИС3 ВременннаяКоробка" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="1"><String>ScannedBarcode</String></OutKeys><OutValues count="1"><String>ScannedBarcode</String></OutValues></OperationAction><AssignAction breakPoint="False" expression="Сгенерировано = true" id="dbf8d107-db42-438d-a574-93885a143034" indent="0" name="59" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="76d8c7f5-24ed-44fa-adb5-63c69767db65" indent="0" name="76 1" nextDirection=""><KeyNames count="4"><String>MSG</String><String>Error</String><String>ErrBarcode</String><String>НаименованиеОшибка</String></KeyNames></ClearSessionAction><ScanAction autoCloseTime="0" autoSelectSingleProduct="False" autoShowSelectionList="False" backgroundImage="" barcodeConvertion="None" barcodeSessionVariable="ScannedBarcode" breakPoint="False" cancelType="None" canManualShowProductList="False" canSelectCell="False" canSelectPallet="False" cellDirection="" errorSelectDirection="90" fullscreen="Inherit" id="03b47240-5f0a-40ba-9d14-3f468ef25ae9" ignoreBaseBarcodes="False" ignoreQuantityPolicy="False" indent="1" name="Выбор коробки по ШК" nextDirection="" notFoundErrorText="" palletDirection="" playAudioOnError="False" processSessionBarcode="True" productsListHeaderText="" quickSelectProduct="False" searchingProducts="" searchPreviousSelected="False" selectionCellNum="0" selectionCellText="" selectionFirstCellText="" selectionListFormat="{Item.товВСпискеВыбора}" selectionPalletText="" selectionSecondCellText="" selectionStorageVariable="" sucsessSelectDirection="90" transactionNotch="False" useOnlyDocumentProducts="False" waitImage="" welcomeText="" withoutControls="False"><ExcludeClassificators count="0" /><IncludeClassificators count="0" /><KeyJumps count="1"><KeyToAction action="ОчисткаПриСтартовойКоробке" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><TreeTypeIds count="0" /></ScanAction><OperationAction abortDirection="" breakPoint="False" id="4acf94d8-de21-4bfd-9316-c254b631683e" indent="1" name="90" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="5"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Box</String><String>Pallet</String></InKeys><InValues capacity="8" count="5"><String>{ScannedBarcode}</String><String>False</String><String>False</String><String>True</String><String>False</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error==True" id="74ff4363-d954-4d40-8119-0d90aab857d7" indent="1" nextDirection="" noDirection="83" yesDirection="ОчисткаПриСтартовойКоробке" /><ConditionAction breakPoint="False" expression="ТекущаяКоробка != null" id="b7a52d51-e6ff-402a-82cf-0bb051295d78" indent="1" name="83" nextDirection="" noDirection="35" yesDirection="" /><ConditionAction breakPoint="False" expression="ScannedBarcode == ТекущаяКоробка.Ид" id="1a4a3c80-8dbe-410d-9f4e-88672741fe1e" indent="1" name="45" nextDirection="" noDirection="" yesDirection="39 1" /><AssignAction breakPoint="False" expression="ТекущаяКоробка.Статус = &quot;Закрыта&quot;" id="3a0bbe58-2969-4f6c-9a6b-b350b63fb43e" indent="1" name="52" nextDirection="" /><SelectDocumentLineAction breakPoint="False" comment="Поиск коробки" id="b2a53c10-e65a-4fe4-b92a-b27f3baaf2ac" indent="1" name="35" nextDirection="" sessionVariable="КоробкаПоШК"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="Поиск коробки" expression="КоробкаПоШК == null" id="92a97e5a-da90-427b-b536-fb25935cacd3" indent="1" nextDirection="" noDirection="35 1" yesDirection="" /><AssignAction breakPoint="False" comment="Создание коробки" expression="НовСтрока = new Cleverence.Warehouse.Row();&#xD;&#xA;НовСтрока.Ид = ScannedBarcode;&#xD;&#xA;НовСтрока.Статус = &quot;Набирается&quot;;&#xD;&#xA;НовСтрока.СерийныйНомерКоробки = Коды.Отображение;&#xD;&#xA;if (Сгенерировано == true)&#xD;&#xA;{НовСтрока.Ген = true;}&#xD;&#xA;Document.КоробкиПалеты.Rows.Add(НовСтрока);" id="54e473c0-68f5-44a1-8be3-325892986964" indent="2" name="34" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="3caa9275-119c-49be-a753-636e7b366cef" indent="2" name="61" nextDirection=""><KeyNames count="1"><String>Сгенерировано</String></KeyNames></ClearSessionAction><SelectDocumentLineAction breakPoint="False" comment="Это текущая коробка" id="f7a13f46-476f-4ce5-af36-44fc74ac94dc" indent="1" name="35 1" nextDirection="" sessionVariable="ТекущаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="ТекущаяКоробка != null" id="be3064f2-95ae-411f-90a4-c19b927e0d96" indent="1" nextDirection="" noDirection="39 1" yesDirection="" /><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Статус == &quot;Закрыта&quot;" id="282023f4-1529-4764-9a7e-ea3ea0c7a7d2" indent="1" nextDirection="" noDirection="" yesDirection="39 1" /><ConditionAction breakPoint="False" expression="ТекущаяКоробка != null" id="413f81cf-8f2c-47d3-a6e0-7887b17f9406" indent="1" name="79" nextDirection="" noDirection="39 1" yesDirection="" /><AssignAction breakPoint="False" comment="Это текущая коробка" expression="ТекущаяКоробка.Статус = &quot;Набирается&quot;" id="a3a82710-5729-4052-87c7-8c3e7adac9e1" indent="1" name="58" nextDirection="39 1" /><ClearSessionAction all="False" breakPoint="False" id="a7df5e8e-077a-42c0-a094-eadd6a26b7ff" indent="0" name="ОчисткаПриНаборе" nextDirection="44"><KeyNames count="2"><String>ScannedBarcode</String><String>SelectedProduct</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" comment="Закрытие коробки" expression="ТекущаяКоробка.Статус = &quot;Закрыта&quot;" id="0b619d9b-063f-40c2-b07b-b8a6236bc44c" indent="0" name="ЗакрытиеКоробки" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" comment="Закрытие коробки" id="080125b2-6cd4-4aaf-ace3-b002d3099ad3" indent="0" name="Очистка при закрытии" nextDirection="76"><KeyNames count="3"><String>ScannedBarcode</String><String>SelectedProduct</String><String>КоробкаПоШК</String></KeyNames></ClearSessionAction><SelectDocumentLinesAction breakPoint="False" comment="В ОКНЕ КОРОБКИ |" id="6a9b8228-93df-4176-bdb0-43d8891b3305" indent="0" name="39 1" nextDirection="43" sessionVariable="Содержимое"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Родитель == ТекущаяКоробка.Ид"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><SelectDocumentLineAction breakPoint="False" comment="В ОКНЕ КОРОБКИ |" id="e36a6431-b4ca-4b74-9de4-8b77ae7a87e0" indent="0" name="40" nextDirection="39 1" sessionVariable="ТекущаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == SelectedItem.Ид"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="В ОКНЕ КОРОБКИ |" expression="ТекущаяКоробка.Статус == &quot;Закрыта&quot;" id="c9bf5ce3-4d92-436e-a894-9d3272abb325" indent="0" name="43" nextDirection="" noDirection="44" yesDirection="" /><AssignAction breakPoint="False" expression="СодержимоеСорт = Содержимое.Rotate()" id="dadfacff-db52-4356-9983-796f37cab9eb" indent="0" nextDirection="" /><ItemsViewAction id="2c6961ac-38b0-4d40-b8c2-6234083d8082" name="55" nextDirection="Очистка при закрытии" headerText="&#xD;&#xA;&#xD;&#xA;" footerText="&lt;div&gt;&lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;&lt;td style=&quot;vertical-align:middle; text-align: center;&quot;&gt;&lt;r color=&quot;Red&quot;&gt;Коробка закрыта&lt;/r&gt;&lt;/td&gt;&lt;td align=&quot;right&quot;&gt;&lt;button direction=&quot;57&quot;&gt;Открыть коробку&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&#xD;&#xA;&#xD;&#xA;" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{СодержимоеСорт}" welcomeText="&lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {ТекущаяКоробка.ЦветнойСН} &lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;{Содержимое.Count} бут.&#xD;&#xA;"><KeyJumps count="1"><KeyToAction action="Очистка при закрытии" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="1"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Document.ВыбранныйТоварИмя != &quot;&quot;:;{Item.Product.Name}}&#xD;&#xA;{Item.ОтображениеВСпискеПотребительских}" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><SelectDocumentLineAction breakPoint="False" comment="Проверка, закрыты ли все коробки" id="c6827104-9e6e-4d45-8727-0362fd72226f" indent="0" name="57" nextDirection="" sessionVariable="ПроверкаКоробок2"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Статус == &quot;Набирается&quot;"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="Проверка, закрыты ли все коробки" expression="ПроверкаКоробок2 == null" id="57ab1d54-bb1a-4bf4-a501-cea0c98024eb" indent="1" nextDirection="" noDirection="" yesDirection="79" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Есть незакрытая коробка" defaultButtonHeight="15%" fullscreen="Inherit" headerText="&lt;h2&gt;Есть незакрытая коробка!&lt;/h2&gt;&#xD;&#xA;&#xD;&#xA;{ПроверкаКоробок2.Ид}&#xD;&#xA;{ПроверкаКоробок2.Статус == &quot;Набирается&quot;:&lt;r color=&quot;Blue&quot;&gt;{ПроверкаКоробок2.Статус}&lt;/r&gt;;{ПроверкаКоробок2.Статус}} cодержит {ПроверкаКоробок2.Содержит} единиц&#xD;&#xA;{ПроверкаКоробок2.ГоденДо != null:Годен до: {ПроверкаКоробок2.ГоденДо:d};Без срока годности}" id="57575879-d092-48cb-aa90-0eb0549cde60" indent="2" name="Есть незакрытая коробка 1" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>ПродолжитьКоробку 1</String><String>ЗакрытьКоробкуПриСтарте 1</String></ButtonDirections><ButtonTexts count="2"><String>Вернуться к открытой коробке</String><String>Работать с этой коробкой, закрыть предыдущую</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="back" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><AssignAction breakPoint="False" comment="Выбрано &quot;Продолжить работу&quot;" expression="ТекущаяКоробка = ПроверкаКоробок2" id="4eba8558-3011-41a7-b96a-ffb670721438" indent="2" name="ПродолжитьКоробку 1" nextDirection="39 1" /><AssignAction breakPoint="False" comment="Выбрано &quot;Закрыть коробку&quot;" expression="ПроверкаКоробок2.Статус = &quot;Закрыта&quot;" id="47c4870a-6db5-4db4-8fec-642681a3a6b4" indent="2" name="ЗакрытьКоробкуПриСтарте 1" nextDirection="" /><ConditionAction breakPoint="False" expression="ПроверкаКоробок2.Ген == true" id="34c7e12f-151b-4598-94f4-c81f44dbccf0" indent="2" name="62" nextDirection="" noDirection="79" yesDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Закрытие коробки" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;h2&gt;Чек распечатан!&lt;/h2&gt;" id="6e4f370a-9202-49d9-abf6-583759df29df" indent="3" name="Печать ГенЧека 1" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="1"><String>79</String></ButtonDirections><ButtonTexts count="1"><String>ОК</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="79" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><ClearSessionAction all="False" breakPoint="False" id="f649c85f-e086-408b-ae74-54f6399f0d28" indent="0" name="44" nextDirection=""><KeyNames capacity="8" count="5"><String>ScannedBarcode</String><String>SelectedProduct</String><String>SelectedItem</String><String>УжеДобавлен</String><String>УжеБылТакойПДФ</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" expression="СодержимоеСорт = Содержимое.VirtualRotate()" id="087b85a7-b51e-4d71-a2e3-35b28ae91ce7" indent="0" nextDirection="" /><ItemsViewAction id="f17b6675-a48e-4311-856d-2b8956a04ca4" name="Скан ШК товаров в окне коробки" nextDirection="68" headerText="&lt;r color=&quot;black&quot; align=&quot;left&quot;&gt;&lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;{ТекущаяКоробка.ЦветнойСН} &lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;{Содержимое.Count} бут.&#xD;&#xA;{Document.ВыбранныйТоварИмя:Выбранный товар: (0:M65)}&lt;/r&gt;&#xD;&#xA;{MSG==&quot;Не нужно сканировать марку!&quot;:&lt;r  align=&quot;center&quot; color=&quot;Red&quot;&gt;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;{НаименованиеОшибка}&lt;/r&gt;;}{MSG==&quot;Не нужно сканировать палету!&quot;:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt;&lt;r align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}{MSG==&quot;Не нужно сканировать EAN-13!&quot;:&lt;r align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}{MSG==&quot;Не тот штрихкод!&quot;:&lt;r  align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}&#xD;&#xA;&lt;b align=&quot;center&quot; color=&quot;Red&quot; size=&quot;+2&quot;&gt;{MSG == &quot;Лимит&quot;:В коробке не может быть больше {Document.ИспользуемыйРазмерКоробок} бутылок;{MSG}}&lt;/b&gt;" footerText="&lt;button direction=&quot;Печать при закрытии&quot; width=&quot;100%&quot;&gt;Закрыть коробку&lt;/button&gt;" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="" welcomeText="&lt;b color=&quot;black&quot; size=&quot;+2&quot; align=&quot;left&quot;&gt;СКАНИРУЙТЕ МАРКУ С БУТЫЛКИ&lt;/b&gt;"><KeyJumps count="2"><KeyToAction action="74" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="Очистка при закрытии" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="1"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Document.ВыбранныйТоварИмя != &quot;&quot;:;{Item.Product.Name}}&#xD;&#xA;{Item.ОтображениеВСпискеПотребительских}" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><Query copySelection="False" documentLines="Declared" from="{СодержимоеСорт}" sourceWhereExpression="" tableAlias="{СодержимоеСорт}" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><ClearSessionAction all="False" breakPoint="False" id="0aa3f6b9-9a07-4ece-a723-51e3efdffe57" indent="0" name="74" nextDirection=""><KeyNames count="3"><String>MSG</String><String>МаркаНовогоТипа</String><String>АлкоКод</String></KeyNames></ClearSessionAction><OperationAction abortDirection="" breakPoint="False" id="44e22add-c15d-4cc4-82db-9c39c353d106" indent="0" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="5"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Box</String><String>Pallet</String></InKeys><InValues capacity="8" count="5"><String>{ScannedBarcode}</String><String>False</String><String>True</String><String>True</String><String>False</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error==True" id="799ff143-fbb8-4ecf-80c6-12a3442e23f2" indent="0" nextDirection="" noDirection="88" yesDirection="44" /><ConditionAction breakPoint="False" comment="В ОКНЕ КОРОБКИ | Это коробка?" expression="ЭтоКоробка == true" id="cb4e261e-f3bd-499d-8d30-3020bcf09677" indent="0" name="88" nextDirection="" noDirection="ОбработкаЕГАИС" yesDirection="" /><ConditionAction breakPoint="False" comment="В ОКНЕ КОРОБКИ | Закрытие коробки по ее ШК" expression="ScannedBarcode == ТекущаяКоробка.Ид" id="b85d22bf-cf59-4090-acfc-db00530dd606" indent="1" name="38 1 2" nextDirection="" noDirection="75" yesDirection="73 1" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="ab3ef0f7-4277-4f23-b12d-9a6e54d0ab84" indent="2" message="Отсканирована рабочая коробка!&#xD;&#xA;&lt;b&gt;Закрыть?&lt;/b&gt;" name="73 1" nextDirection="" noDirection="undo" transactionNotch="False" yesDirection="ЗакрытиеКоробки"><KeyJumps count="0" /></QuestionYesNoAction><ConditionAction breakPoint="False" expression="GlobalVars.ШККоробок[&quot;АгрегацияЕГАИС3&quot;] == true" id="1c8be2aa-e552-4cbf-982e-8fc25b82257f" indent="1" name="75" nextDirection="" noDirection="74 1" yesDirection="" /><SelectDocumentLineAction breakPoint="False" id="7473fb02-ce82-4348-b8fe-23506352df83" indent="2" nextDirection="" sessionVariable="ИщемКоробкуГен"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="ИщемКоробкуГен != null" id="5e63d272-85ab-48cb-ba27-ca12311e3e67" indent="2" nextDirection="" noDirection="" yesDirection="74 1" /><AssignAction breakPoint="False" expression="GO.PlayError();&#xD;&#xA;MSG = &quot;Отсканирована не бутылка&quot;;" id="49e55b60-0ea1-46c5-805b-be45e69a78aa" indent="3" name="73 2" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="88749468-d3ea-4ee1-85c5-dc78114879db" indent="3" nextDirection="Скан ШК товаров в окне коробки"><KeyNames count="2"><String>ScannedBarcode</String><String>ИщемКоробкуГен</String></KeyNames></ClearSessionAction><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="91820d28-f6e3-4e7a-8611-74381dcd9262" indent="2" message="Отсканирована другая коробка!&#xD;&#xA;&lt;b&gt;Закрыть текущую и работать с отсканированной?&lt;/b&gt;" name="74 1" nextDirection="" noDirection="undo" transactionNotch="True" yesDirection="77"><KeyJumps count="0" /></QuestionYesNoAction><ClearSessionAction all="False" breakPoint="False" id="99dc1513-1c58-45a1-9478-a10a1a2121ef" indent="2" name="77" nextDirection="52"><KeyNames count="1"><String>ИщемКоробкуГен</String></KeyNames></ClearSessionAction><GroupAction breakPoint="False" buttonExit="False" canFinishAlways="False" cyclic="False" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="dea2b0ca-67a1-4e7c-bf21-2ac8182a441e" indent="0" name="ОбработкаЕГАИС" nextDirection="" transactionNotch="False"><Actions capacity="64" count="43"><AssignAction breakPoint="False" expression="УжеБылТакойПДФ = Document.CurrentItems.FindFirstByField(&quot;АлкоПДФ&quot;, ScannedBarcode)" id="643b37f8-abe8-49a8-b1fc-68a2f9a6e267" indent="0" nextDirection="" /><ConditionAction breakPoint="False" expression="УжеБылТакойПДФ != null" id="3cb242f6-33a0-44a8-b99f-dc2e2719e86d" indent="0" nextDirection="" noDirection="72 1" yesDirection="" /><AssignAction breakPoint="False" expression="Device.Vibrate(300)" id="17ccde2f-2261-44a3-a1df-56beccfd3d9b" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="УжеБылТакойПДФ.Родитель == ТекущаяКоробка.Ид" id="cb368177-0122-40d0-a3d3-9cd4e45bac55" indent="1" nextDirection="" noDirection="4" yesDirection="" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="cc52c412-b6aa-4648-a065-9492c7b80187" indent="2" message="&lt;b&gt;Удалить позицию?&lt;/b&gt;&#xD;&#xA;{УжеБылТакойПДФ.Product.Name}&#xD;&#xA;Код: {УжеБылТакойПДФ.АлкоКод}&#xD;&#xA;Марка: {УжеБылТакойПДФ.АлкоПДФ}" nextDirection="" noDirection="up:44" transactionNotch="True" yesDirection=""><KeyJumps count="0" /></QuestionYesNoAction><AssignAction breakPoint="False" expression="ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит - 1" id="b6249dac-eb05-4aae-8a4a-7cb083f67210" indent="2" nextDirection="" /><SelectDocumentLineAction breakPoint="False" id="7721ac34-e439-418e-ac34-6c03d1375516" indent="2" nextDirection="" sessionVariable="ИщУдБут"><Query copySelection="False" documentLines="Declared" from="{Document.УдаленныеБутылки}" sourceWhereExpression="" tableAlias="{Document.УдаленныеБутылки}" useTableAliasForItem="False" whereCompiled="False" whereExpression="УжеБылТакойПДФ.АлкоПДФ == Item.АлкоПДФ"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="ИщУдБут == null" id="49bb70ba-03b5-49dd-a27e-0aa15631d2d7" indent="2" nextDirection="" noDirection="78 1" yesDirection="" /><AssignAction breakPoint="False" expression="НовБутылка = new Cleverence.Warehouse.Row();&#xD;&#xA;НовБутылка.Родитель = УжеБылТакойПДФ.Родитель;&#xD;&#xA;НовБутылка.АлкоКод = УжеБылТакойПДФ.АлкоКод;&#xD;&#xA;НовБутылка.АлкоПДФ = УжеБылТакойПДФ.АлкоПДФ;&#xD;&#xA;Document.УдаленныеБутылки.Rows.Add(НовБутылка);" id="ed5a3eaf-32e7-451b-ba02-dda70aecfd8a" indent="2" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="c4fe435a-f27c-4a39-9ce5-429b61d0a98e" indent="2" name="78 1" nextDirection=""><KeyNames count="1"><String>ИщУдБут</String></KeyNames></ClearSessionAction><RemoveDocumentLineAction breakPoint="False" id="7c2d6f1e-d353-4029-851b-b1f985379e39" indent="2" nextDirection="up:39 1" packing="" quantity="" quantityErrorDirection="up:39 1" sessionVariable="УжеБылТакойПДФ" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="1a197d19-766e-4f36-9ccb-5f43b3f2ba7b" indent="1" message="{УжеБылТакойПДФ.Product.Name}&#xD;&#xA;Код: {УжеБылТакойПДФ.АлкоКод}&#xD;&#xA;Марка: {УжеБылТакойПДФ.АлкоПДФ}&#xD;&#xA;Уже лежит в &lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {УжеБылТакойПДФ.Родитель}&#xD;&#xA;&lt;b&gt;Переместить в текущую коробку?&lt;/b&gt;" name="4" nextDirection="" noDirection="up:44" transactionNotch="True" yesDirection=""><KeyJumps count="0" /></QuestionYesNoAction><AssignAction breakPoint="False" expression="ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит + 1" id="4977e6d1-30ed-4a2a-881a-ddfaa6d20e1f" indent="2" nextDirection="" /><SelectDocumentLineAction breakPoint="False" id="be8e87f2-f0fb-4efc-9432-4ac3cd3522ab" indent="2" nextDirection="" sessionVariable="ПрошлаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == УжеБылТакойПДФ.Родитель"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><AssignAction breakPoint="False" expression="ПрошлаяКоробка.Содержит = ПрошлаяКоробка.Содержит - 1;&#xD;&#xA;УжеБылТакойПДФ.Родитель = ТекущаяКоробка.Ид;" id="b9629303-a6d0-4242-9af8-d3eec8a2ff14" indent="2" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="c45c75fe-3b65-4711-ae39-ec5a64a6ce7a" indent="2" name="5" nextDirection="up:91"><KeyNames count="2"><String>ПрошлаяКоробка</String><String>УжеБылТакойПДФ</String></KeyNames></ClearSessionAction><ClearSessionAction all="False" breakPoint="False" id="6add3a90-9a83-4537-826f-5cf2a56aa486" indent="1" name="28 1" nextDirection="up:Скан ШК товаров в окне коробки"><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Содержит != Document.ИспользуемыйРазмерКоробок || Document.ИспользуемыйРазмерКоробок == 0" id="e55b966a-cef1-4498-981e-8d1d96c1936d" indent="0" name="72 1" nextDirection="" noDirection="" yesDirection="9" /><AssignAction breakPoint="False" expression="GO.PlayError();&#xD;&#xA;MSG = &quot;Лимит&quot;;" id="0a2edd94-bf52-46a0-a946-afcedd585cf8" indent="1" name="73 1" nextDirection="28 1" /><ConditionAction breakPoint="False" expression="МаркаНовогоТипа == true" id="233676e9-a8cd-4a31-8ded-3a5aadc023b1" indent="0" name="9" nextDirection="" noDirection="3" yesDirection="" /><AssignAction breakPoint="False" expression="АлкоПДФ = ScannedBarcode" id="01ff2dff-cc74-4603-8196-cb112e8c164a" indent="1" nextDirection="" /><ConditionAction breakPoint="False" comment="Автовыбор предыдущего товара, если марка нового формата и серия с типом не изменились" expression="ТекСерияМарки != &quot;&quot; &amp;&amp; ТекТипМарки != &quot;&quot; &amp;&amp; ПрошлыйТовар != null &amp;&amp; ТекСерияМарки == ScannedBarcode.Substring(3, 3) &amp;&amp; ТекТипМарки == ScannedBarcode.Substring(0, 3)" id="d032ae63-cbb1-4372-96a2-1ad847e0a414" indent="1" nextDirection="" noDirection="очистка 1" yesDirection="" /><AssignAction breakPoint="False" comment="Автовыбор предыдущего товара, если марка нового формата и серия с типом не изменились" expression="SelectedProduct = ПрошлыйТовар.Product.Pack(ПрошлыйТовар.PackingId, 1)&#xD;&#xA;SelectedProduct.АлкоПДФ = АлкоПДФ;&#xD;&#xA;SelectedProduct.Алко = true;" id="381b12d7-1cb2-4897-b29c-128e2306c8e4" indent="2" nextDirection="8" /><ClearSessionAction all="False" breakPoint="False" id="b4fdf428-2ff0-43c9-9891-1d57a8f405c1" indent="1" name="очистка 1" nextDirection=""><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><FieldEditAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Выбрана марка, сканируем товар" eanAI="None" editType="Session" fieldName="ScannedBarcode" fieldType="String" format="" fullscreen="Inherit" headerText="&lt;b size=&quot;+2&quot; align=&quot;center&quot; color=&quot;Red&quot;&gt;{MSG}&lt;/b&gt;" id="d0255f21-20cb-4d23-91f1-4d518d269bbd" indent="1" listItemFormat="" name="Выбрана марка нового типа, сканируем товар 1" nextDirection="" rememberPreviousValue="False" setForBuffer="False" showEditBox="True" showList="False" sizeType="Normal" transactionNotch="True" viewItems="" welcomeText="&lt;b size=&quot;+2&quot; color=&quot;black&quot;&gt;СКАНИРУЙТЕ&lt;/b&gt; &lt;b size=&quot;+2&quot; color=&quot;Red&quot;&gt;ШК ТОВАРА&lt;/b&gt;&#xD;&#xA;&lt;img tcolor=&quot;no&quot; size=&quot;stretch&quot; maxwidth=&quot;100%&quot; align=&quot;center&quot;&gt;egares.ean13&lt;/img&gt;"><Columns count="0" /><KeyJumps count="2"><KeyToAction action="up:44" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="Обработка ошибки 1" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /></KeyJumps><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></FieldEditAction><OperationAction abortDirection="" breakPoint="False" id="7bb051aa-6ff1-48df-8838-aa9a769dd0e1" indent="1" name="Обработка ошибки 1" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="6"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Pallet</String><String>Box</String><String>Product</String></InKeys><InValues capacity="8" count="6"><String>{ScannedBarcode}</String><String>True</String><String>False</String><String>False</String><String>False</String><String>True</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error==True" id="7891524d-34ef-46dd-a7da-4b756cf5bef8" indent="1" name="была ли ошибка 1" nextDirection="" noDirection="" yesDirection="undo" /><ScanAction autoCloseTime="0" autoSelectSingleProduct="True" autoShowSelectionList="True" backgroundImage="" barcodeConvertion="ToUpper" barcodeSessionVariable="ScannedBarcode" breakPoint="False" cancelType="None" canManualShowProductList="True" canSelectCell="False" canSelectPallet="False" cellDirection="" errorSelectDirection="товар не найден по ЕАН 1" footerText="" fullscreen="True" headerText="&#xD;&#xA;" id="3d0834d5-fd17-47a9-98c8-6abe3de4ddea" ignoreBaseBarcodes="False" ignoreQuantityPolicy="False" indent="1" name="Скан шк товара 1" nextDirection="" notFoundErrorText="товар по артикулу или коду не найден" palletDirection="" playAudioOnError="True" processSessionBarcode="True" productsListHeaderText="" quickSelectProduct="False" searchingProducts="" searchPreviousSelected="False" selectionCellNum="0" selectionCellText="" selectionFirstCellText="" selectionListFormat="{Item.товВСпискеВыбора}" selectionPalletText="" selectionSecondCellText="" selectionStorageVariable="" sucsessSelectDirection="149 1" transactionNotch="False" useOnlyDocumentProducts="False" waitImage="" welcomeText="&lt;b color=&quot;black&quot; size=&quot;+2&quot; align=&quot;center&quot;&gt;СКАНИРУЙТЕ ШК ТОВАРА&lt;/b&gt;" withoutControls="False"><ExcludeClassificators count="0" /><IncludeClassificators count="0" /><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><TreeTypeIds count="0" /></ScanAction><OperationAction abortDirection="очистка 1" breakPoint="False" id="9af608d8-25c9-40f2-8001-385b115eed4d" indent="1" name="товар не найден по ЕАН 1" nextDirection="149 1" operationName="ЕГАИС3 Обработка неизвестного штрихкода" transactionNotch="False"><InKeys count="4"><String>ПриниматьНеизвШК</String><String>АлкоРежим</String><String>ПриниматьНеизвАлкокодКакНеизвТовар</String><String>НеВводитьОписаниеНеизвТовара</String></InKeys><InValues count="4"><String>true</String><String>true</String><String>false</String><String>true</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct == null" id="17abd3d5-4e48-4b32-a98a-73aff84e4d78" indent="1" name="149 1" nextDirection="" noDirection="" yesDirection="undo" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоКод = АлкоКод;&#xD;&#xA;SelectedProduct.АлкоПДФ = АлкоПДФ;&#xD;&#xA;SelectedProduct.Алко = true;&#xD;&#xA;ПрошлыйТовар = SelectedProduct;&#xD;&#xA;ТекСерияМарки = АлкоПДФ.Substring(3, 3); &#xD;&#xA;ТекТипМарки = АлкоПДФ.Substring(0, 3);" id="3565d254-8628-435f-8b3b-58478e77d232" indent="1" name="143 1" nextDirection="8" /><ConditionAction breakPoint="False" expression="Document.ВыбранныйАлкоКод != &quot;&quot;" id="a677c78c-1e70-4c0b-9ae3-865e91ff23c8" indent="0" name="3" nextDirection="" noDirection="6" yesDirection="" /><ConditionAction breakPoint="False" expression="Document.ВыбранныйАлкоКод == АлкоКод" id="62bfb8d9-6d26-4c4a-9577-7d7257973c5a" indent="1" nextDirection="" noDirection="10" yesDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct = UnknownProduct.Pack();&#xD;&#xA;SelectedProduct.Product.Name = Document.ВыбранныйТоварИмя;&#xD;&#xA;SelectedProduct.АлкоКод = АлкоКод;&#xD;&#xA;SelectedProduct.Алко = true;&#xD;&#xA;SelectedProduct.АлкоПДФ = ScannedBarcode;" id="811d043e-55a0-4f06-aa1e-c58b71922f27" indent="1" nextDirection="up:66" /><ConditionAction breakPoint="False" comment="Автовыбор товара при повторе алкокода" expression="АлкоКод == ПрошлыйТовар.АлкоКод" id="1f66de35-fd83-4b25-bdaa-2e4bd7476398" indent="0" name="6" nextDirection="" noDirection="Поиск по ШК 1" yesDirection="" /><AssignAction breakPoint="False" comment="Автовыбор товара при повторе алкокода" expression="SelectedProduct = ПрошлыйТовар.Product.Pack(ПрошлыйТовар.PackingId, 1)" id="d8bb9ab0-6064-413b-ac95-0d06bae70141" indent="0" name="11" nextDirection="21 1" /><ScanAction autoCloseTime="0" autoSelectSingleProduct="False" autoShowSelectionList="False" backgroundImage="" barcodeConvertion="ToUpper" barcodeSessionVariable="АлкоКод" breakPoint="False" cancelType="None" canManualShowProductList="True" canSelectCell="False" canSelectPallet="False" cellDirection="" comment="Здесь выбор неизвестного товара" errorSelectDirection="2 1 1 1" fullscreen="Inherit" id="f13110db-2341-4d52-8053-3acd36dbef73" ignoreBaseBarcodes="False" ignoreQuantityPolicy="False" indent="0" name="Поиск по ШК 1" nextDirection="" notFoundErrorText="" palletDirection="" playAudioOnError="False" processSessionBarcode="True" productsListHeaderText="" quickSelectProduct="False" searchingProducts="" searchPreviousSelected="False" selectionCellNum="0" selectionCellText="" selectionFirstCellText="" selectionListFormat="{Item.товВСпискеВыбора}" selectionPalletText="" selectionSecondCellText="" selectionStorageVariable="" sucsessSelectDirection="21 1" transactionNotch="False" useOnlyDocumentProducts="False" waitImage="" welcomeText="" withoutControls="False"><ExcludeClassificators count="0" /><IncludeClassificators count="0" /><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><TreeTypeIds count="0" /></ScanAction><OperationAction abortDirection="up:70" breakPoint="False" id="98324643-c9a9-4716-97ee-f8f36e8b7b91" indent="1" name="2 1 1 1" nextDirection="21 1" operationName="ЕГАИС3 Обработка неизвестного штрихкода" transactionNotch="False"><InKeys capacity="8" count="6"><String>ПриниматьНеизвШК</String><String>АлкоРежим</String><String>ПриниматьНеизвАлкокодКакНеизвТовар</String><String>НеВводитьОписаниеНеизвТовара</String><String>ScannedBarcode</String><String>ТекстАлкоКод</String></InKeys><InValues capacity="8" count="6"><String>true</String><String>true</String><String>false</String><String>true</String><String>{АлкоКод}</String><String>true</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" expression="SelectedProduct.АлкоКод = АлкоКод;&#xD;&#xA;SelectedProduct.Алко = true;&#xD;&#xA;SelectedProduct.АлкоПДФ = ScannedBarcode;" id="9216a2ea-f7e8-4283-80e1-c86143c9e77b" indent="0" name="21 1" nextDirection="" /><ConditionAction breakPoint="False" expression="SelectedProduct.ProductId != Document.ВыбранныйТовар &amp;&amp; Document.ВыбранныйТовар != &quot;&quot;" id="c4863e52-66a8-40d4-9cf7-f3313aa1bc79" indent="0" name="8" nextDirection="" noDirection="16 1" yesDirection="" /><AssignAction breakPoint="False" expression="GO.PlayError();&#xD;&#xA;MSG = &quot;Эта бутылка не подходит!&quot;;" id="5f12c0db-27e0-4e4b-9afb-58d1360460d8" indent="1" name="10" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="b19431a2-48b4-4739-91ab-44a67ca95d4e" indent="1" nextDirection="up:Скан ШК товаров в окне коробки"><KeyNames count="2"><String>ScannedBarcode</String><String>SelectedProduct</String></KeyNames></ClearSessionAction><OperationAction abortDirection="28 1" breakPoint="False" id="8c477bfb-e7c8-4fc2-bc03-4be0fbd4af9d" indent="0" name="16 1" nextDirection="up:66" operationName="ЕГАИС3 ПереносАлкоДанныхИзТовара" transactionNotch="False"><InKeys count="4"><String>ПланИФакт</String><String>ЕстьФормыА</String><String>НеСканироватьPDF</String><String>СтрокаСАлкоголем</String></InKeys><InValues count="4"><String>true</String><String>{ФормыА.Rows.Count &gt; 0}</String><String>true</String><String>{СтрокаПланАлко}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction></Actions><LockObjects count="0" /></GroupAction><AssignAction breakPoint="False" expression="GO.PlayError();&#xD;&#xA;MSG = &quot;Товар не найден&quot;;" id="e191a410-8e0d-41f5-8722-1e77e8db2c55" indent="1" name="70" nextDirection="44" /><OperationAction abortDirection="Еще одна очистка" breakPoint="False" id="f786eb59-3f22-42be-b246-6a568920f3da" indent="0" name="66" nextDirection="" operationName="ЕГАИС3 Запись в документ Агрегирование" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" comment="Это монокоробка, размер коробок не выгружен и размер есть в номенклатуре?" expression="Document.ВыбранныйТовар != &quot;&quot; &amp;&amp; Document.Contains(&quot;РазмерКоробок&quot;) == false &amp;&amp; SelectedProduct.Packing.РазмерКоробки != null" id="22800f18-591f-4f89-9b7d-d3cccf07c3f2" indent="0" name="91" nextDirection="" noDirection="71" yesDirection="" /><ConditionAction breakPoint="False" comment="Достигнут лимит коробки?" expression="ТекущаяКоробка.Содержит == SelectedProduct.Packing.РазмерКоробки" id="42152d5c-bb19-45f4-9c15-8c1642455167" indent="1" nextDirection="" noDirection="Еще одна очистка" yesDirection="92" /><ConditionAction breakPoint="False" comment="Достигнут лимит коробки?" expression="ТекущаяКоробка.Содержит == Document.ИспользуемыйРазмерКоробок" id="fcb915a2-b747-477b-a86d-11c788d25a41" indent="0" name="71" nextDirection="" noDirection="Еще одна очистка" yesDirection="" /><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Ген == true" id="06dd7728-036b-43f4-831b-743b69721848" indent="1" name="92" nextDirection="" noDirection="ЗакрытиеКоробки" yesDirection="67" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="ПЕЧАТЬ" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;h2&gt;Коробка набрана!&lt;/h2&gt;" id="43c8f53b-3682-4d7c-9482-166868f55a6a" indent="2" name="Печать ГенШК 1" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>67</String><String>Еще одна очистка</String></ButtonDirections><ButtonTexts count="2"><String>Распечатать ШК</String><String>Продолжить</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><OperationAction abortDirection="Еще одна очистка" breakPoint="False" id="99f1a36e-5e9e-4869-bfb4-c23b63b54645" indent="2" name="67" nextDirection="ЗакрытиеКоробки" operationName="ЕГАИС3 Печать 3" transactionNotch="False"><InKeys count="2"><String>PrintTemp</String><String>ШКПередан</String></InKeys><InValues count="2"><String>Box</String><String>"Ген"</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ClearSessionAction all="False" breakPoint="False" id="cf814a5c-1b9c-422e-82e2-752742e05325" indent="0" name="Еще одна очистка" nextDirection="39 1"><KeyNames count="2"><String>ScannedBarcode</String><String>SelectedProduct</String></KeyNames></ClearSessionAction><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="e8d74a84-46dc-4ec0-8f73-3c0c190d2dea" indent="0" message="&lt;b&gt;Удалить позицию?&lt;/b&gt;&#xD;&#xA;{SelectedItem.Product.Name}&#xD;&#xA;Код: {SelectedItem.АлкоКод}&#xD;&#xA;Марка: {SelectedItem.АлкоПДФ}" name="68" nextDirection="" noDirection="undo" transactionNotch="False" yesDirection=""><KeyJumps count="0" /></QuestionYesNoAction><AssignAction breakPoint="False" expression="ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит - 1" id="bb9f9ec5-569c-48b2-8022-cdd414deb95d" indent="0" nextDirection="" /><SelectDocumentLineAction breakPoint="False" id="dd1e5bf3-bb6f-4efd-8c02-edc319f8b90c" indent="0" nextDirection="" sessionVariable="ИщУдБут"><Query copySelection="False" documentLines="Declared" from="{Document.УдаленныеБутылки}" sourceWhereExpression="" tableAlias="{Document.УдаленныеБутылки}" useTableAliasForItem="False" whereCompiled="False" whereExpression="SelectedItem.АлкоПДФ == Item.АлкоПДФ"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="ИщУдБут == null" id="3397d6dc-d701-4c8d-ae8f-82e4033d9e19" indent="0" nextDirection="" noDirection="78" yesDirection="" /><AssignAction breakPoint="False" expression="НовБутылка = new Cleverence.Warehouse.Row();&#xD;&#xA;НовБутылка.Родитель = SelectedItem.Родитель;&#xD;&#xA;НовБутылка.АлкоКод = SelectedItem.АлкоКод;&#xD;&#xA;НовБутылка.АлкоПДФ = SelectedItem.АлкоПДФ;&#xD;&#xA;Document.УдаленныеБутылки.Rows.Add(НовБутылка);" id="417f30ee-5bd7-406f-9916-2861ba2036b9" indent="1" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="9fae0c44-7eba-4fb3-b11f-38de6ae0c99a" indent="0" name="78" nextDirection=""><KeyNames count="1"><String>ИщУдБут</String></KeyNames></ClearSessionAction><RemoveDocumentLineAction breakPoint="False" id="cc183a56-7594-4bb6-b51b-0dac9bba3d3c" indent="0" nextDirection="39 1" packing="" quantity="" quantityErrorDirection="39 1" sessionVariable="SelectedItem" /><OperationAction abortDirection="93" breakPoint="False" id="af230817-7c20-4897-a6af-69148a800d3f" indent="0" name="Пакуем" nextDirection="93" operationName="ЕГАИС3 ПакуемВсеНезапакованное" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Ген == true" id="61c2d295-6bc2-4800-92a2-bb5f9e9b59a1" indent="0" name="Печать при закрытии" nextDirection="" noDirection="ЗакрытиеКоробки" yesDirection="67" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="ПЕЧАТЬ" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;h2&gt;Коробка набрана!&lt;/h2&gt;" id="9e480da7-acb6-429d-9284-082f2128b1f2" indent="0" name="Печать ГенШК 1 1" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>67</String><String>ЗакрытиеКоробки</String></ButtonDirections><ButtonTexts count="2"><String>Распечатать ШК</String><String>Закрыть коробку</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction></Actions><Parameters count="0" /><Returns count="0" /></Operation>