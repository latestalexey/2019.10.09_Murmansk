<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" fullscreen="Inherit" lock="No" name="ПросмотрЦен" serverHosted="False"><Actions capacity="8" count="5"><SelectDocumentLinesAction breakPoint="False" id="677d8455-8993-4c95-9462-fc765c0e527c" indent="0" nextDirection="" sessionVariable="ЦеныПоТовару"><Query copySelection="False" documentLines="Declared" from="Цены" sourceWhereExpression="" tableAlias="Цены" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдТовара == SelectedProduct.ProductId"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" expression="SelectedProduct.Product.ПоХарактеристикам == true" id="e6828fdd-1e2c-4de4-b181-e477e78bc81c" indent="0" nextDirection="" noDirection="ВсеЦены" yesDirection="3" /><SelectDocumentLinesAction breakPoint="False" comment="Сделано для единоразового обращения к серверу" id="7ac5e731-dfa1-415d-9c9e-b0c7cb58ddd3" indent="0" name="3" nextDirection="" sessionVariable="ХарактеристикиЗапрос"><Query copySelection="False" documentLines="Declared" from="Характеристики" sourceWhereExpression="" tableAlias="Характеристики" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.КлючХарактеристик == SelectedProduct.Product.КлючХарактеристик "><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><GroupAction breakPoint="False" buttonExit="False" canFinishAlways="False" cyclic="False" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="e2b07940-33f3-4190-aa77-54808bd0496c" indent="0" name="ПоХарактеристикам" nextDirection="return" transactionNotch="False"><Actions capacity="16" count="11"><ConditionAction breakPoint="False" expression="SelectedProduct.ИдХарактеристики != &quot;&quot;" id="d3f312f8-677c-4452-816d-52fae89c6a50" indent="0" name="8 1" nextDirection="" noDirection="3" yesDirection="1" /><SelectDocumentLinesAction breakPoint="False" comment="Ищем остаток по выбранному товару" id="80beb8da-6612-4dcb-ba97-a9cc9aa31df9" indent="0" name="1" nextDirection="4 1 1" sessionVariable="УникальныйТовар"><Query copySelection="False" documentLines="Declared" from="ЦеныПоТовару" sourceWhereExpression="" tableAlias="Остатки" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдХарактеристики == SelectedProduct.ИдХарактеристики"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ItemsViewAction id="da9dcf36-e3fa-4917-bdc0-8e8dc825ab05" name="4 1 1" nextDirection="5" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;&lt;Black&gt;{SelectedProduct.Product.Name}&lt;/Black&gt;&#xD;&#xA;&lt;b size=&quot;+2&quot;&gt;Характеристика: {SelectedProduct.ИмяХарактеристики!=&quot;&quot;:{SelectedProduct.ИмяХарактеристики};Отсутствует}&lt;/b&gt;&#xD;&#xA;" footerText="&lt;button width=&quot;100%&quot; direction=&quot;3&quot;&gt;Все характеристики&lt;/button&gt;" title="Цены" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{УникальныйТовар}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.ВидЦены}" leftBorder="0" rightBorder="0" title="" topBorder="0" width="70%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Цена} {Item.Валюта}" leftBorder="0" rightBorder="0" topBorder="0" width="30%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><SelectDocumentLinesAction breakPoint="False" comment="Группируем строки, для того, чтобы получить список с уникальными ИдХарактеристики" id="04923f24-47c4-4541-b144-ab3c9fc4cd35" indent="0" name="3" nextDirection="" sessionVariable="GrouppedXarka"><Query copySelection="False" documentLines="Declared" from="ЦеныПоТовару" sourceWhereExpression="" tableAlias="Остатки" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="1"><String>ИдХарактеристики</String></GroupBy><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" comment="Создаем табличку для сбора характеристик" expression="ХарактеристикиТовара = new Cleverence.Warehouse.RowCollection()" id="959435bf-b397-4c1e-bef5-06b17f73b014" indent="0" name="" nextDirection="" /><ForeachAction breakPoint="False" buttonExit="False" canFinishAlways="False" comment="Заполняем табличку с характеристиками товара" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="8a9bb66b-d789-4db1-b218-14632a8f7b0d" indent="0" items="{GrouppedXarka}" nextDirection="" transactionNotch="False"><Actions count="3"><SelectDocumentLineAction breakPoint="False" id="eb57f898-4eb7-4ca0-8c6e-77a86650e908" indent="0" nextDirection="" sessionVariable="ВыбраннаяХарактеристика"><Query copySelection="False" documentLines="Declared" from="ХарактеристикиЗапрос" sourceWhereExpression="" tableAlias="ХарактеристикиЗапрос" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдХарактеристики == SelectedLine.ИдХарактеристики"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><AssignAction breakPoint="False" comment="Заполняем временную строку" expression="tempRow = new Cleverence.Warehouse.Row();&#xD;&#xA;tempRow.Ид = SelectedLine.ИдХарактеристики;&#xD;&#xA;tempRow.Характеристика = ВыбраннаяХарактеристика.ИмяХарактеристики;" id="9efc6f29-4dd2-4d34-86db-9c943348343e" indent="0" nextDirection="" /><AssignAction breakPoint="False" comment="Пишем строку в таблицу" expression="ХарактеристикиТовара.Add(tempRow)" id="837fba3b-ccb7-4627-a4fd-f163d08328b5" indent="0" name="" nextDirection="continue" /></Actions><LockObjects count="0" /></ForeachAction><SelectDocumentLinesAction breakPoint="False" comment="Сортируем полученную табличку по именам характеристик" id="38475916-0898-43f5-b001-96035a73acb2" indent="0" nextDirection="" sessionVariable="ХарактеристикиТовара"><Query copySelection="False" documentLines="Declared" from="ХарактеристикиТовара" sourceWhereExpression="" tableAlias="ХарактеристикиТовара" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="1"><String>Характеристика</String></SortBy><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" comment="Создаем табличку для отображения" expression="СтрокиПоказа = new Cleverence.Warehouse.HybridCollection()" id="fb6a7d68-561e-4f45-9543-03dff6be6cf6" indent="0" nextDirection="" /><ForeachAction breakPoint="False" buttonExit="False" canFinishAlways="False" comment="Заполняем табличку для показа" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="b80faddf-2795-4d9b-ae8b-f66155c01723" indent="0" items="{ХарактеристикиТовара}" nextDirection="4 1 1 1" transactionNotch="False"><Actions count="2"><SelectDocumentLinesAction breakPoint="False" comment="Выбираем данные по характеристике" id="3e36e026-e3fe-42fb-bd59-3403c4cf384d" indent="0" nextDirection="" sessionVariable="tempCol"><Query copySelection="False" documentLines="Declared" from="ЦеныПоТовару" sourceWhereExpression="" tableAlias="Остатки" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдХарактеристики == SelectedLine.Ид"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" comment="Пишем в табличку для показа с заголовком" expression="СтрокиПоказа.AddCollection(tempCol,SelectedLine.Характеристика != &quot;&quot; ? SelectedLine.Характеристика: &quot;Без характеристики&quot;)" id="b68254ea-8895-4b18-b5d7-293cffd2ea3e" indent="0" nextDirection="continue" /></Actions><LockObjects count="0" /></ForeachAction><ItemsViewAction id="b649974e-ec07-4448-8681-4b5106f654d4" name="4 1 1 1" nextDirection="5" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;&lt;Black&gt;{SelectedProduct.Product.Name}&lt;/Black&gt;&#xD;&#xA;&lt;b size=&quot;+2&quot;&gt;Все характеристики&lt;/b&gt;" footerText="{УникальныйТовар.Count != 0 :&lt;button width=&quot;100%&quot; direction=&quot;1&quot;&gt;К характеристике товара&lt;/button&gt;;}" title="Цены" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem2" viewItems="{СтрокиПоказа}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.ВидЦены}" leftBorder="0" rightBorder="0" title="" topBorder="0" width="70%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Цена} {Item.Валюта}" leftBorder="0" rightBorder="0" topBorder="0" width="30%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><ConditionAction breakPoint="False" comment="Возвращаем по нажатию на экране/enter" expression="true" id="e1ad642c-756b-4e4d-867b-a29a06a73df8" indent="0" name="5" nextDirection="" noDirection="back" yesDirection="back" /></Actions><LockObjects count="0" /></GroupAction><GroupAction breakPoint="False" buttonExit="False" canFinishAlways="False" cyclic="False" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="f3584514-eac6-4b54-9bee-411f1f2613c5" indent="0" name="ВсеЦены" nextDirection="return" transactionNotch="False"><Actions count="2"><ItemsViewAction id="ca437967-6fba-4337-9871-507ad6eb38f3" name="3 1" nextDirection="" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;{SelectedProduct.Product.Name:&lt;black&gt;(0)&lt;/black&gt;}" footerText="" title="Цены" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{ЦеныПоТовару}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.ВидЦены}" leftBorder="0" rightBorder="0" topBorder="0" width="70%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Цена} {Item.Валюта}" leftBorder="0" rightBorder="0" topBorder="0" width="30%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><ConditionAction breakPoint="False" expression="true" id="e00ade03-b3e9-4a1a-ae37-102653b2a81e" indent="0" name="2" nextDirection="" noDirection="back" yesDirection="back" /></Actions><LockObjects count="0" /></GroupAction></Actions><Parameters count="1"><FieldInfo alias="" eanAI="None" fieldName="SelectedProduct" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SelectedProduct" valueTemplate="" /></Parameters><Returns count="0" /></Operation>