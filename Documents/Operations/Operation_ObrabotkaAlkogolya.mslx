<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="Алкоголь" fullscreen="True" lock="No" name="ОбработкаАлкоголя" serverHosted="False"><Actions capacity="256" count="129"><AssignAction breakPoint="False" expression="сч = 0;&#xD;&#xA;СессияРежимСканироватьEAN13 = GlobalVars.РежимСканироватьEAN13[Document.DocumentTypeName];" id="03deaf76-ea5d-4656-9f20-a97991cd9970" indent="0" name="Обнуление счётчика" nextDirection="72" /><ConditionAction breakPoint="False" comment="Если из обработки без EAN13" expression="SelectedProduct.АлкоПДФ != &quot;&quot; &amp;&amp; Марка == true" id="59479d6d-89ba-477e-99c3-d69ebc1eb0b7" indent="0" name="72" nextDirection="" noDirection="НужнаЛиПроверкаЧекМарком" yesDirection="71" /><OperationAction abortDirection="61" breakPoint="False" id="55ff9f25-86c3-4952-90e9-31e38b0c7f8f" indent="0" name="НужнаЛиПроверкаЧекМарком" nextDirection="61" operationName="НужнаПроверкаЧекМарк" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" comment="Указывает, по какому бизнес-процессу работаем" expression="РаботаемВЧекМарке" id="4a7fefc4-616a-45f3-9a40-6eacf770992c" indent="0" name="61" nextDirection="" noDirection="Если сбор ДМ и заполнены поля" yesDirection="ЕслиНужнаПроверка" /><ConditionAction breakPoint="False" expression="ПроверкаЧекМарк == true" id="fc1021da-2aee-4e99-80ab-765954b19978" indent="1" name="ЕслиНужнаПроверка" nextDirection="" noDirection="ЕстьЛиАлкоСтрока" yesDirection="ВызовЧекМарк" /><OperationAction abortDirection="ЕслиТолькоПДФ" breakPoint="False" id="64d4fa34-a886-46f2-996a-3cf43587bac0" indent="2" name="ВызовЧекМарк" nextDirection="ЕстьЛиПлан" operationName="ВызовЧекМарк" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="СтрокаСАлкоголем == null" id="ab33c944-b9ac-4de5-8b47-6993271f4000" indent="0" name="ЕстьЛиАлкоСтрока" nextDirection="" noDirection="ПереносДанныхИзПровереннойСтроки" yesDirection="" /><OperationAction abortDirection="ЕстьЛиПлан" breakPoint="False" id="dc741343-fd9f-4fc1-842c-122cffefae3e" indent="2" name="ПереносДанныхИзТовара" nextDirection="ЕстьЛиПлан" operationName="ПереносАлкоДанныхИзТовара" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><OperationAction abortDirection="ЕстьЛиПлан" breakPoint="False" id="d76450a4-64b7-4284-86c8-8ed8979c7b25" indent="3" name="ПереносДанныхИзПровереннойСтроки" nextDirection="ЕстьЛиПлан" operationName="ПереносАлкоДанныхИзСтроки" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="ПланИФакт == true" id="b7ac8600-a0b2-428d-bbef-f63b62f68cc8" indent="0" name="ЕстьЛиПлан" nextDirection="" noDirection="ЕслиНетДатыРозлива" yesDirection="ПоискВЗаявке" /><OperationAction abortDirection="" breakPoint="False" comment="  //Убрано с   подозрением на дикое замедление" id="52c7a01b-6364-4abe-8d6b-6ba466a9b92f" indent="1" name="Отбор строк заявки" nextDirection="" operationName="АлкоПодборСтрокЗаявки" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" expression="СтрокиТекущегоТовара = Document.DeclaredItems.FindByField(&quot;АлкоКод&quot;,SelectedProduct.АлкоКод);&#xD;&#xA;if(СтрокиТекущегоТовара != null &amp;&amp; СтрокиТекущегоТовара.Count != 0)&#xD;&#xA;СтрокаТекущегоТовара = СтрокиТекущегоТовара.FindFirstByField(&quot;АлкоКод&quot;,SelectedProduct.АлкоКод);&#xD;&#xA;else&#xD;&#xA;СтрокаТекущегоТовара = null;" id="8318b84b-b732-40aa-8483-7ddc8a0e0887" indent="1" name="ПоискВЗаявке" nextDirection="ПроверкаДопустимостиТовара" /><OperationAction abortDirection="abort" breakPoint="False" id="0ef7be0f-ec75-40c1-8dd8-23c0d9288763" indent="0" name="ПроверкаДопустимостиТовара" nextDirection="ЕслиНетДатыРозлива" operationName="ПроверкаТовараВСтрокахДокумента" transactionNotch="False"><InKeys count="3"><String>SelectedProduct</String><String>СтрокиТекущегоТовара</String><String>КонтрольТовараБезКолич</String></InKeys><InValues count="3"><String>{SelectedProduct}</String><String>{СтрокиТекущегоТовара}</String><String>{КонтрольТовараБезКолич}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct.ДатаРозлива == &quot;&quot; || SelectedProduct.ДатаРозлива == null" id="7f50030d-947a-4294-b1bc-181401b8fba6" indent="0" name="ЕслиНетДатыРозлива" nextDirection="" noDirection="ЕслиПроверкаЧМ" yesDirection="ВвестиДатуРозлива" /><OperationAction abortDirection="abort" breakPoint="False" id="184eff09-1861-47d1-a9dc-4c01d479750b" indent="1" name="ВвестиДатуРозлива" nextDirection="ЕслиПроверкаЧМ" operationName="ВводДатыРозлива" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct.ПроверкаЧМ == true" id="9556d092-319c-4497-8968-b7f77b357aa8" indent="0" name="ЕслиПроверкаЧМ" nextDirection="" noDirection="Если сбор ДМ и заполнены поля" yesDirection="Выбор строки с тем же АлкоСН" /><ConditionAction breakPoint="False" expression="Document.АлкоДМ != true &amp;&amp; SelectedProduct.АлкоСН != &quot;&quot; &amp;&amp; SelectedProduct.АлкоКод != &quot;&quot; &amp;&amp; ScannedBarcode.Length != 150 &amp;&amp; ScannedBarcode.Length != 151" id="1f8fe3ea-5b13-4b9a-9f6c-938e057e3f16" indent="0" name="Если сбор ДМ и заполнены поля" nextDirection="" noDirection="ПроверкаНеобходимостиПДФ" yesDirection="Если сбор много номеров 3" /><ConditionAction breakPoint="False" expression="НеСканироватьPDF == false" id="e2bbb329-fb21-4472-b15d-739d84c5e60f" indent="0" name="ПроверкаНеобходимостиПДФ" nextDirection="" noDirection="6" yesDirection="Обнуление АлкоПДФ" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = &quot;&quot;" id="97802975-a3f0-4066-8746-cb9555977aec" indent="1" name="Обнуление АлкоПДФ" nextDirection="6" /><ConditionAction breakPoint="False" expression="Марка == true" id="006b8830-3830-4fd8-849f-c4acf64bf363" indent="0" name="6" nextDirection="" noDirection="" yesDirection="ЭтоАлкоМарк" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоСН = &quot;&quot;;&#xD;&#xA;SelectedProduct.АлкоСерия = &quot;&quot;;" id="0b590f7f-476b-4f70-8f50-20484d787c62" indent="1" name="Обнуление АлкоСН" nextDirection="ЭтоАлкоМарк" /><ConditionAction breakPoint="False" expression="Document.АлкоРежимСканироватьPDF == true &amp;&amp; НеСканироватьPDF == false" id="37acaa6f-e397-454f-bf16-a84a8b9a6ee7" indent="0" name="ЭтоАлкоМарк" nextDirection="" noDirection="ПроставитьПустойАлкоКод" yesDirection="ПроставитьАлкоМарк" /><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоКод == empty &amp;&amp; Марка == false" id="fe95b734-1d7f-4941-9886-fac9875a801d" indent="0" name="ПроставитьПустойАлкоКод" nextDirection="" noDirection="ОчисткаОшибкиАлко" yesDirection="ПроставитьАлкоМарк" /><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоМарк == true || SelectedProduct.Маркировка == &quot;Алкоголь&quot;" id="c9881412-be69-4831-a6a4-31a34f322c47" indent="0" name="ПроставитьАлкоМарк" nextDirection="" noDirection="Если сбор много номеров 3" yesDirection="Сканер только PDF417" /><AssignAction breakPoint="False" expression="Scanner.EnableBarcodeType(&quot;PDF417&quot;, true);&#xD;&#xA;Scanner.EnableBarcodeType(&quot;DataMatrix&quot;, false);" id="8abc5258-8e59-419c-babe-acc56ae16a60" indent="0" name="Сканер только PDF417" nextDirection="Скан ПДФ" /><FormattedPageAction autoCloseTime="0" backColor="White" backgroundImage="" breakPoint="False" cancelType="None" footerText="{SelectedProduct.ПроверкаЧМ==true || CheckMark.IsInstalled == false:;&lt;button direction=&quot;Вызов чекмарк 2&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Проверить в CheckMark&lt;/button&gt;}{Document.АлкоРежимСканироватьEAN13 == &quot;Новый АлкоКод&quot;:{сч==0:&lt;button direction=&quot;ЕслиТолькоПДФ&quot; enabled=&quot;true&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Назад&lt;/button&gt;;&lt;button direction=&quot;ЕслиТолькоПДФ_&quot; enabled=&quot;true&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;({сч} ном.) Завершить&lt;/button&gt;};&lt;button direction=&quot;ЕслиТолькоПДФ&quot; enabled=&quot;true&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Назад&lt;/button&gt;}" fullscreen="Inherit" headerText="{SelectedProduct.стрВШапкахОкон}&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ДатаРозлива: Дата розлива: &lt;b color=&quot;DarkBlue&quot;&gt;(0:dd.MM.yyyy)&lt;/b&gt;}&#xD;&#xA;&lt;r size=&quot;-1&quot; color=&quot;Red&quot;&gt;{УжеПДФ != null:{УжеПДФ.АлкоПДФ} уже добавлен в документ!;}&#xD;&#xA;{ErrorMessage}&lt;/r&gt;" id="c1d4c00e-aaa7-491a-aef5-aff2a50df35a" indent="0" name="Скан ПДФ" nextDirection="Скан ПДФ" singlePage="False" transactionNotch="True"><Blocks count="1"><LabelPageBlock align="TopCenter" allBorder="0" backColor="Transparent" bottomBorder="0" foreColor="Black" leftBorder="0" rightBorder="0" text="Сканируйте &lt;b size=&quot;+1&quot; color=&quot;Red&quot;&gt;марку&lt;/b&gt;&#xD;&#xA;&lt;img tcolor=&quot;no&quot; size=&quot;stretch&quot; maxwidth=&quot;100%&quot; align=&quot;center&quot; direction=&quot;&quot;&gt;egares.pdf417&lt;/img&gt;" topBorder="0" /></Blocks><KeyJumps count="3"><KeyToAction action="58" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="ЕслиТолькоПДФ_" barcode="" condition="{многономеров==true &amp;&amp; сч &gt; 0}" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="ЕслиТолькоПДФ" barcode="" condition="{многономеров!=true || сч == 0}" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></FormattedPageAction><ClearSessionAction all="False" breakPoint="False" comment="//Обработка сканирования новой марки" id="fa221518-2d68-432f-b9b1-1c7f682e5b1f" indent="0" name="58" nextDirection="62"><KeyNames count="2"><String>Марка</String><String>ErrorMessage</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" comment="Проверяем, с каким АлкоПДФ мы работаем" expression="ScannedBarcode.Length == 150 || ScannedBarcode.Length == 151" id="96d82af6-8883-479a-9cb6-09bfa3280cd1" indent="0" name="62" nextDirection="" noDirection="67" yesDirection="63" /><ConditionAction breakPoint="False" comment="Проверка наличия плановых строк" expression="Document.CreatedOnPDA == false" id="c7e271b8-5e98-49c5-869a-19ace35c4ef7" indent="1" name="63" nextDirection="" noDirection="66" yesDirection="ПоискПлановойСтрокиПоМарке" /><SelectDocumentLineAction breakPoint="False" id="7a3c9227-b619-4bd2-b05b-9d9052d5da7b" indent="2" name="ПоискПлановойСтрокиПоМарке" nextDirection="" sessionVariable="ПоискПДФВПлане"><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.АлкоПДФ == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="ПоискПДФВПлане !=null &amp;&amp; ПоискПДФВПлане.Completed == true" id="a672bddf-2cfd-44d6-a6db-e0e26df4afc7" indent="2" nextDirection="" noDirection="ЕслиПлановаяСтрокаМаркиНеНайдена 1 1" yesDirection="65" /><BaloonAction breakPoint="False" id="730c2c6b-afa3-482d-a4d3-e2b1270a84e1" indent="3" isError="True" name="65" nextDirection="ОчисткаШК 1" seconds="3" text="Марка уже добавлена в документ!" /><ConditionAction breakPoint="False" expression="ПоискПДФВПлане == null &amp;&amp; Document.КонтрольКолва == true" id="665b6ba9-65b5-40ae-9929-8fec53a7ba2e" indent="2" name="ЕслиПлановаяСтрокаМаркиНеНайдена 1 1" nextDirection="" noDirection="66" yesDirection="Ошибка ПДФ 2 1 1 1" /><BaloonAction breakPoint="False" id="097dd793-6553-45ac-a177-70ecd5d0a85d" indent="3" isError="True" name="Ошибка ПДФ 2 1 1 1" nextDirection="ОчисткаШК 1" seconds="3" text="Марка не найдена в накладной!" /><SelectDocumentLineAction breakPoint="False" id="5436db40-a149-44b1-9330-5c6c44012e4c" indent="2" name="66" nextDirection="48 1" sessionVariable="УжеБылТакойПДФ"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.АлкоПДФ == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="УжеБылТакойПДФ != null" id="eb27491f-3a31-4594-9fcb-0bb4c187ad15" indent="2" name="48 1" nextDirection="" noDirection="68" yesDirection="Ошибка ПДФ 2 1" /><BaloonAction breakPoint="False" id="99e4a2fb-a709-4cdb-be2a-899ec5efd393" indent="3" isError="True" name="Ошибка ПДФ 2 1" nextDirection="ОчисткаШК 1" seconds="3" text="Марка уже добавлена в документ!" /><ClearSessionAction all="False" breakPoint="False" id="5e0d596b-165f-43fe-b135-9dc786571249" indent="3" name="ОчисткаШК 1" nextDirection="back"><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = ScannedBarcode;&#xD;&#xA;SelectedProduct.АлкоСерия = ScannedBarcode.Substring(3, 3);&#xD;&#xA;SelectedProduct.АлкоСН = ScannedBarcode.Substring(6, 8);" id="230d07d5-70e4-4ba6-a532-f25daf0c5334" indent="3" name="68" nextDirection="" /><ConditionAction breakPoint="False" expression="GlobalVars.РежимСканироватьEAN13[Document.DocumentTypeName] == &quot;Новый АлкоКод&quot;" id="b2cde736-3b16-4840-9f4b-3ad9bea1f3d6" indent="3" nextDirection="" noDirection="73" yesDirection="" /><AssignAction breakPoint="False" expression="if (ТекТипМарки == &quot;&quot;)&#xD;&#xA;{&#xD;&#xA;ТекТипМарки = ScannedBarcode.Substring(0, 3);&#xD;&#xA;ТекСерияМарки = ScannedBarcode.Substring(3, 3);&#xD;&#xA;}" id="ab59c808-f846-4d26-bd43-b88d8232baed" indent="3" nextDirection="" /><ConditionAction breakPoint="False" expression="ТекТипМарки != ScannedBarcode.Substring(0, 3) || ТекСерияМарки != ScannedBarcode.Substring(3, 3)" id="4ff4885f-80bf-4297-9cc2-0252cf8c4428" indent="3" nextDirection="" noDirection="73" yesDirection="Сообщение другой тип или серия" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" defaultButtonHeight="15%" fullscreen="Inherit" id="859ed65a-1ae8-4bc0-a733-1c74b89f188d" indent="3" name="Сообщение другой тип или серия" nextDirection="" showAsMsgBox="False" transactionNotch="False" welcomeText="&lt;b color=&quot;Red&quot; size=&quot;+2&quot;&gt;Марка содержит другой тип или серию!&lt;/b&gt;&#xD;&#xA;Возможно, это уже другая номенклатура!&#xD;&#xA;Необходимо заново отсканировать &lt;b&gt;ШК товара и марку&lt;/b&gt;!"><ButtonDirections count="1"><String>Завершить</String></ButtonDirections><ButtonTexts count="1"><String>ОК</String></ButtonTexts><KeyJumps count="0" /></QuestionAction><ConditionAction breakPoint="False" expression="Document.CreatedOnPDA == false" id="64de2f81-3779-448b-99e4-5b22f4cc7f3b" indent="3" name="73" nextDirection="" noDirection="70" yesDirection="69" /><OperationAction abortDirection="ЕслиНужноВводитьЦену" breakPoint="False" id="81079baf-84fd-461f-8063-92361510b3b4" indent="3" name="69" nextDirection="ЕслиНужноВводитьЦену" operationName="ПереносАлкоДанныхИзСтроки" transactionNotch="False"><InKeys count="1"><String>СтрокаСАлкоголем</String></InKeys><InValues count="1"><String>{ПоискПДФВПлане}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><OperationAction abortDirection="ЕслиНужноВводитьЦену" breakPoint="False" comment="//конец обработки новых марок" id="554836b8-1a96-418b-b4fa-1ffb30179157" indent="3" name="70" nextDirection="ЕслиНужноВводитьЦену" operationName="ПереносАлкоДанныхИзТовара" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" comment="Если включен контроль марок для старой марки" expression="Document.КонтрольМарок == true" id="7afd5ff8-9a01-4cbe-b5c6-d90d6fffb457" indent="0" name="67" nextDirection="" noDirection="Запись ПДФ в SelectedProduct" yesDirection="63 1" /><ConditionAction breakPoint="False" comment="Проверка наличия плановых строк" expression="Document.CreatedOnPDA == false" id="02b1b1a3-c627-4ff9-b3a1-c65a5776fcb1" indent="1" name="63 1" nextDirection="" noDirection="66 1" yesDirection="ПоискПлановойСтрокиПоМарке 1" /><SelectDocumentLineAction breakPoint="False" id="6ed32fc5-5966-45f9-ab40-84b4bb3ffe7d" indent="2" name="ПоискПлановойСтрокиПоМарке 1" nextDirection="" sessionVariable="ПоискПДФВПлане"><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.АлкоПДФ == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="ПоискПДФВПлане !=null &amp;&amp; ПоискПДФВПлане.Completed == true" id="351505da-9635-4b76-b86c-d2a34716056b" indent="2" nextDirection="" noDirection="ЕслиПлановаяСтрокаМаркиНеНайдена 1 1 1" yesDirection="65 1" /><BaloonAction breakPoint="False" id="182e21d0-09a3-49c4-b143-5de6ef88d470" indent="3" isError="True" name="65 1" nextDirection="ОчисткаШК 1 1" seconds="3" text="Марка уже добавлена в документ!" /><ConditionAction breakPoint="False" expression="ПоискПДФВПлане == null &amp;&amp; Document.КонтрольКолва == true" id="d20064a0-7335-4e28-895a-dbb7d1f0dc4f" indent="2" name="ЕслиПлановаяСтрокаМаркиНеНайдена 1 1 1" nextDirection="" noDirection="66 1" yesDirection="Ошибка ПДФ 2 1 1 1 1" /><BaloonAction breakPoint="False" id="1c3fd450-4f49-4dea-9238-b77be4bbdd3d" indent="3" isError="True" name="Ошибка ПДФ 2 1 1 1 1" nextDirection="ОчисткаШК 1 1" seconds="3" text="Марка не найдена в накладной!" /><SelectDocumentLineAction breakPoint="False" id="0cd5e95c-6c2f-4deb-a091-99665b6b44d9" indent="2" name="66 1" nextDirection="48 1 1" sessionVariable="УжеБылТакойПДФ"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.АлкоПДФ == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="УжеБылТакойПДФ != null" id="d5a583ea-067a-4b72-a46a-7310ff6324b5" indent="2" name="48 1 1" nextDirection="" noDirection="Запись ПДФ в SelectedProduct" yesDirection="Ошибка ПДФ 2 1 1" /><BaloonAction breakPoint="False" id="0f7bb8f7-2859-444c-9055-81e5f390067f" indent="3" isError="True" name="Ошибка ПДФ 2 1 1" nextDirection="ОчисткаШК 1 1" seconds="3" text="Марка уже добавлена в документ!" /><ClearSessionAction all="False" breakPoint="False" id="5910378c-f00d-4b4b-8c73-8fc9486d08c1" indent="3" name="ОчисткаШК 1 1" nextDirection="back"><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = ScannedBarcode" id="6a7e2b96-9d34-42c3-bf21-a6176d77c738" indent="3" name="Запись ПДФ в SelectedProduct" nextDirection="" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоКод = CheckMark.GetAlcoCode(SelectedProduct.АлкоПДФ)" id="3a12a47d-bda7-4f41-86a3-51260ba7fe5d" indent="3" name="АлкоКод из ПДФ" nextDirection="Если АлкоКод не выбран" /><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоКод == &quot;&quot;" id="36b66701-c2af-499f-9667-67aafd952c23" indent="3" name="Если АлкоКод не выбран" nextDirection="" noDirection="Если совпадает с прошлым АлкоКод" yesDirection="Ошибка ПДФ" /><ConditionAction breakPoint="False" expression="ПрошлыйАлкокод == null || SelectedProduct.АлкоКод == ПрошлыйАлкокод" id="b636e3b6-b3a4-487f-ab77-514509b02005" indent="4" name="Если совпадает с прошлым АлкоКод" nextDirection="" noDirection="ОшибкаПоШтрихкоду" yesDirection="Выбор строки с тем же ПДФ" /><AssignAction breakPoint="False" expression="УжеПДФ = Document.CurrentItems.FindFirstByField(&quot;АлкоПДФ&quot;, SelectedProduct.АлкоПДФ)" id="0c566ad3-edd8-4f86-9476-4654998e9eb8" indent="5" name="Выбор строки с тем же ПДФ" nextDirection="Если строка с ПДФ уже есть" /><ConditionAction breakPoint="False" expression="УжеПДФ != null" id="05e1ab7f-cd91-4639-98c4-c39bb50a6e12" indent="6" name="Если строка с ПДФ уже есть" nextDirection="" noDirection="2" yesDirection="back" /><BaloonAction breakPoint="False" id="ab0314a9-cd86-49b1-abf8-c866d955d6f1" indent="6" isError="True" name="Ошибка ПДФ" nextDirection="back" seconds="3" text="неверный PDF 417" /><AssignAction breakPoint="False" expression="GO.PlayError();&#xD;&#xA;ВШапку = &quot;ДругойАлкоКод&quot;;" id="ebe46ed5-d1af-451c-8bf5-cd15668e70e7" indent="6" name="ОшибкаПоШтрихкоду" nextDirection="ЕслиТолькоПДФ_" /><ConditionAction breakPoint="False" expression="SelectedProduct.ProductId != UnknownProduct.Id &amp;&amp; АлкоКодРазрешен == null" id="1600b58e-d8aa-4194-b2ff-a674a96c35c9" indent="0" name="2" nextDirection="" noDirection="ОчисткаОшибкиАлко" yesDirection="" /><AssignAction breakPoint="False" comment="Поиск номенклатуры по алкокоду и затем поиск товара из EAN-13 в ответе" expression="НоменклатураПоМарке = global::Cleverence.Warehouse.ProductsManager.FindEverywhere(SelectedProduct.АлкоКод, false, false, false);&#xD;&#xA;НужныйТоварИзНоменклатурыПоМарке = НоменклатураПоМарке.FindByProductId(SelectedProduct.ProductId);" id="b3e0edd9-deac-4441-a462-256933179027" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="НужныйТоварИзНоменклатурыПоМарке.Count &gt; 0" id="1e58bf21-6be0-4ee6-b0ae-70fb46a7a3cc" indent="1" nextDirection="" noDirection="" yesDirection="ОчисткаОшибкиАлко" /><ConditionAction breakPoint="False" expression="НоменклатураПоМарке.Count &gt; 0" id="2bf5bc33-bda8-4183-8ab5-d4735bc80bf1" indent="2" nextDirection="" noDirection="3" yesDirection="" /><BaloonAction breakPoint="False" id="444aab40-735b-43b1-bd7a-0129c61319f7" indent="3" isError="True" nextDirection="АлкоКод не принадлежит товару из EAN-13" seconds="3" text="АлкоКод принадлежит другому товару" /><BaloonAction breakPoint="False" id="0d462295-11bc-41c0-8e9f-910d044b6c8a" indent="2" isError="True" name="3" nextDirection="АлкоКод не принадлежит товару из EAN-13" seconds="3" text="АлкоКод не принадлежит ни одному товару" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;Red&gt;{ErrorMessage}&lt;/Red&gt;" id="f334668c-4075-4be4-a2a1-57fd8d9837b6" indent="4" name="АлкоКод не принадлежит товару из EAN-13" nextDirection="" showAsMsgBox="True" transactionNotch="True" welcomeText=""><ButtonDirections count="3"><String>5</String><String>ОчисткаОшибкиАлко</String><String>4</String></ButtonDirections><ButtonTexts count="3"><String>Больше не спрашивать для этого товара</String><String>Продолжить</String><String>Отмена</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="4" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><AssignAction breakPoint="False" comment="Больше не проверять до смены товара" expression="АлкоКодРазрешен = true" id="eee9821a-267b-48af-a62f-7cf0f42f0005" indent="5" name="5" nextDirection="ОчисткаОшибкиАлко" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = null;&#xD;&#xA;SelectedProduct.АлкоКод = null;" id="9ba22d1d-7bca-4b6e-9ae7-ddbb2ad3bb1a" indent="4" name="4" nextDirection="ОчисткаШК" /><ClearSessionAction all="False" breakPoint="False" id="2a069f39-00fc-49a2-89aa-a0975a396198" indent="2" name="ОчисткаШК" nextDirection="back"><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><ClearSessionAction all="False" breakPoint="False" id="1a49e1c0-ec50-443c-8a23-95a154513743" indent="0" name="ОчисткаОшибкиАлко" nextDirection="71"><KeyNames count="3"><String>ErrorMessage</String><String>НоменклатураПоМарке</String><String>НужныйТоварИзНоменклатурыПоМарке</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" comment="Для новой марки строка уже найдена" expression="SelectedProduct.АлкоПДФ.length==150 || SelectedProduct.АлкоПДФ.length==151" id="8198d4fb-20ed-4e9a-a210-fe23a6f628a5" indent="0" name="71" nextDirection="" noDirection="Выбор строки с тем же ПДФ 1" yesDirection="59" /><AssignAction breakPoint="False" expression="СтрокаСАлкоголем = Document.DeclaredItems.FindFirstByField(&quot;АлкоКод&quot;, SelectedProduct.АлкоКод)" id="9c8d1bb3-ba7e-47cd-92e7-c847bbf0ac80" indent="1" name="Выбор строки с тем же ПДФ 1" nextDirection="" /><ConditionAction breakPoint="False" expression="СтрокаСАлкоголем == null" id="6feeeef8-d7bf-4df3-8db9-52fb3a2336f4" indent="1" name="59" nextDirection="" noDirection="ПереносДанныхИзПровереннойСтроки 1" yesDirection="ЕслиПоДокументуАлкоДМ" /><OperationAction abortDirection="" breakPoint="False" id="7ce50d7a-b71b-4a01-ba83-f802cbac7aee" indent="2" name="ПереносДанныхИзПровереннойСтроки 1" nextDirection="" operationName="ПереносАлкоДанныхИзСтроки" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Document.АлкоДМ == true" id="1dd25352-f2bc-4d24-8a32-0d6942e725ac" indent="0" name="ЕслиПоДокументуАлкоДМ" nextDirection="" noDirection="Если сбор много номеров 3" yesDirection="Сканер только DataMatrix" /><AssignAction breakPoint="False" expression="Scanner.EnableBarcodeType(&quot;DataMatrix&quot;, true)" id="83efe021-4d19-4123-9814-f52dfe692731" indent="0" name="Сканер только DataMatrix" nextDirection="" /><ConditionAction breakPoint="False" expression="Document.АлкоМногоДМ == false" id="cbcc42db-f8ce-4b6d-83c2-e22f76261197" indent="0" name="ЕслиПоДокументуМногоДМ" nextDirection="" noDirection="ОкончаниеНабораАлкоСН" yesDirection="Скан серийник" /><AssignAction breakPoint="False" expression="НаборАлкоСерийныхНомеровЗавершен = false" id="39024aeb-743a-4d9f-b400-8aaeae489371" indent="0" name="ОкончаниеНабораАлкоСН" nextDirection="АлкоСН в SelectedProduct" /><FormattedPageAction autoCloseDirection="" autoCloseTime="0" backColor="White" backgroundImage="" breakPoint="False" cancelType="None" comment="единичные сканы без списка" footerText="{SelectedProduct.ПроверкаЧМ==true || CheckMark.IsInstalled == false:;&lt;button direction=&quot;Вызов чекмарк 2&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Проверить в CheckMark&lt;/button&gt;}&lt;button direction=&quot;ЕслиТолькоПДФ&quot; enabled=&quot;true&quot; width=&quot;50%&quot; height=&quot;15%&quot;&gt;Назад&lt;/button&gt;" fullscreen="Inherit" headerText="&lt;Black&gt;{SelectedProduct.стрОсновное}{SelectedProduct.СН: &lt;b&gt;№(0)&lt;/b&gt;}&lt;/Black&gt;&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ДатаРозлива: Дата розлива: &lt;b color=&quot;DarkBlue&quot;&gt;(0:dd.MM.yyyy)&lt;/b&gt;}&#xD;&#xA;&lt;r size=&quot;-1&quot; color=&quot;Red&quot;&gt;{УжеСерийник != null:{УжеСерийник.АлкоСН} уже добавлен в документ!;}&#xD;&#xA;{ErrorMessage}&lt;/r&gt;" id="7f814754-c02e-4008-833e-b0b3012146a5" indent="0" name="Скан серийник" nextDirection="ЕслиПоДокументуАлкоДМ" singlePage="False" transactionNotch="True"><Blocks count="1"><LabelPageBlock align="TopCenter" allBorder="0" backColor="Transparent" bottomBorder="0" foreColor="Black" leftBorder="0" rightBorder="0" text="Сканируйте &lt;b size=&quot;+1&quot; color=&quot;Red&quot;&gt;cерийник&lt;/b&gt;&#xA;&lt;img tcolor=&quot;no&quot; size=&quot;stretch&quot; maxwidth=&quot;100%&quot; align=&quot;center&quot; direction=&quot;&quot;&gt;egares.data_matrix&lt;/img&gt;" topBorder="0" /></Blocks><KeyJumps count="3"><KeyToAction action="Запись серийника в SelectedProduct" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="ЕслиТолькоПДФ_" barcode="" condition="{многономеров==true &amp;&amp; сч &gt; 0}" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="ЕслиТолькоПДФ" barcode="" condition="{многономеров!=true || сч == 0}" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></FormattedPageAction><AssignAction breakPoint="False" expression="SelectedProduct.АлкоСН = ScannedBarcode" id="02a61ce2-cde5-444f-8452-a4b2f7d0dd5a" indent="1" name="Запись серийника в SelectedProduct" nextDirection="Обработка АлкоСН" /><FieldEditAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="сканы со списком" eanAI="None" editType="DocumentColumn" fieldName="АлкоСН" fieldType="String" footerText="{SelectedProduct.ПроверкаЧМ==true || CheckMark.IsInstalled == false:;&lt;button direction=&quot;Вызов чекмарк 2&quot; width=&quot;100%&quot; height=&quot;15%&quot;&gt;Проверить в CheckMark&lt;/button&gt;}&#xD;&#xA;&lt;button direction=&quot;29&quot; width=&quot;40%&quot; height=&quot;15%&quot;&gt;Отмена&lt;/button&gt;{Buffer != null:&lt;button direction=&quot;ЗавершитьНаборАлкоСН&quot; width=&quot;60%&quot; height=&quot;15%&quot;&gt;({сч} ном.) Завершить&lt;/button&gt;;}" format="" fullscreen="True" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size=&quot;-2&quot;&gt;(esc) - прервать&lt;/r&gt;}&#xD;&#xA;&lt;Black&gt;{SelectedProduct.стрОсновное}{SelectedProduct.СН: &lt;b&gt;№(0)&lt;/b&gt;}&lt;/Black&gt;&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ДатаРозлива: Дата розлива: &lt;b color=&quot;DarkBlue&quot;&gt;(0:dd.MM.yyyy)&lt;/b&gt;}&#xD;&#xA;&lt;r size=&quot;-1&quot; color=&quot;Red&quot;&gt;{УжеСерийник != null:{УжеСерийник.АлкоСН} уже добавлен в документ!;}&#xD;&#xA;{ErrorMessage}&lt;/r&gt;" id="b7355b85-18b2-4083-8206-91aaeac70f48" indent="1" listCaption="&lt;b size=&quot;-1&quot;&gt;Отсканированные №:&lt;/b&gt;" listItemFormat="{&quot;&quot;}" name="АлкоСН в SelectedProduct" nextDirection="Если АлкоСН пустой" rememberPreviousValue="False" setForBuffer="False" showEditBox="True" showList="True" sizeType="Normal" transactionNotch="True" viewItems="{Buffer}" welcomeText="Сканируйте &lt;b size=&quot;+1&quot; color=&quot;Red&quot;&gt;cерийный № бутылки&lt;/b&gt;"><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="№ {Item.АлкоСН}" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><KeyJumps count="2"><KeyToAction action="ВыходАлкоСН" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="ЗавершитьНаборАлкоСН" barcode="" condition="Buffer != null" foreColor="#00000000" key="Return" modifiers="None" viewType="InMenu" /></KeyJumps><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></FieldEditAction><ConditionAction breakPoint="False" expression="сч &gt; 0" id="3e9a6ad0-9d10-4626-acbd-211ac9776056" indent="4" name="ВыходАлкоСН" nextDirection="" noDirection="ЕслиТолькоПДФ" yesDirection="ВопросАлкоСН" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="80b47230-2a7c-40d3-8a5e-2431473fae74" indent="4" message="Вы уверены?" name="ВопросАлкоСН" nextDirection="" noDirection="back" transactionNotch="True" yesDirection="ЕслиТолькоПДФ"><KeyJumps count="0" /></QuestionYesNoAction><OperationAction abortDirection="ЕслиТолькоПДФ" breakPoint="False" id="017aba12-2211-47fc-a5ed-788a33ded16a" indent="2" name="Вызов чекмарк 2" nextDirection="Выбор строки с тем же АлкоСН" operationName="ВызовЧекМарк" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоСН == &quot;&quot;" id="7f6a5d1d-86e3-4064-958e-48320b81d6a2" indent="1" name="Если АлкоСН пустой" nextDirection="" noDirection="Обработка АлкоСН" yesDirection="back" /><OperationAction abortDirection="Ошибка серийника" breakPoint="False" id="39306e80-8a26-44eb-8047-59240852ec5b" indent="2" name="Обработка АлкоСН" nextDirection="Выбор строки с тем же АлкоСН" operationName="ОбработкаАлкоСН" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><BaloonAction breakPoint="False" id="a448e4f9-f19b-45d1-bdba-7ea7145758a8" indent="3" isError="True" name="Ошибка серийника" nextDirection="back" seconds="3" text="неверный серийный номер марки" /><AssignAction breakPoint="False" expression="УжеСерийник = Document.CurrentItems.FindFirstByField(&quot;АлкоСН&quot;, SelectedProduct.АлкоСН)" id="864b9ddb-4f58-4b2f-8724-79b2caf08e45" indent="1" name="Выбор строки с тем же АлкоСН" nextDirection="ЕслиПоДокументуМногоДМ_" /><ConditionAction breakPoint="False" expression="Document.АлкоМногоДМ == true" id="8b0af208-ecc8-4a22-8ca6-fc24926bf5a0" indent="1" name="ЕслиПоДокументуМногоДМ_" nextDirection="" noDirection="ОчисткаОшибкиАлко_" yesDirection="НайтиСерийник" /><AssignAction breakPoint="False" expression="УжеСерийник = Buffer.FindFirstByField(&quot;АлкоСН&quot;, SelectedProduct.АлкоСН)" id="96ae1911-b513-4c97-8354-21f05a584cbe" indent="2" name="НайтиСерийник" nextDirection="ОчисткаОшибкиАлко_" /><ClearSessionAction all="False" breakPoint="False" id="18ecebc7-b4f0-45a0-8300-d59cc3bbbaa7" indent="1" name="ОчисткаОшибкиАлко_" nextDirection=""><KeyNames count="1"><String>ErrorMessage</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="УжеСерийник != null" id="28bd57f9-d8ac-4754-9408-c25dbaf0fbfb" indent="1" name="Если строка с серийником уже есть" nextDirection="" noDirection="Если сбор много номеров 3" yesDirection="back" /><ConditionAction breakPoint="False" comment="PRODUCTS-1845" expression="GlobalVars.РежимПроверкиПоДиапазонам[Document.DocumentType.Name] == true" id="3695c401-5386-4554-ac48-a4a941ca900a" indent="1" name="ЕслиВключенаПроверкаПоДиапазонам" nextDirection="" noDirection="Если сбор много номеров 3" yesDirection="Проверка по диапазонам" /><OperationAction abortDirection="back" breakPoint="False" comment="PRODUCTS-1845" id="1c7773e3-390b-4e4a-bc5b-be66f6cb743c" indent="1" name="Проверка по диапазонам" nextDirection="Если сбор много номеров 3" operationName="ПроверкаПоДиапазонамФормыА" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="((SelectedProduct.АлкоМарк == false &amp;&amp; SelectedProduct.Маркировка != &quot;Алкоголь&quot;) || (Document.докАлкоВводКолва == true &amp;&amp; Document.АлкоДМ == false)) &amp;&amp; Марка == false" id="d8cb7392-bdff-41d3-a58c-7b92bf524736" indent="1" name="Если сбор много номеров 3" nextDirection="" noDirection="Запомнить АлкоСН" yesDirection="ПоискВЗаявке 1" /><AssignAction breakPoint="False" expression="СтрокиТекущегоТовара = Document.DeclaredItems.FindByField(&quot;АлкоКод&quot;,SelectedProduct.АлкоКод);&#xD;&#xA;if(СтрокиТекущегоТовара != null &amp;&amp; СтрокиТекущегоТовара.Count != 0)&#xD;&#xA;СтрокаТекущегоТовара = СтрокиТекущегоТовара.FindFirstByField(&quot;АлкоКод&quot;,SelectedProduct.АлкоКод);&#xD;&#xA;else&#xD;&#xA;СтрокаТекущегоТовара = null;" id="e2ea5900-8763-4c5b-89b5-4b6bef21c092" indent="2" name="ПоискВЗаявке 1" nextDirection="ОчисткаАлкоСН" /><ClearSessionAction all="False" breakPoint="False" id="ff2f4acc-22d3-466b-bad8-664f7770b342" indent="1" name="ОчисткаАлкоСН" nextDirection="Ввод количества"><KeyNames count="1"><String>SelectedProduct.АлкоСН</String></KeyNames></ClearSessionAction><SimpleQuantityAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" footerText="{SelectedProduct.ВводитьДопПоля==false &amp;&amp; CurrentAction.ValueChanged==false:&lt;b size=&quot;+1&quot; color=&quot;SteelBlue&quot; align=&quot;center&quot;&gt;ДЛЯ ВВОДА {SelectedProduct.Product.Весовой:СЛЕД. ЕД.;ПОШТУЧНО} &#xD;&#xA;МОЖНО СКАНИРОВАТЬ ДАЛЬШЕ&lt;/b&gt;;&lt;b size=&quot;+1&quot; color=&quot;Red&quot; align=&quot;center&quot;&gt;Нажмите ENTER для подтверждения&lt;/b&gt;}" fullscreen="True" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size=&quot;-2&quot;&gt;(esc) - отмена&lt;/r&gt;}&#xD;&#xA;{SelectedProduct.стрВШапкахОкон}&#xD;&#xA;{SelectedProduct.стрАлкоКороткое}&#xD;&#xA;{SelectedProduct.ЦенаСкладВводКолва}&#xD;&#xA;&lt;b size=&quot;+2&quot; align=&quot;left&quot; color=&quot;DarkGray&quot;&gt;Было: {СтрокиТекущегоТовара.CurrentQuantityInUnits:0.####} {SelectedProduct.Packing.Name}&lt;/b&gt;&#xD;&#xA;&lt;b size=&quot;+4&quot; align=&quot;left&quot; color=&quot;Black&quot;&gt;Будет: {СтрокиТекущегоТовара.CurrentQuantityInUnits + CurrentAction.Value:0.####} {SelectedProduct.Packing.Name}&lt;/b&gt;" id="1c6e3588-fb36-4d62-af65-145705979506" indent="1" name="Ввод количества" nextDirection="ПризнакСкана0" transactionNotch="False" welcomeText=""><KeyJumps count="2"><KeyToAction action="ЕслиТолькоПДФ" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="ПризнакСкана1" barcode="{any}" condition="{SelectedProduct.ВводитьДопПоля == false &amp;&amp; CurrentAction.ValueChanged==false}" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /></KeyJumps></SimpleQuantityAction><AssignAction breakPoint="False" expression="ОтсканированШК =false" id="2eceb4d4-2101-4de3-8ba3-ae88ccd7f477" indent="1" name="ПризнакСкана0" nextDirection="Запомнить АлкоСН" /><AssignAction breakPoint="False" expression="ОтсканированШК =true" id="a01fd7f6-76f8-4ff6-b15d-ac9fb48ca8d4" indent="1" name="ПризнакСкана1" nextDirection="Запись данных в док" /><ScanAction autoCloseTime="0" autoSelectSingleProduct="True" autoShowSelectionList="False" backgroundImage="" barcodeConvertion="None" barcodeSessionVariable="ScannedBarcode" breakPoint="False" cancelType="None" canManualShowProductList="True" canSelectCell="False" canSelectPallet="False" cellDirection="" errorSelectDirection="Ввод количества" fullscreen="Inherit" id="763284cf-3412-4b5a-ade6-fd1d9f8216fa" ignoreBaseBarcodes="False" ignoreQuantityPolicy="False" indent="1" name="Выбор товара по ШК" nextDirection="" notFoundErrorText="" palletDirection="" playAudioOnError="False" processSessionBarcode="True" productsListHeaderText="" quickSelectProduct="False" searchingProducts="" searchPreviousSelected="False" selectionCellNum="0" selectionCellText="" selectionFirstCellText="" selectionListFormat="{Item.товВСпискеВыбора}" selectionPalletText="" selectionSecondCellText="" selectionStorageVariable="" sucsessSelectDirection="ЗаполнимПоля" transactionNotch="False" useOnlyDocumentProducts="False" waitImage="" welcomeText="" withoutControls="False"><ExcludeClassificators count="0" /><IncludeClassificators count="0" /><KeyJumps count="1"><KeyToAction action="ОкончаниеНабораАлкоСН" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><TreeTypeIds count="0" /></ScanAction><OperationAction abortDirection="" breakPoint="False" id="ee5a1779-6503-48d3-8b8f-6720a00f345d" indent="0" name="ЗаполнимПоля" nextDirection="ЕстьЛиАлкоСтрока" operationName="ЗаполнениеДопПолейВыбранногоТовара" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" expression="ПрошлыйСН = SelectedProduct.АлкоСН" id="d02322e1-096c-4023-b67d-0461701a0184" indent="1" name="Запомнить АлкоСН" nextDirection="ЕслиНужноВводитьЦену" /><ConditionAction breakPoint="False" expression="SelectedProduct.ВводитьЦену == true" id="6ad1c66f-cf30-4a68-bdfc-8b501835b9aa" indent="1" name="ЕслиНужноВводитьЦену" nextDirection="" noDirection="ЕслиНужноВводитьНомерСтроки" yesDirection="ВводЦены" /><OperationAction abortDirection="undo" breakPoint="False" id="1b37a1b6-3b75-45cf-a860-d0ae35692d0d" indent="2" name="ВводЦены" nextDirection="ЕслиНужноВводитьНомерСтроки" operationName="ВводЦены" transactionNotch="False"><InKeys count="1"><String>SelectedProduct</String></InKeys><InValues count="1"><String>{SelectedProduct}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="SelectedProduct.ВводитьНомерСтроки == true" id="73f70b08-9664-4b05-bcda-8ee4f3a16581" indent="1" name="ЕслиНужноВводитьНомерСтроки" nextDirection="" noDirection="Запись данных в док" yesDirection="ВводНомераСтроки" /><OperationAction abortDirection="undo" breakPoint="False" id="c147ebec-5a67-4f97-bf3e-e1518039018b" indent="2" name="ВводНомераСтроки" nextDirection="Запись данных в док" operationName="ВводНомераСтрокиДокумента" transactionNotch="False"><InKeys count="1"><String>SelectedProduct</String></InKeys><InValues count="1"><String>{SelectedProduct}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><OperationAction abortDirection="ЕслиТолькоПДФ" breakPoint="False" id="4e34802b-f57a-455e-9e0e-1d5d241ac0c4" indent="0" name="Запись данных в док" nextDirection="" operationName="Занесение в документ" transactionNotch="False"><InKeys capacity="8" count="5"><String>СтрокиДляСпускаВниз</String><String>УдалятьСходящиеся</String><String>ПоДатеРозлива</String><String>НаборАлкоСерийныхНомеровЗавершен</String><String>Buffer</String></InKeys><InValues capacity="8" count="5"><String>{СтрокиТекущегоТовара}</String><String>{ПоказРасхожденийВСписке}</String><String>{Document.АлкоВводДатыРозлива}</String><String>{НаборАлкоСерийныхНомеровЗавершен}</String><String>{Buffer}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ClearSessionAction all="False" breakPoint="False" id="81e5d48a-3314-4baf-9059-606036ca0eb0" indent="0" nextDirection=""><KeyNames count="1"><String>Марка</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="SelectedProduct.АлкоМарк == false &amp;&amp; SelectedProduct.Маркировка != &quot;Алкоголь&quot; &amp;&amp; ОтсканированШК==true" id="f4a48625-d402-4a4f-9cf1-f3a637fa11be" indent="0" name="ЕслиБылОтсканированШК" nextDirection="" noDirection="" yesDirection="Выбор товара по ШК" /><AssignAction breakPoint="False" expression="сч = сч+SelectedProduct.Quantity" id="dc52dd4f-c1ed-4ae6-9b53-f70f7db547df" indent="1" name="Счётчик +1" nextDirection="" /><ConditionAction breakPoint="False" expression="ПрошлыйАлкокод == &quot;&quot;" id="e025e5e8-ff47-4fcc-aca4-5919af9afc4b" indent="1" nextDirection="" noDirection="Запомнить ЕАН" yesDirection="" /><AssignAction breakPoint="False" expression="ПрошлыйАлкокод = SelectedProduct.АлкоКод" id="5c751eeb-e70d-45b6-acda-bebb59eea760" indent="2" name="Запомнить АлкоКод" nextDirection="Запомнить ЕАН" /><AssignAction breakPoint="False" expression="ПрошлыйЕАН = SelectedProduct.ШК" id="baeee34e-089f-416a-8f0c-1998423aae7a" indent="1" name="Запомнить ЕАН" nextDirection="" /><ConditionAction breakPoint="False" comment="если не завершен список ДМ" expression="Buffer.Count &gt; 0" id="5468c919-c0d5-404e-86d8-1d61d68b87d8" indent="0" name="ПроверкаБуффера" nextDirection="" noDirection="ЕслиНовыйАлкокод" yesDirection="ЕслиПоДокументуАлкоДМ" /><ConditionAction breakPoint="False" expression="Document.АлкоРежимСканироватьEAN13 == &quot;Новый АлкоКод&quot; &amp;&amp; (SelectedProduct.АлкоМарк == 1 || SelectedProduct.Маркировка == &quot;Алкоголь&quot;)" id="da1bd9ff-59ca-41ce-8b64-29fdbac7af42" indent="0" name="ЕслиНовыйАлкокод" nextDirection="" noDirection="ЕслиТолькоПДФ_" yesDirection="ОбнулитьАлкоПДФ_" /><AssignAction breakPoint="False" expression="SelectedProduct.АлкоПДФ = &quot;&quot;" id="bf5c09f6-2061-4643-b488-1d009c9f82e9" indent="0" name="ОбнулитьАлкоПДФ_" nextDirection="НужнаЛиПроверкаЧекМарком" /><ConditionAction breakPoint="False" expression="Document.АлкоРежимСканироватьEAN13 == &quot;Не использовать&quot;" id="3941fb4e-f8cc-4bc6-a1c5-fa57fe228c59" indent="0" name="ЕслиТолькоПДФ" nextDirection="" noDirection="Прервать" yesDirection="abort" /><AssignAction breakPoint="False" expression="Scanner.EnableDefaultBarcodeTypes()" id="3132c9e5-74b7-4e6e-8a64-16078d3d774d" indent="0" name="Прервать" nextDirection="abort" /><ConditionAction breakPoint="False" expression="Document.АлкоРежимСканироватьEAN13 == &quot;Не использовать&quot;" id="d993868b-2a79-40a0-9854-d7c1aa5f4083" indent="0" name="ЕслиТолькоПДФ_" nextDirection="" noDirection="Завершить" yesDirection="return" /><AssignAction breakPoint="False" expression="Scanner.EnableDefaultBarcodeTypes()" id="daaafb8c-c06c-4ac6-b6eb-8e0ecfde14ac" indent="0" name="Завершить" nextDirection="return" /><AssignAction breakPoint="False" expression="НаборАлкоСерийныхНомеровЗавершен = true" id="1a3872db-e5ed-4613-b333-16f87594429f" indent="0" name="ЗавершитьНаборАлкоСН" nextDirection="Запись данных в док 1" /><OperationAction abortDirection="ЕслиТолькоПДФ" breakPoint="False" id="a3f06bf7-2fc8-49bf-b012-01e9cbe13b3e" indent="0" name="Запись данных в док 1" nextDirection="Запомнить АлкоКод" operationName="Занесение в документ" transactionNotch="False"><InKeys capacity="8" count="5"><String>СтрокиДляСпускаВниз</String><String>УдалятьСходящиеся</String><String>ПоДатеРозлива</String><String>НаборАлкоСерийныхНомеровЗавершен</String><String>Buffer</String></InKeys><InValues capacity="8" count="5"><String>{СтрокиТекущегоТовара}</String><String>{ПоказРасхожденийВСписке}</String><String>{Document.АлкоВводДатыРозлива}</String><String>{НаборАлкоСерийныхНомеровЗавершен}</String><String>{Buffer}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction></Actions><Parameters capacity="16" count="13"><FieldInfo alias="" eanAI="None" fieldName="SelectedProduct" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SelectedProduct" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПланИФакт" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="PlanIFakt" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПрошлыйЕАН" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ProshlyjEAN" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="сч" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="sch" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ЕстьФормыА" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="EstFormyA" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ВводЦены" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="VvodCeny" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ВводНомераСтроки" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="VvodNomeraStroki" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="КонтрольТовараБезКолич" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="KontrolTovaraBezKolich" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СтрокиПоказа" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="StrokiPokaza" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="НеСканироватьPDF" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="NeSkanirovatPDF" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СтрокаСАлкоголем" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="StrokaSAlkogolem" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ВводКолва" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="VvodKolva" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="Марка" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="Marka" valueTemplate="" /></Parameters><Returns capacity="8" count="5"><ReturnFieldInfo alias="" eanAI="None" fieldName="ИзмененныеСтрокиТовара" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="IzmenennyeStrokiTovara" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ПрошлыйЕАН" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="ProshlyjEAN" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="сч" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="sch" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ВШапку" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="VShapku" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокиПоказа" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="StrokiPokaza" valueTemplate="" /></Returns></Operation>