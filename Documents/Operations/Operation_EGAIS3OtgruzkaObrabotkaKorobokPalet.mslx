<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3 | sh | Коробки и палеты" fullscreen="Inherit" lock="AllOperations" name="ЕГАИС3 ОтгрузкаОбработкаКоробокПалет" serverHosted="True"><Actions capacity="16" count="14"><ConditionAction breakPoint="False" expression="ЭтоПалета == true" id="c4e20530-71ba-4e45-b2c6-272f8d20f05a" indent="0" nextDirection="" noDirection="7" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Уже была палета?" id="562910cc-5a23-4357-9c67-3a13b1e90227" indent="3" nextDirection="" sessionVariable="УжеБылаТакаяПалета"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиФакт}" sourceWhereExpression="" tableAlias="{Document.КоробкиФакт}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Количество &gt; 0 &amp;&amp; Item.Палета == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" comment="Уже была палета?" expression="УжеБылаТакаяПалета.Count &gt; 0" id="4becd3cf-656b-4b93-9ed7-91ffffce8b31" indent="3" nextDirection="" noDirection="9" yesDirection="" /><AssignAction breakPoint="False" expression="ПовторПалета = true" id="7c1deb74-21a8-4c68-a537-9eaa0a3d946c" indent="4" nextDirection="return" /><SelectDocumentLinesAction breakPoint="False" comment="Если сканировали палету (deprecated)" id="2ee68c07-16bc-4262-a2ae-58927631854f" indent="3" name="1" nextDirection="5" sessionVariable="ЕстьВТаблице"><Query copySelection="False" documentLines="Declared" from="{КоробкиЕГАИС}" sourceWhereExpression="" tableAlias="{КоробкиЕГАИС}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Палета == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" comment="Если сканировали палету" expression="ЕстьВТаблице = КоробкиЕГАИС.FindByField(&quot;Палета&quot;, ScannedBarcode)" id="32e564c3-97d7-4107-9f79-e61f7d583e94" indent="3" name="9" nextDirection="5" /><SelectDocumentLinesAction breakPoint="False" comment="Уже была коробка?" id="044cc8ed-6e3e-489e-b534-303ea7c042b1" indent="0" name="7" nextDirection="" sessionVariable="УжеБылаТакаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиФакт}" sourceWhereExpression="" tableAlias="{Document.КоробкиФакт}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Количество &gt; 0 &amp;&amp; Item.Коробка == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" comment="Уже была коробка?" expression="УжеБылаТакаяКоробка.Count &gt; 0" id="b3a04165-84d4-4e4c-99f1-9be525b8eb65" indent="0" nextDirection="" noDirection="8" yesDirection="" /><AssignAction breakPoint="False" expression="ПовторКоробка = true" id="2b670d88-d8ad-4b64-a672-36aaaa107c7c" indent="1" nextDirection="return" /><SelectDocumentLinesAction breakPoint="False" comment="Если сканировали коробку (deprecated)" id="5b8f6715-0804-4395-bf3c-29e8cdc5d0bd" indent="0" name="2" nextDirection="5" sessionVariable="ЕстьВТаблице"><Query copySelection="False" documentLines="Declared" from="{КоробкиЕГАИС}" sourceWhereExpression="" tableAlias="{КоробкиЕГАИС}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Коробка == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" comment="Если сканировали коробку" expression="ЕстьВТаблице = КоробкиЕГАИС.FindByField(&quot;Коробка&quot;, ScannedBarcode)" id="c8a7e8c1-dcff-4df7-8849-a5ef00c4fc13" indent="0" name="8" nextDirection="" /><ConditionAction breakPoint="False" comment="Нет на остатках?" expression="ЕстьВТаблице == null || ЕстьВТаблице.Count == 0" id="44725fea-2e91-473d-81fa-88cf96c28062" indent="0" name="5" nextDirection="" noDirection="6" yesDirection="" /><AssignAction breakPoint="False" expression="НетНаОстатках = true" id="e6d3cc61-5ba0-483c-b7f1-ccc43101f340" indent="1" nextDirection="return" /><OperationAction abortDirection="return" breakPoint="False" comment="Есть на остатках, обрабатываем" id="325f981a-1901-4e3c-a8be-f2916faa8fd3" indent="0" name="6" nextDirection="return" operationName="ЕГАИС3 ОтгрузкаОбработкаМногоСтрокНовая v2" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction></Actions><Parameters capacity="8" count="6"><FieldInfo alias="" eanAI="None" fieldName="ЭтоПалета" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="EtoPaleta" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ЭтоКоробка" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="EtoKorobka" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ScannedBarcode" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ScannedBarcode" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="Запоминаем" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="Zapominaem" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ДляЗанесения" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="DlyaZaneseniya" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ТекущийПользователь" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="TekushhijPolzovatel" valueTemplate="" /></Parameters><Returns capacity="16" count="12"><ReturnFieldInfo alias="" eanAI="None" fieldName="НетНаОстатках" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="NetNaOstatkah" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="НеПодходит" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="NePodhodit" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="Превышение" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="Prevyshenie" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="БутылокДобавлено" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="ButylokDobavleno" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ДобавленМикс" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="DobavlenMiks" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ШКМикса" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="ShKMiksa" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="БылаПалета" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="BylaPaleta" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ПовторПалета" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="PovtorPaleta" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ПовторКоробка" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="PovtorKorobka" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="УжеБылаТакаяПалета" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="UzheBylaTakayaPaleta" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="УжеБылаТакаяКоробка" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="UzheBylaTakayaKorobka" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="Запоминаем" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="Zapominaem" valueTemplate="" /></Returns></Operation>