<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3" fullscreen="Inherit" lock="No" name="ЕГАИС3 КоробкиПодбора" serverHosted="False"><Actions capacity="32" count="26"><OperationAction abortDirection="" breakPoint="False" id="1f7e8336-4bad-48b7-9a9f-d484d1946cd8" indent="0" name="1" nextDirection="" operationName="ЕГАИС3 ОтгрузкаСозданиеКоробкиПодбора" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ClearSessionAction all="False" breakPoint="False" id="1f4d407f-524e-4d77-9edc-2210f1a12a66" indent="0" name="2" nextDirection=""><KeyNames capacity="16" count="11"><String>ScannedBarcode</String><String>SelectedProduct</String><String>SelectedItem</String><String>УжеБылТакойПДФ</String><String>УжеБылаТакаяКоробка</String><String>ПроверкаУжеЕстьВКоробкеФакт</String><String>ЭтоПалета</String><String>ЭтоКоробка</String><String>ЕстьВТаблице</String><String>ПланСтрока</String><String>ПередДобавлениемКоробки</String></KeyNames></ClearSessionAction><SelectDocumentLinesAction breakPoint="False" id="470cae5c-755d-45d4-9687-1e1567170617" indent="0" nextDirection="" sessionVariable="Содержимое"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.УпакованоВ == ТекущаяКоробка.Коробка"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ItemsViewAction id="fb8ff229-07a3-40db-aa89-05157ac9b684" name="Скан ШК товаров в окне коробки" nextDirection="Скан ШК товаров в окне коробки" headerText="&lt;b size=&quot;+2&quot; align=&quot;center&quot; color=&quot;Red&quot;&gt;{MSG}&lt;/b&gt;" footerText="&lt;button direction=&quot;return&quot; width=&quot;100%&quot;&gt;Закрыть коробку&lt;/button&gt;" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="Содержимое" welcomeText="&lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;S/N {ТекущаяКоробка.Коробка} &lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;{Содержимое.Count} бут.&#xD;&#xA;&lt;b color=&quot;black&quot; size=&quot;+2&quot; align=&quot;center&quot;&gt;СКАНИРУЙТЕ БУТЫЛКИ&lt;/b&gt;&#xD;&#xA;"><KeyJumps count="2"><KeyToAction action="152 1" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="return" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="1"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.АлкоНаим == &quot;&quot;:{Item.ProductName == &quot;&quot;:Без наименования;{Item.ProductName}};{Item.АлкоНаим}}&lt;br /&gt;{Item.СкладСерия==&quot;&quot;:;{Item.СкладСерия!=&quot;any&quot;:{Item.СкладСерия:Серия: &lt;b&gt;(0)&lt;/b&gt;}&lt;br /&gt;;}}{Item.АлкоКод==&quot;&quot;:;{Item.АлкоКод!=&quot;any&quot;:{Item.АлкоКод:Код: (0)};}}" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><Query copySelection="False" documentLines="Declared" from="" sourceWhereExpression="" tableAlias="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><OperationAction abortDirection="" breakPoint="False" id="d9863890-f69d-4ce5-ab28-228ed982d74a" indent="0" name="152 1" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="5"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Pallet</String><String>Box</String></InKeys><InValues capacity="8" count="5"><String>{ScannedBarcode}</String><String>False</String><String>True</String><String>False</String><String>True</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error == true" id="3e3c0305-dcd3-4d4f-90d6-1009044ae5cc" indent="0" nextDirection="" noDirection="" yesDirection="2" /><ClearSessionAction all="False" breakPoint="False" id="1e79d578-245e-43d2-b82b-13dbc014e56f" indent="0" nextDirection=""><KeyNames count="2"><String>MSG</String><String>ErrorMessage</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="ЭтоКоробка == true" id="a3ae2a0b-446d-4d7e-8dfc-dcf4a4d9a72e" indent="0" name="36" nextDirection="" noDirection="13" yesDirection="" /><SelectDocumentLineAction breakPoint="False" comment="Уже была коробка" id="7a2e20cb-33ed-438c-b4bc-7be4cbfa4fc5" indent="1" name="3" nextDirection="" sessionVariable="УжеБылаТакаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиФакт}" sourceWhereExpression="" tableAlias="{Document.КоробкиФакт}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Количество &gt; 0 &amp;&amp; Item.Коробка == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="Уже была коробка" expression="УжеБылаТакаяКоробка != null" id="00fe2fae-e9e9-405d-9f75-f0c6d753d65e" indent="1" nextDirection="" noDirection="42" yesDirection="" /><AssignAction breakPoint="False" comment="Уже была коробка" expression="MSG = &quot;Коробка уже занесена в документ&quot;;&#xD;&#xA;GO.PlayError();" id="a20217ec-d944-4b8a-aa9a-01d3e0c4a736" indent="2" nextDirection="2" /><SelectDocumentLinesAction breakPoint="False" id="1e20ec2a-fe39-4e71-8b46-96d969069775" indent="1" name="42" nextDirection="39" sessionVariable="ЕстьВТаблице"><Query copySelection="False" documentLines="Declared" from="{КоробкиЕГАИС}" sourceWhereExpression="" tableAlias="{КоробкиЕГАИС}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Коробка == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" expression="ЕстьВТаблице.Count == 0" id="a84dacd7-09c3-4660-983e-3b862dd38e5a" indent="1" name="39" nextDirection="" noDirection="15" yesDirection="" /><ConditionAction breakPoint="False" expression="СессияКоробкиПодбора == &quot;Готовые этикетки&quot;" id="708e8903-61a8-418e-97d2-7edf743010de" indent="2" nextDirection="" noDirection="38" yesDirection="" /><AssignAction breakPoint="False" expression="Device.Vibrate(300)" id="8d36b001-3398-4d74-9855-97a0777eccaa" indent="3" nextDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Закрыть текущую, открыть новую" defaultButtonHeight="15%" fullscreen="Inherit" headerText="&lt;h2&gt;Отсканирована другая коробка &lt;b&gt;подбора&lt;/b&gt;!&lt;/h2&gt;" id="dbd77aee-94df-497b-a70e-ae696db00be2" indent="3" name="Другая коробка" nextDirection="" showAsMsgBox="True" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>1</String><String>undo</String></ButtonDirections><ButtonTexts count="2"><String>Закрыть текущую коробку 
и открыть новую</String><String>Отмена</String></ButtonTexts><KeyJumps count="0" /></QuestionAction><AssignAction breakPoint="False" expression="MSG = &quot;Нельзя сканировать неизвестную коробку. Для работы с новой коробкой подбора, сначала закройте текущую&quot;;&#xD;&#xA;GO.PlayError();" id="e8c70d1e-ffce-4087-8eae-79b1b711ee8a" indent="2" name="38" nextDirection="2" /><AssignAction breakPoint="False" expression="MSG = &quot;Нельзя класть целую коробку в коробку подбора&quot;;&#xD;&#xA;GO.PlayError();" id="4dbc8aa3-8fc2-47e2-ac27-490b69ea8a76" indent="1" name="15" nextDirection="2" /><OperationAction abortDirection="undo" breakPoint="False" comment="Обработка марки" id="58444bfd-77b4-4d11-bf81-68dc7c0da212" indent="0" name="13" nextDirection="" operationName="ЕГАИС3 ОтгрузкаОбработкаПДФ" transactionNotch="False"><InKeys count="1"><String>ТекущийПользователь</String></InKeys><InValues count="1"><String>{CurrentUser.Id}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" comment="Обработка марки" expression="ПовторМарка == true" id="6e617441-2ce1-4664-b494-97cabfb6f996" indent="0" nextDirection="" noDirection="90" yesDirection="" /><AssignAction breakPoint="False" comment="Повторное сканирование марки" expression="Device.Vibrate(300)" id="7e128f93-a432-4cfc-a749-be304e539210" indent="1" nextDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Повторное сканирование марки" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;b size=&quot;+2&quot; color=&quot;Red&quot;&gt;УДАЛЕНИЕ БУТЫЛКИ&lt;/b&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt; {УжеБылТакойПДФ.АлкоКод}&#xD;&#xA;{УжеБылТакойПДФ.АлкоНаим:(0) }{УжеБылТакойПДФ.СкладСерия}" id="eda25f8d-3bd7-4c08-948b-73843d6e3e75" indent="1" name="Удаление бутылки 1" nextDirection="" showAsMsgBox="True" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String></String><String>undo</String></ButtonDirections><ButtonTexts count="2"><String>Удалить</String><String>Отмена</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><OperationAction abortDirection="2" breakPoint="False" comment="Повторное сканирование марки" id="353f41ae-a066-4ac3-9199-3b4da8535a39" indent="1" nextDirection="2" operationName="ЕГАИС3 ОтгрузкаУдалениеБутылки" transactionNotch="False"><InKeys count="1"><String>УжеБылТакойПДФ</String></InKeys><InValues count="1"><String>{Document.ServerHosted ? null : УжеБылТакойПДФ}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" comment="Обработка марки" expression="ИгратьОшибку == true" id="e444782a-afa4-4cc1-986a-ca4fb2f58012" indent="0" name="90" nextDirection="" noDirection="СканируйтеДальше" yesDirection="" /><AssignAction breakPoint="False" comment="Обработка марки - ошибки" expression="GO.PlayError()" id="d9b6ea69-3aef-404c-b9e5-5f6f1fa971d9" indent="1" nextDirection="2" /><AssignAction breakPoint="False" expression="MSGblack = &quot;СКАНИРУЙТЕ ДАЛЬШЕ&quot;" id="ef30261f-23e9-4a24-9866-0aebbef6799a" indent="0" name="СканируйтеДальше" nextDirection="2" /></Actions><Parameters count="2"><FieldInfo alias="" eanAI="None" fieldName="ScannedBarcode" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ScannedBarcode" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СессияКоробкиПодбора" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SessiyaKorobkiPodbora" valueTemplate="" /></Parameters><Returns count="0" /></Operation>