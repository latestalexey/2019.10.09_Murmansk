<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" fullscreen="Inherit" lock="No" name="ПросмотрЦенOld" serverHosted="False"><Actions capacity="16" count="12"><ConditionAction breakPoint="False" comment="Если выбрана характеристика" expression="Поз.ИмяХарактеристики != null &amp;&amp; Поз.ИмяХарактеристики != &quot;&quot;" id="2af66816-5bad-4fab-9dce-c857efd16396" indent="0" nextDirection="" noDirection="1" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Если выбрана характеристика" id="9c44c806-7edc-44c7-91d6-9ce982fd1456" indent="1" name="15" nextDirection="" sessionVariable="ЦеныХарактеристики"><Query copySelection="False" documentLines="Declared" from="{Цены}" sourceWhereExpression="" tableAlias="{Цены}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдНоменклатуры == Поз.Product.Id &amp;&amp; Item.Характеристика == Поз.ИмяХарактеристики"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ItemsViewAction id="ac64b0b4-ab93-4e59-9d17-186da5c385c0" indent="1" name="16" nextDirection="" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;&lt;r color=&quot;Black&quot;&gt;{Поз.Product.Name} - &lt;/r&gt;&lt;r size=&quot;+2&quot; color=&quot;SteelBlue&quot;&gt;&lt;b&gt;{Поз.ИмяХарактеристики}&lt;/b&gt;&lt;/r&gt;&#xD;&#xA;" footerText="&lt;button width=&quot;100%&quot; direction=&quot;1&quot;&gt;Все цены товара&lt;/button&gt;" title="&lt;b size=&quot;+1&quot; color=&quot;SteelBlue&quot;&gt;Цены&lt;/b&gt;" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{ЦеныХарактеристики}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.ВидЦены}" leftBorder="0" rightBorder="0" topBorder="0" width="70%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Цена} {Item.Валюта}" leftBorder="0" rightBorder="0" topBorder="0" width="30%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><AssignAction breakPoint="False" expression="=&quot;&quot;" id="5b8160d2-c011-4dfc-a501-1c2eba9325f4" indent="1" nextDirection="16" /><SelectDocumentLinesAction breakPoint="False" id="53d3f3b8-e07b-403b-a5a4-87a92874be7e" indent="0" name="1" nextDirection="" sessionVariable="ЦеныНоменклатуры"><Query copySelection="False" documentLines="Declared" from="{Цены}" sourceWhereExpression="" tableAlias="{Цены}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдНоменклатуры == Поз.Product.Id"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="1"><String>Характеристика</String></SortBy><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="i = 0;&#xD;&#xA;cnt = ЦеныНоменклатуры.Count;&#xD;&#xA;res = new Cleverence.Warehouse.RowCollection();&#xD;&#xA;while(i &lt; cnt)&#xD;&#xA;{&#xD;&#xA;  if(i == 0 || ЦеныНоменклатуры[i].Характеристика != ЦеныНоменклатуры[i-1].Характеристика)&#xD;&#xA;  {&#xD;&#xA;   temp = res.AddNew();&#xD;&#xA;   temp.Заголовок = ЦеныНоменклатуры[i].Характеристика;&#xD;&#xA;  }&#xD;&#xA;res.Add(ЦеныНоменклатуры[i]);&#xD;&#xA;i = i + 1;&#xD;&#xA;}&#xD;&#xA;ЦеныНоменклатуры = res;" id="f53652b4-8c37-4052-b78f-38ba3d2a8e92" indent="0" nextDirection="17" /><SelectDocumentLinesAction breakPoint="False" id="d576732a-28c8-4f75-929b-91e55f6f6917" indent="0" name="18" nextDirection="" sessionVariable="ЦеныНоменклатурыПоХарактеристикам"><Query copySelection="False" documentLines="Declared" from="{ЦеныНоменклатуры}" sourceWhereExpression="" tableAlias="{ЦеныНоменклатуры}" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="1"><String>Характеристика</String></GroupBy><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="СтрокиДляПоказа = new Cleverence.Warehouse.RowCollection()" id="5526562d-e6b1-42c0-96f0-5909702382ff" indent="0" nextDirection="" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="2b53c8c7-120b-40f7-a46e-0c5c9453769d" indent="0" items="{ЦеныНоменклатурыПоХарактеристикам}" nextDirection="" transactionNotch="False"><Actions capacity="8" count="6"><SelectDocumentLinesAction breakPoint="False" id="355beaea-ffa8-4ef9-b867-00b1832c3f90" indent="0" nextDirection="" sessionVariable="ПоХарактеристике"><Query copySelection="False" documentLines="Declared" from="{ЦеныНоменклатуры}" sourceWhereExpression="" tableAlias="{ЦеныНоменклатуры}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Характеристика == SelectedLine.Характеристика"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" expression="ПоХарактеристике.Count&gt;1" id="03694184-bebf-4bdc-a46e-3c8b9fdb4c5c" indent="0" nextDirection="" noDirection="1" yesDirection="" /><AssignAction breakPoint="False" expression="копия = new Cleverence.Warehouse.Row();&#xD;&#xA;копия.Группа = 1;&#xD;&#xA;копия.Характеристика = SelectedLine.Характеристика;" id="4cac6841-1a3f-4c2b-974b-9f1a0ac70a33" indent="1" nextDirection="2" /><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(копия)" id="3d4fd4d8-b226-4313-82b8-a7be27be2e94" indent="1" name="2" nextDirection="" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="2c3cd963-fd5a-442d-be78-7aef75cdae84" indent="1" items="{ПоХарактеристике}" nextDirection="continue" transactionNotch="False"><Actions count="2"><AssignAction breakPoint="False" expression="SelectedLine.ВГруппе = 1" id="2b5f5eb0-fdb6-4532-a6f0-158aa742ca63" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(SelectedLine)" id="9f6fb3c5-3efa-4f1c-b832-e4f8136ccb1f" indent="0" name="1 1" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><AssignAction breakPoint="False" expression="СтрокиДляПоказа.Add(ПоХарактеристике[0])" id="73ba4566-3fc4-4cbd-be52-4a4b3098924d" indent="0" name="1" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><ItemsViewAction id="00d080d7-7869-4d9b-b60b-aa9aa10d33a4" name="17" nextDirection="" headerText="{GlobalVars.СпрятатьПомощь==True:;&lt;r size = &quot;-1&quot;&gt; esc - назад&lt;/r&gt;}&#xD;&#xA;&lt;r color=&quot;Black&quot;&gt;{Поз.Product.Name}&lt;/r&gt;" footerText="{Поз.ИмяХарактеристики != null &amp;&amp; Поз.ИмяХарактеристики != &quot;&quot;:&lt;button width=&quot;100%&quot; direction=&quot;5&quot;&gt;Цены по характеристике&lt;/button&gt;;}" title="&lt;b size=&quot;+1&quot; color=&quot;SteelBlue&quot;&gt;Цены&lt;/b&gt;" transactionNotch="True" cancelType="None" fullscreen="True" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{ЦеныНоменклатуры}" welcomeText=""><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="2"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="&lt;b align=&quot;right&quot;&gt;{Item.Заголовок}&lt;/b&gt;{Item.ВидЦены}&#xD;&#xA;" leftBorder="0" rightBorder="0" topBorder="0" width="70%" /><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Цена} {Item.Валюта}" leftBorder="0" rightBorder="0" topBorder="0" width="30%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><AssignAction breakPoint="False" expression="=&quot;&quot;" id="3b0a7431-bfdf-4b31-a9bd-65eb7c0eb04a" indent="0" nextDirection="17" /><ClearSessionAction all="False" breakPoint="False" id="e240a24f-652c-4491-9388-171857e31948" indent="0" name="5" nextDirection="15"><KeyNames capacity="8" count="5"><String>СтрокиДляПоказа</String><String>ЦеныНоменклатуры</String><String>ЦеныНоменклатурыПоХарактеристикам</String><String>ЦеныХарактеристики</String><String>копия</String></KeyNames></ClearSessionAction></Actions><Parameters count="1"><FieldInfo alias="" eanAI="None" fieldName="Поз" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="Poz" valueTemplate="" /></Parameters><Returns count="0" /></Operation>