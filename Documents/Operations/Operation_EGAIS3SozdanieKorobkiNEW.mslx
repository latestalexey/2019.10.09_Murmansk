<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3 | sh" fullscreen="Inherit" lock="AllOperations" name="ЕГАИС3 СозданиеКоробкиNEW" serverHosted="True"><Actions capacity="64" count="35"><ConditionAction breakPoint="False" expression="КоробкаУжеЕсть != null" id="ac5f41e4-4324-4ea9-ba19-54b246bc858c" indent="0" nextDirection="" noDirection="" yesDirection="81" /><SelectDocumentLineAction breakPoint="False" id="af65de31-e6ee-4522-99f4-3c83625de1ee" indent="0" name="64 1" nextDirection="" sessionVariable="КоробкаУжеЕсть"><Query copySelection="False" documentLines="Declared" from="Document.Коробки" sourceWhereExpression="" tableAlias="Document.Коробки" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="КоробкаУжеЕсть != null" id="e7fef7fd-e869-40be-a805-c56d8f3533e1" indent="0" name="81" nextDirection="" noDirection="34" yesDirection="" /><AssignAction breakPoint="False" expression="ПоследняяКоробка = КоробкаУжеЕсть" id="29076cb8-837e-4c74-81b2-5c9e33e78be9" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="СессияРежимРаботы == 3" id="00bea4ce-ff99-450d-b49d-6829c05ea34b" indent="1" nextDirection="" noDirection="75" yesDirection="" /><ConditionAction breakPoint="False" expression="КоробкаУжеЕсть.Статус == &quot;&quot;" id="6e77c489-ede0-4886-8c20-a4dbcd0b9fd5" indent="2" nextDirection="" noDirection="76" yesDirection="80" /><AssignAction breakPoint="False" comment="Режим 3" expression="ПовторныйСканКоробки = true" id="553b22f5-2eaa-44af-913e-9afdee027965" indent="4" name="76" nextDirection="return" /><ConditionAction breakPoint="False" expression="КоробкаУжеЕсть.НоменклатураИд != &quot;&quot;" id="9584e617-9049-45f2-b1e1-639c438ea910" indent="2" name="80" nextDirection="" noDirection="77" yesDirection="" /><AssignAction breakPoint="False" comment="Режим 3" expression="НужнаяСтрока = Document.КоробкиВНоменклатуре.FindFirstByField(&quot;НоменклатураИд&quot;, КоробкаУжеЕсть.НоменклатураИд)" id="d9d8a20c-bca5-41eb-8e40-e5ae321863cb" indent="3" name="77 1" nextDirection="79" /><AssignAction breakPoint="False" comment="Режим 3" expression="НужнаяСтрока = Document.КоробкиВНоменклатуре.FindFirstByField(&quot;Номенклатура&quot;, КоробкаУжеЕсть.Номенклатура)" id="b558bd02-44ea-4902-9f9d-3dbad999deca" indent="2" name="77" nextDirection="79" /><AssignAction breakPoint="False" comment="Режим 3" expression="НужнаяСтрока.Факт = НужнаяСтрока.Факт + 1" id="82309bb5-5d38-4559-9228-039b52ab73bb" indent="2" name="79" nextDirection="78" /><ConditionAction breakPoint="False" expression="Document.ServerHosted != true" id="07520cfe-f3e9-46bb-bf33-42cf2e7b9460" indent="2" name="78" nextDirection="" noDirection="75" yesDirection="" /><OperationAction abortDirection="" breakPoint="False" id="d9d32527-ba5e-499e-bd23-037811a64743" indent="3" nextDirection="" operationName="ЕГАИС3 ПоднимаемСтроку" transactionNotch="False"><InKeys count="2"><String>Строка</String><String>СтрокиПоказа</String></InKeys><InValues count="2"><String>{НужнаяСтрока}</String><String>{СтрокиНоменклатура}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" expression="Обновили = true" id="9068f531-a6c2-41cf-b79f-c50cfc26788b" indent="3" nextDirection="" /><AssignAction breakPoint="False" expression="КоробкаУжеЕсть.РодительФакт = ИдРодителя" id="93ba2fd4-52a7-45db-92a1-85d7e7e334f8" indent="1" name="75" nextDirection="" /><ConditionAction breakPoint="False" expression="КоробкаУжеЕсть.РодительФакт == КоробкаУжеЕсть.РодительПлан" id="f8da5b70-a90b-4bf9-919e-3ea769812715" indent="2" nextDirection="" noDirection="67" yesDirection="63 1" /><AssignAction breakPoint="False" expression="КоробкаУжеЕсть.Статус = &quot;ненаместе&quot;" id="0fd954a2-cf59-44c0-b969-ed6065fdabb5" indent="3" name="67" nextDirection="70" /><AssignAction breakPoint="False" expression="КоробкаУжеЕсть.Статус = &quot;ок&quot;" id="c2667b42-6b7a-4cbe-a145-369819b155cb" indent="3" name="63 1" nextDirection="70" /><ConditionAction breakPoint="False" comment="Автостатус" expression="СессияРежимРаботы == 3" id="687f16a5-6a0f-4677-91ba-ffef33d7ad4e" indent="4" name="70" nextDirection="" noDirection="" yesDirection="Завершение 1 1 1" /><AssignAction breakPoint="False" expression="КоробкаУжеЕсть.Внутри = &quot;непроверено&quot;;&#xD;&#xA;КоробкаУжеЕсть.ЗанесениеПользовательИд = ТекущийПользователь;&#xD;&#xA;КоробкаУжеЕсть.ЗанесениеДата = CurrentDate;" id="f383455d-3fd1-4221-99f5-bfef9f1ec9b1" indent="5" name="Завершение 1 1" nextDirection="return" /><AssignAction breakPoint="False" comment="Режим 3" expression="КоробкаУжеЕсть.Внутри = &quot;ок&quot;;&#xD;&#xA;КоробкаУжеЕсть.ЗанесениеПользовательИд = ТекущийПользователь;&#xD;&#xA;КоробкаУжеЕсть.ЗанесениеДата = CurrentDate;" id="00163802-e574-4614-baa4-bc024f443f9b" indent="5" name="Завершение 1 1 1" nextDirection="return" /><AssignAction breakPoint="False" comment="Создание коробки" expression="НовСтрока = Document.Коробки.AddNew();&#xD;&#xA;НовСтрока.Ид = ScannedBarcode;&#xD;&#xA;НовСтрока.СерийныйНомерКоробки = Коды.Отображение;" id="fbd99220-2f38-45d8-afc4-ef0b542ddcd7" indent="0" name="34" nextDirection="" /><AssignAction breakPoint="False" expression="ПоследняяКоробка = НовСтрока" id="fd1bc2bc-5565-49ca-ae37-c76a551a85a1" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="НовСтрока.Внутри = &quot;непроверено&quot;;&#xD;&#xA;НовСтрока.ЗанесениеПользовательИд = ТекущийПользователь;&#xD;&#xA;НовСтрока.ЗанесениеДата = CurrentDate;" id="d345dc38-e352-4ea2-b255-cda6108c02bc" indent="0" name="Завершение 1" nextDirection="" /><ConditionAction breakPoint="False" comment="// было &quot;if (Document.РежимРаботы ==3)&quot;" expression="СессияРежимРаботы != 4 &amp;&amp; Document.CreatedOnPDA != true" id="db185471-9f5e-4fd4-9640-ff0985376882" indent="0" nextDirection="" noDirection="71" yesDirection="" /><AssignAction breakPoint="False" expression="НовСтрока.Внутри = &quot;ошибки&quot;" id="7b38c37f-7fb7-4aa3-921f-a39df849ac83" indent="1" name="Завершение 1 2" nextDirection="" /><AssignAction breakPoint="False" expression="НовСтрока.Номенклатура = &quot;Нет в накладной&quot;;&#xD;&#xA;НовСтрока.УжеПроверено = true;" id="d9a640d8-d142-4779-a2fb-198e9db85958" indent="1" nextDirection="" /><AssignAction breakPoint="False" expression="НужнаяСтрока = Document.КоробкиВНоменклатуре.FindFirstByField(&quot;Номенклатура&quot;, НовСтрока.Номенклатура)" id="2666358a-e6ea-4efc-bfc8-4543d7204292" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="НужнаяСтрока != null" id="bafc60eb-1c19-4abc-9e0d-35811bb3a123" indent="1" nextDirection="" noDirection="" yesDirection="73" /><AssignAction breakPoint="False" expression="НовНом = Document.КоробкиВНоменклатуре.AddNew();&#xD;&#xA;НовНом.Номенклатура = &quot;Нет в накладной&quot;;&#xD;&#xA;НовНом.Факт = 1;" id="ca3a076b-fb4c-4891-bce8-f5c44f2f5728" indent="2" name="72" nextDirection="71" /><AssignAction breakPoint="False" expression="НужнаяСтрока.Факт = НужнаяСтрока.Факт + 1" id="39ecbecd-3835-4f10-adad-ef4c12eb208b" indent="1" name="73" nextDirection="" /><ConditionAction breakPoint="False" expression="Коды != null" id="0f004543-3a64-4e7e-9bfa-b938172fb2da" indent="0" name="71" nextDirection="" noDirection="68" yesDirection="" /><AssignAction breakPoint="False" comment="Здесь Проверку на паллету/коробку" expression="НовСтрока.Товар = Коды.Товар;&#xD;&#xA;НовСтрока.Количество = Коды.Количество;&#xD;&#xA;НовСтрока.Партия = Коды.Партия;&#xD;&#xA;НовСтрока.СН = Коды.СН;&#xD;&#xA;НовСтрока.ЭтоПалета = Коды.ЭтоПалета;" id="df69aab3-2bea-40eb-a6b5-45d24a498cb0" indent="1" nextDirection="68" /><AssignAction breakPoint="False" expression="НовСтрока.Статус = &quot;новая&quot;" id="0413f9a4-144d-49b0-9246-562f687cbdeb" indent="0" name="68" nextDirection="" /><AssignAction breakPoint="False" expression="НовСтрока.РодительФакт = ИдРодителя" id="a4392bf6-da19-438d-9ded-a214e6b30ad6" indent="0" name="Завершение" nextDirection="return" /></Actions><Parameters capacity="8" count="8"><FieldInfo alias="" eanAI="None" fieldName="Коды" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="Kody" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="Сгенерировано" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="Sgenerirovano" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ИдРодителя" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="IdRoditelya" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ScannedBarcode" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ScannedBarcode" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СтрокиНоменклатура" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="StrokiNomenklatura" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="СессияРежимРаботы" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SessiyaRezhimRaboty" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ТекущийПользователь" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="TekushhijPolzovatel" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="КоробкаУжеЕсть" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="KorobkaUzheEst" valueTemplate="" /></Parameters><Returns count="4"><ReturnFieldInfo alias="" eanAI="None" fieldName="Сгенерировано" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="Sgenerirovano" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ПовторныйСканКоробки" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="PovtornyjSkanKorobki" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="Обновили" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="Obnovili" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ПоследняяКоробка" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="False" uni="PoslednyayaKorobka" valueTemplate="" /></Returns></Operation>