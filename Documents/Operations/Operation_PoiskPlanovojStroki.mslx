<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="sh" fullscreen="Inherit" lock="No" name="ПоискПлановойСтроки" serverHosted="True"><Actions capacity="16" count="15"><SelectDocumentLinesAction breakPoint="False" comment="//работает" id="f8d06e5e-7af7-4add-8a81-05832608c960" indent="0" name="ПоискВЗаявке 1" nextDirection="" sessionVariable="СтрокиТекущегоТовара"><Query copySelection="False" documentLines="Declared" from="{SelectedProduct.Product.DeclaredItems}" sourceWhereExpression="" tableAlias="{Document.DeclaredItems}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдХарактеристики==SelectedProduct.ИдХарактеристики &amp;&amp; Item.ИдСерии==SelectedProduct.ИдСерии"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="if (SelectedProduct.Марка != &quot;&quot;)&#xD;&#xA;СтрокаТекущегоТовара = Document.DeclaredItems.FindFirstByField(&quot;Марка&quot;,SelectedProduct.Марка);" id="b1ffb052-e2e2-4b3d-8c74-ee7a56aa1deb" indent="0" nextDirection="" /><ConditionAction breakPoint="False" expression="СтрокаТекущегоТовара != null" id="17bd9884-d1e4-43f5-8110-9d9daa3d49c0" indent="0" nextDirection="" noDirection="" yesDirection="return" /><ConditionAction breakPoint="False" expression="SelectedProduct.Product.ПоСериям == true &amp;&amp; СтрокиТекущегоТовара.Count == 0" id="2ee16038-aa78-488e-871c-f74e9865382d" indent="0" name="68" nextDirection="" noDirection="ЕслиВыгрузкаПоЯчейкам" yesDirection="ПоискВЗаявкеБезСерий 1" /><SelectDocumentLinesAction breakPoint="False" comment="//работает" id="82592c03-4235-468b-b314-e98e0be1744a" indent="1" name="ПоискВЗаявкеБезСерий 1" nextDirection="ЕслиВыгрузкаПоЯчейкам" sessionVariable="СтрокиТекущегоТовара"><Query copySelection="False" documentLines="Declared" from="{SelectedProduct.Product.DeclaredItems}" sourceWhereExpression="" tableAlias="{Document.DeclaredItems}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдХарактеристики==SelectedProduct.ИдХарактеристики &amp;&amp; Item.ИдСерии == &quot;&quot;"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" expression="FirstStorage != null &amp;&amp; СтрокиТекущегоТовара.Count != 0 &amp;&amp; СтрокиТекущегоТовара[0].FirstStorageId != null " id="6e0431a6-7de7-4aca-b7d2-73c8e8afe54c" indent="0" name="ЕслиВыгрузкаПоЯчейкам" nextDirection="" noDirection="70" yesDirection="63" /><AssignAction breakPoint="False" expression="СтрокиПоЯчейке=СтрокиТекущегоТовара.FindByFirstCellIdWithCommon(FirstStorage.Id);&#xD;&#xA;if(СтрокиПоЯчейке.Count != 0)&#xD;&#xA;СтрокиТекущегоТовара = СтрокиПоЯчейке;" id="046134ae-9c6d-4c78-887d-b7483305971d" indent="1" name="63" nextDirection="" /><ConditionAction breakPoint="False" expression="СтрокиТекущегоТовара.Count != 0" id="11d21735-df5c-4e92-836a-8d3d7eb22f85" indent="0" name="70" nextDirection="" noDirection="69" yesDirection="" /><AssignAction breakPoint="False" expression="строкиПоУпаковке = СтрокиТекущегоТовара.FindByField(&quot;PackingId&quot;, SelectedProduct.Packing.Id)" id="c5566edb-9083-4d7f-8147-ed9d49640086" indent="1" nextDirection="" /><ConditionAction breakPoint="False" expression="строкиПоУпаковке != null &amp;&amp; строкиПоУпаковке.Count != 0" id="868a1864-ebbd-4ce0-b0f7-7c02e6c1fc40" indent="0" name="69" nextDirection="" noDirection="62" yesDirection="" /><AssignAction breakPoint="False" expression="СтрокиТекущегоТовара = строкиПоУпаковке" id="81d7c949-239a-4e12-8f3d-b27079df9652" indent="1" nextDirection="62" /><AssignAction breakPoint="False" comment="// пропущено, разбито на действия" expression="if(СтрокиТекущегоТовара.Count != 0)&#xD;&#xA;{строкиПоУпаковке = СтрокиТекущегоТовара.FindByField(&quot;PackingId&quot;, SelectedProduct.Packing.Id);}&#xD;&#xA;else &#xD;&#xA;{строкиПоУпаковке  = null;}&#xD;&#xA;if(строкиПоУпаковке != null &amp;&amp; строкиПоУпаковке.Count != 0)&#xD;&#xA;{СтрокиТекущегоТовара = строкиПоУпаковке;}" id="27b9b077-aa13-4808-b881-acc2ddefe143" indent="0" name="ВыбратьСтрокиПоУпаковке" nextDirection="62" /><ConditionAction breakPoint="False" expression="СтрокиТекущегоТовара.Count &gt; 0" id="c39f4b35-980c-471c-9017-da58a962822e" indent="0" name="62" nextDirection="" noDirection="22" yesDirection="" /><AssignAction breakPoint="False" expression="СтрокаТекущегоТовара = СтрокиТекущегоТовара[0]" id="b31da4cf-e0b4-43df-b676-b4c4011c09d2" indent="1" nextDirection="return" /><AssignAction breakPoint="False" expression="СтрокаТекущегоТовара = null" id="bbdfb78a-a54c-4ef0-bbff-eabb7a6b1091" indent="0" name="22" nextDirection="return" /></Actions><Parameters count="2"><FieldInfo alias="" eanAI="None" fieldName="SelectedProduct" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SelectedProduct" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="FirstStorage" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="FirstStorage" valueTemplate="" /></Parameters><Returns count="2"><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокаТекущегоТовара" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="StrokaTekushhegoTovara" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокиТекущегоТовара" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="StrokiTekushhegoTovara" valueTemplate="" /></Returns></Operation>