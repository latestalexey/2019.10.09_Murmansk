<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="Ищет данные о составе палеты/коробки/блока и записывает содержимое в факт" fullscreen="Inherit" lock="No" name="МОТП ПереносОбъектаВФакт" serverHosted="False"><Actions capacity="64" count="47"><AssignAction breakPoint="False" expression="ПроверкаВФактическихСтроках = new Cleverence.Warehouse.DocumentItemCollection();" id="6436bc9e-11fd-48cf-b03c-671f23178473" indent="0" nextDirection="" /><ConditionAction breakPoint="False" expression="ПроверятьПлановыеСтроки == true" id="41bc197e-8809-4277-be69-3cbbd1cea1d8" indent="0" nextDirection="" noDirection="8" yesDirection="" /><ConditionAction breakPoint="False" comment="Поиск содержимого в плане" expression="ЭтоПалета == true" id="8899d403-8506-4599-a66a-0370b556549c" indent="1" nextDirection="" noDirection="3" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Поиск содержимого в плане" id="05c69dfc-b918-4105-9189-3cc566022c73" indent="2" nextDirection="5" sessionVariable="СоставОбъекта"><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.SSCC == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" comment="Поиск содержимого в плане" expression="ЭтоКоробка == true" id="65438bf5-76df-4a76-aa79-039b888a996d" indent="1" name="3" nextDirection="" noDirection="4" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Поиск содержимого в плане" id="4a6e0188-13f3-4b86-b4a5-422362c294ab" indent="2" nextDirection="5" sessionVariable="СоставОбъекта"><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдКоробки == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" comment="Поиск содержимого в плане" expression="ЭтоБлок == true" id="7da5cea4-e071-47f1-947a-8c6aa3ed4ecf" indent="1" name="4" nextDirection="" noDirection="8" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Поиск содержимого в плане" id="0e0ad8e2-dfd7-4831-96f9-b7ac13bbaca9" indent="2" nextDirection="5" sessionVariable="СоставОбъекта"><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ИдБлока == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" expression="СоставОбъекта.Count == 0" id="513fb09b-ae28-422a-a15c-27b7a03c5e22" indent="1" name="5" nextDirection="" noDirection="6" yesDirection="" /><ConditionAction breakPoint="False" expression="ПроверятьОстатки == true" id="4126f0ac-d67e-4577-a293-9fb1452364bb" indent="1" name="8" nextDirection="" noDirection="2" yesDirection="" /><ConditionAction breakPoint="False" comment="Поиск содержимого на остатках по сканированию палеты или коробки" expression="ЭтоПалета == true || ЭтоКоробка == true" id="0c093ee8-85ab-476e-b874-a9868612e402" indent="2" nextDirection="" noDirection="4 1" yesDirection="" /><AssignAction breakPoint="False" comment="Поиск палеты/коробки и ее содержимого" expression="Упаковка = ТранспортныеУпаковки.FindFirstByField(&quot;ШтрихкодТранспортнойУпаковки&quot;, ScannedBarcode)&#xD;&#xA;if (Упаковка != null)&#xD;&#xA;{&#xD;&#xA;ОстаткиСамогоОбъекта = Остатки.FindByField(&quot;ИдТранспортнойУпаковки&quot;, Упаковка.ИдТранспортнойУпаковки);&#xD;&#xA;ДетиУпаковки = ТранспортныеУпаковки.FindByField(&quot;ИдРодителя&quot;,Упаковка.ИдТранспортнойУпаковки);&#xD;&#xA;}" id="8f28e4c5-17e6-4df8-9610-d9be7ddd3e91" indent="3" nextDirection="" /><ConditionAction breakPoint="False" expression="ДетиУпаковки.Count &gt; 0" id="4fb0b7bb-2ddb-471c-be21-d1c9f84f8d6d" indent="3" nextDirection="" noDirection="" yesDirection="" /><AssignAction breakPoint="False" comment="Создание доп коллекций и добавление первых значений из первой выборки" expression="СписокУпаковок = new Cleverence.Warehouse.RowCollection();&#xD;&#xA;СоставОбъектаВСправочнике = new Cleverence.Warehouse.RowCollection();&#xD;&#xA;СоставОбъектаВСправочнике.AddRange(ОстаткиСамогоОбъекта);&#xD;&#xA;СписокУпаковок.Add(Упаковка);&#xD;&#xA;СписокУпаковок.AddRange(ДетиУпаковки);&#xD;&#xA;i = 1;&#xD;&#xA;u = 1;" id="cb85f7d3-e153-4ee9-9f07-c7b4c1b6c838" indent="3" nextDirection="" /><AssignAction breakPoint="False" comment="Сбор всех участвующих транспортных упаковок" expression="while (i &lt; СписокУпаковок.Count)&#xD;&#xA;{&#xD;&#xA;ДетиУпаковки = ТранспортныеУпаковки.FindByField(&quot;ИдРодителя&quot;,СписокУпаковок[i].ИдТранспортнойУпаковки);&#xD;&#xA;СписокУпаковок.AddRange(ДетиУпаковки);&#xD;&#xA;i = i + 1;&#xD;&#xA;}" id="6a9e65a3-6802-42d3-8f5f-26ca9f4c0201" indent="3" nextDirection="" /><AssignAction breakPoint="False" comment="Сбор остатков по всем участвующим транспортным упаковкам" expression="while (u &lt; СписокУпаковок.Count)&#xD;&#xA;{&#xD;&#xA;СоставУпаковки = Остатки.FindByField(&quot;ИдТранспортнойУпаковки&quot;, СписокУпаковок[u].ИдТранспортнойУпаковки);&#xD;&#xA;СоставУпаковки.ШтрихкодТранспортнойУпаковки = СписокУпаковок[u].ШтрихкодТранспортнойУпаковки;&#xD;&#xA;СоставОбъектаВСправочнике.AddRange(СоставУпаковки);&#xD;&#xA;u = u + 1;&#xD;&#xA;}" id="57357d0d-610e-42b2-a8c5-fad6573618e6" indent="3" nextDirection="" /><ConditionAction breakPoint="False" expression="СоставОбъектаВСправочнике == null || СоставОбъектаВСправочнике.Count == 0" id="7e04bf3e-24df-430f-a8fc-c6c0c091a01e" indent="3" nextDirection="" noDirection="" yesDirection="2" /><ConditionAction breakPoint="False" expression="Document.CurrentItems.Count == 0" id="13f99e53-7dd8-4368-ab09-b494dbf9253e" indent="3" nextDirection="" noDirection="" yesDirection="1 1 1" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" comment="Проверка всех конечных марок - есть ли в факте? и сбор их в коллекцию для удаления" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="97107521-8108-4746-b7f7-11490430a786" indent="3" items="{СоставОбъектаВСправочнике}" name="Проверка в факте" nextDirection="" transactionNotch="False"><Actions count="3"><AssignAction breakPoint="False" expression="ПоискМаркиВФакте = Document.CurrentItems.FindFirstByField(&quot;Марка&quot;, SelectedLine.Марка);" id="6c1d03d7-7db8-4d5d-83a8-353215bd55b1" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="if (ПоискМаркиВФакте != null)&#xD;&#xA;ПроверкаВФактическихСтроках.Add(ПоискМаркиВФакте);" id="73554fd5-f28e-4395-9d06-d9bd869063fe" indent="0" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="e86239b2-08cc-435a-8f37-fb85c6ee5a6d" indent="0" nextDirection=""><KeyNames count="1"><String>ПоискМаркиВФакте</String></KeyNames></ClearSessionAction></Actions><LockObjects count="0" /></ForeachAction><ConditionAction breakPoint="False" expression="ПроверкаВФактическихСтроках.Count &gt; 0" id="14e18292-216f-4ddf-92c1-0fc77c816647" indent="3" nextDirection="" noDirection="1 1 1" yesDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Табак" defaultButtonHeight="0 px" fullscreen="Inherit" id="bf9cdd74-2a79-4731-a008-59e1fd830795" indent="3" name="Пачки из этой палеты/коробки уже сканировались" nextDirection="" showAsMsgBox="True" transactionNotch="False" welcomeText="Позиции из этой {ЭтоПалета == true:палеты;коробки} уже заносились!"><ButtonDirections count="3"><String>120 1</String><String></String><String>abort</String></ButtonDirections><ButtonTexts count="3"><String>Удалить</String><String>Занести целиком</String><String>Отмена</String></ButtonTexts><KeyJumps count="0" /></QuestionAction><AssignAction breakPoint="False" comment="Табак" expression="СПолнымЗанесением = true" id="afb68472-29f5-4a17-9881-a09131237e66" indent="4" nextDirection="" /><RemoveDocumentLineAction breakPoint="False" comment="Табак" id="d691b024-cd91-4b81-ae2c-e197abf00efa" indent="4" name="120 1" nextDirection="" packing="" quantity="" quantityErrorDirection="" sessionVariable="ПроверкаВФактическихСтроках" /><ConditionAction breakPoint="False" expression="СПолнымЗанесением == true" id="ebfb0aaf-e8a4-4d9c-8c0a-6a01cb06eb69" indent="4" nextDirection="" noDirection="return" yesDirection="" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" comment="Сбор буфера" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="4a7e4013-dda9-49fa-bf89-bb3fe5a5a98c" indent="3" items="{СоставОбъектаВСправочнике}" name="1 1 1" nextDirection="9 1" transactionNotch="False"><Actions capacity="8" count="6"><ClearSessionAction all="False" breakPoint="False" id="0f1d8def-107e-487e-8760-6c8903b7e68f" indent="0" nextDirection=""><KeyNames count="1"><String>SelectedProduct</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" expression="SelectedProduct = global::Cleverence.Warehouse.ProductsManager.FindById(SelectedLine.ИдТовара).Pack(SelectedLine.ИдЕдиницыИзмерения, SelectedLine.КоличествоВНаличии)" id="70cf49ad-8cde-40ac-89b2-d0879eda6823" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="if (SelectedProduct == null)&#xD;&#xA;{SelectedProduct = UnknownProduct.Pack(SelectedLine.ИдЕдиницыИзмерения, SelectedLine.КоличествоВНаличии);}&#xD;&#xA;SelectedProduct.Марка = SelectedLine.Марка;&#xD;&#xA;SelectedProduct.ШтрихкодРодителя = SelectedLine.ИдТранспортнойУпаковки;&#xD;&#xA;SelectedProduct.ИдРодителя = SelectedLine.ШтрихкодТранспортнойУпаковки;&#xD;&#xA;SelectedProduct.ИдКоробки = ТекущаяКоробка;&#xD;&#xA;SelectedProduct.SSCC = ТекущаяПалета.Barcode;" id="cd26821f-7cb4-4d83-9fa6-2df67ab299b9" indent="0" nextDirection="" /><ConditionAction breakPoint="False" expression="Document.CreatedOnPDA == true" id="a665f0c1-11d8-41dc-8f2e-8f9adee83b30" indent="0" nextDirection="" noDirection="1" yesDirection="" /><FillBufferAction breakPoint="False" bufferName="" checkQuantity="False" combineItems="False" errorQuantityMessage="Товара больше, чем разрешает документ." fillWithRemains="False" id="92b845f7-d1a5-4692-9c0b-4696129a3134" ignoreFieldsInDocument="False" indent="1" nextDirection="continue" noProductErrorDirection="return" noProductInDocumentMessage="Такой товар отсутствует в документе." quantityErrorDirection="return" useSelectedLine="False"><ComparingFieldNames count="1"><String>ИдХарактеристики</String></ComparingFieldNames></FillBufferAction><FillBufferAction breakPoint="False" bufferName="" checkQuantity="True" combineItems="False" errorQuantityMessage="Товара больше, чем разрешает документ." fillWithRemains="False" id="813af1f7-e573-4a25-8a40-678be9221178" ignoreFieldsInDocument="False" indent="0" name="1" nextDirection="continue" noProductErrorDirection="return" noProductInDocumentMessage="Такой товар отсутствует в документе." quantityErrorDirection="return" useSelectedLine="False"><ComparingFieldNames count="1"><String>ИдХарактеристики</String></ComparingFieldNames></FillBufferAction></Actions><LockObjects count="0" /></ForeachAction><ConditionAction breakPoint="False" comment="Поиск содержимого на остатках" expression="ЭтоБлок == true" id="3f773aed-ca04-4910-a22b-e94064bfa0a7" indent="2" name="4 1" nextDirection="" noDirection="2" yesDirection="" /><AssignAction breakPoint="False" expression="Упаковка = ТранспортныеУпаковки.FindFirstByField(&quot;ШтрихкодТранспортнойУпаковки&quot;, ScannedBarcode)&#xD;&#xA;if (Упаковка != null)&#xD;&#xA;{&#xD;&#xA;СоставОбъектаВСправочнике = Остатки.FindByField(&quot;ИдТранспортнойУпаковки&quot;, Упаковка.ИдТранспортнойУпаковки)&#xD;&#xA;}" id="b6dbd0d4-01d8-471f-962a-c6b4d0869edb" indent="3" nextDirection="" /><ConditionAction breakPoint="False" expression="СоставОбъектаВСправочнике == null || СоставОбъектаВСправочнике.Count == 0" id="a002b23e-7bdb-4761-a649-d1830b0670ab" indent="3" nextDirection="" noDirection="" yesDirection="2" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" comment="Проверка всех конечных марок - есть ли в факте? и сбор их в коллекцию для удаления" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="f0faad9a-aba5-4562-88db-12530c41a634" indent="3" items="{СоставОбъектаВСправочнике}" name="Проверка в факте 1" nextDirection="" transactionNotch="False"><Actions count="3"><AssignAction breakPoint="False" expression="ПоискМаркиВФакте = Document.CurrentItems.FindFirstByField(&quot;Марка&quot;,SelectedLine.Марка);" id="da1c76ad-4ab2-4ac3-8025-86ac49fd65d8" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="if (ПоискМаркиВФакте != null)&#xD;&#xA;ПроверкаВФактическихСтроках.Add(ПоискМаркиВФакте);" id="3494bb7f-0314-4514-9120-39de4030fe36" indent="0" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="1bd3a11a-b620-4055-aa63-2b0f4c1cc859" indent="0" nextDirection=""><KeyNames count="1"><String>ПоискМаркиВФакте</String></KeyNames></ClearSessionAction></Actions><LockObjects count="0" /></ForeachAction><ConditionAction breakPoint="False" expression="ПроверкаВФактическихСтроках.Count &gt; 0" id="03e26837-4585-4e48-94b1-b7a874b17c94" indent="3" nextDirection="" noDirection="1 1" yesDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Табак" defaultButtonHeight="0 px" fullscreen="Inherit" id="32c3c944-9d13-47e1-bbf3-6dbf71e09c2f" indent="3" name="Пачки из этого блока уже сканировались 1" nextDirection="" showAsMsgBox="True" transactionNotch="False" welcomeText="Позиции из этого блока уже заносились!"><ButtonDirections count="3"><String>120 1 1</String><String></String><String>abort</String></ButtonDirections><ButtonTexts count="3"><String>Удалить</String><String>Занести целиком</String><String>Отмена</String></ButtonTexts><KeyJumps count="0" /></QuestionAction><AssignAction breakPoint="False" comment="Табак" expression="СПолнымЗанесением = true" id="d4c537e6-8a7b-4011-83e3-54c7160e6179" indent="4" nextDirection="" /><RemoveDocumentLineAction breakPoint="False" comment="Табак" id="bd46939e-cdc4-46c1-8a1c-5cac2950809b" indent="4" name="120 1 1" nextDirection="" packing="" quantity="" quantityErrorDirection="" sessionVariable="ПроверкаВФактическихСтроках" /><ConditionAction breakPoint="False" expression="СПолнымЗанесением == true" id="dbd636fd-bb84-4fa7-b5a6-92b8cb5036a2" indent="4" nextDirection="" noDirection="return" yesDirection="" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" comment="Сбор буфера" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="1c59a3c6-efa0-4c22-ac46-a1bdab4b53e8" indent="3" items="{СоставОбъектаВСправочнике}" name="1 1" nextDirection="" transactionNotch="False"><Actions capacity="8" count="6"><ClearSessionAction all="False" breakPoint="False" id="6bf95b3a-66b7-44de-909d-a29fc900282c" indent="0" nextDirection=""><KeyNames count="1"><String>SelectedProduct</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" expression="SelectedProduct = global::Cleverence.Warehouse.ProductsManager.FindById(SelectedLine.ИдТовара).Pack(SelectedLine.ИдЕдиницыИзмерения, SelectedLine.КоличествоВНаличии);" id="9f21f20d-3ae8-41ff-bd5d-66021a6de03d" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="if (SelectedProduct == null)&#xD;&#xA;{SelectedProduct = UnknownProduct.Pack(SelectedLine.ИдЕдиницыИзмерения, SelectedLine.КоличествоВНаличии);}&#xD;&#xA;SelectedProduct.Марка = SelectedLine.Марка;&#xD;&#xA;SelectedProduct.ШтрихкодРодителя = ScannedBarcode;&#xD;&#xA;SelectedProduct.ИдКоробки = ТекущаяКоробка;&#xD;&#xA;SelectedProduct.SSCC = ТекущаяПалета.Barcode;" id="dd1b2f4c-7ccb-4c74-aa8d-3e4bf9afc96f" indent="0" nextDirection="" /><ConditionAction breakPoint="False" expression="Document.CreatedOnPDA == true" id="52fbb7ef-bd18-49cf-a77d-3c15c47d5a6e" indent="0" nextDirection="" noDirection="1" yesDirection="" /><FillBufferAction breakPoint="False" bufferName="" checkQuantity="False" combineItems="False" errorQuantityMessage="Товара больше, чем разрешает документ." fillWithRemains="False" id="83e18ab0-d5a1-4c38-a842-adad1371a86f" ignoreFieldsInDocument="False" indent="1" nextDirection="continue" noProductErrorDirection="return" noProductInDocumentMessage="Такой товар отсутствует в документе." quantityErrorDirection="return" useSelectedLine="False"><ComparingFieldNames count="1"><String>ИдХарактеристики</String></ComparingFieldNames></FillBufferAction><FillBufferAction breakPoint="False" bufferName="" checkQuantity="True" combineItems="False" errorQuantityMessage="Товара больше, чем разрешает документ." fillWithRemains="False" id="dbbc9a70-16e0-43e1-96f8-90347a5de62a" ignoreFieldsInDocument="False" indent="0" name="1" nextDirection="continue" noProductErrorDirection="return" noProductInDocumentMessage="Такой товар отсутствует в документе." quantityErrorDirection="return" useSelectedLine="False"><ComparingFieldNames count="1"><String>ИдХарактеристики</String></ComparingFieldNames></FillBufferAction></Actions><LockObjects count="0" /></ForeachAction><AcceptBufferAction breakPoint="False" checkDocumentInfill="False" combineEqualCurrentItems="False" id="a6a4765a-380c-450d-bcd3-f0fb90cafc2d" ignoreFieldsInDeclaredItems="False" indent="3" name="9 1" nextDirection="11" onlyInCurrentItems="False"><ComparingFieldNames count="1"><String>ИдХарактеристики</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems count="0" /></AcceptBufferAction><ConditionAction breakPoint="False" expression="СоставОбъекта.Count == 0" id="7475971a-166c-4bb7-bb0a-d0e131664f45" indent="2" name="5 1" nextDirection="" noDirection="6" yesDirection="" /><AssignAction breakPoint="False" expression="НетИнформацииОСоставеОбъекта = true" id="5c11bf1d-21e4-41a2-9467-771986ac0b0f" indent="3" name="2" nextDirection="return" /><ConditionAction breakPoint="False" expression="ЭтоКоробка == true" id="7ca8b85f-4aba-48ff-8093-6c78fc33f410" indent="0" name="6" nextDirection="" noDirection="7" yesDirection="" /><ConditionAction breakPoint="False" comment="Если мы заносим коробку, но ее плановая палета не совпадает с текущей" expression="СоставОбъекта[0].SSCC != ТекущаяПалета" id="b10c23a0-fd33-470b-9738-59059e30c26d" indent="1" nextDirection="" noDirection="1" yesDirection="Не совпадают родители с плановыми" /><ConditionAction breakPoint="False" expression="ЭтоБлок == true" id="3973cea7-89d9-464c-9b42-7f8fed789ab8" indent="0" name="7" nextDirection="" noDirection="1" yesDirection="" /><ConditionAction breakPoint="False" comment="Если мы заносим блок, но его плановая палета или коробка не совпадает с текущей" expression="СоставОбъекта[0].SSCC != ТекущаяПалета || СоставОбъекта[0].ИдКоробки != ТекущаяКоробка" id="fbe92207-1074-40df-ba05-aacf10db1acc" indent="1" nextDirection="" noDirection="1" yesDirection="Не совпадают родители с плановыми" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" defaultButtonHeight="0 px" fullscreen="Inherit" id="fbb85eb3-df4c-474d-949e-d0cc5af490ca" indent="0" name="Не совпадают родители с плановыми" nextDirection="" showAsMsgBox="True" transactionNotch="True" welcomeText="{ЭтоКоробка == true:Эта коробка по плану находится в другой палете!;Этот блок по плану находится в другой палете или коробке!}"><ButtonDirections count="2"><String>1</String><String>abort</String></ButtonDirections><ButtonTexts count="2"><String>Все равно занести</String><String>Отмена</String></ButtonTexts><KeyJumps count="0" /></QuestionAction><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="9d52e93a-294d-4e28-a1a3-379c808f2ed7" indent="0" items="{СоставОбъекта}" name="1" nextDirection="" transactionNotch="False"><Actions count="2"><AssignAction breakPoint="False" expression="SelectedProduct = SelectedLine.Product.Pack();&#xD;&#xA;SelectedProduct.CurrentQuantity = SelectedLine.DeclaredQuantity;&#xD;&#xA;SelectedProduct.Марка = SelectedLine.Марка;&#xD;&#xA;SelectedProduct.ШтрихкодРодителя = SelectedLine.ШтрихкодРодителя;&#xD;&#xA;SelectedProduct.КодСтроки = SelectedLine.КодСтроки;&#xD;&#xA;SelectedProduct.Справка2 = SelectedLine.Справка2;&#xD;&#xA;SelectedProduct.ДокументОснования = SelectedLine.ДокументОснования;&#xD;&#xA;SelectedProduct.Качество = SelectedLine.Качество;&#xD;&#xA;SelectedProduct.ИдЕдиницыИзмерения = SelectedLine.ИдЕдиницыИзмерения;&#xD;&#xA;if (ТекущаяКоробка != &quot;&quot;)&#xD;&#xA;SelectedProduct.ИдКоробки = ТекущаяКоробка;&#xD;&#xA;else&#xD;&#xA;SelectedProduct.ИдКоробки = SelectedLine.ИдКоробки;&#xD;&#xA;if (ТекущаяПалета != null)&#xD;&#xA;SelectedProduct.SSCC = ТекущаяПалета.Barcode;&#xD;&#xA;else&#xD;&#xA;SelectedProduct.SSCC = SelectedLine.SSCC;" id="e2832fdd-bbff-4bcb-8c94-2befd9bd5d7f" indent="0" nextDirection="" /><FillBufferAction breakPoint="False" bufferName="" checkQuantity="False" combineItems="False" errorQuantityMessage="Товара больше, чем разрешает документ." fillWithRemains="False" id="ab1b10db-664c-45e3-922c-cc3faf81587e" ignoreFieldsInDocument="False" indent="0" nextDirection="" noProductErrorDirection="return" noProductInDocumentMessage="Такой товар отсутствует в документе." quantityErrorDirection="return" useSelectedLine="False"><ComparingFieldNames count="0" /></FillBufferAction></Actions><LockObjects count="0" /></ForeachAction><AcceptBufferAction breakPoint="False" checkDocumentInfill="False" combineEqualCurrentItems="False" id="58081e5e-6370-4a87-aff6-2dd3b2dda1e6" ignoreFieldsInDeclaredItems="False" indent="0" name="9" nextDirection="" onlyInCurrentItems="False"><ComparingFieldNames count="1"><String>Марка</String></ComparingFieldNames><ComparingFieldNamesForCurrentItems count="0" /></AcceptBufferAction><ConditionAction breakPoint="False" expression="LastChangedCurrentItems != null" id="422e1c47-d06e-4dcf-ac3c-a5d13414f090" indent="0" name="11" nextDirection="" noDirection="return" yesDirection="return" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" comment="// Пропущено" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="4da21f2a-f345-4531-be88-72e0fcdbdb1d" indent="0" items="{LastChangedCurrentItems}" name="10" nextDirection="" transactionNotch="False"><Actions count="1"><AssignAction breakPoint="False" expression="SelectedLine.КодСтроки = BindedLine.КодСтроки;&#xD;&#xA;SelectedLine.Справка2 = BindedLine.Справка2;&#xD;&#xA;SelectedLine.ДокументОснования = BindedLine.ДокументОснования;&#xD;&#xA;SelectedLine.Качество = BindedLine.Качество;" id="54540dd2-550e-42d6-8250-a634de0783bb" indent="0" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction></Actions><Parameters capacity="8" count="8"><FieldInfo alias="" eanAI="None" fieldName="ScannedBarcode" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ScannedBarcode" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ТекущаяКоробка" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="TekushhayaKorobka" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ТекущаяПалета" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="TekushhayaPaleta" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ЭтоПалета" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="EtoPaleta" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ЭтоКоробка" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="EtoKorobka" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ЭтоБлок" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="EtoBlok" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПроверятьПлановыеСтроки" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ProveryatPlanovyeStroki" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ПроверятьОстатки" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ProveryatOstatki" valueTemplate="" /></Parameters><Returns count="1"><ReturnFieldInfo alias="" eanAI="None" fieldName="НетИнформацииОСоставеОбъекта" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="NetInformaciiOSostaveObekta" valueTemplate="" /></Returns></Operation>