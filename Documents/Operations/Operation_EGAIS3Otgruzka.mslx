<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3" fullscreen="Inherit" lock="No" name="ЕГАИС3 Отгрузка" serverHosted="False"><Actions capacity="128" count="67"><ConditionAction breakPoint="False" expression="Document.ServerHosted == true" id="f6f75a4a-cf64-46f9-905a-6593a335cd84" indent="0" nextDirection="" noDirection="82" yesDirection="" /><AssignAction breakPoint="False" expression="СтрокиПоказа = Document.DeclaredItems" id="6b24c26a-94cb-4912-ad52-3366f83ee775" indent="1" nextDirection="81" /><AssignAction breakPoint="False" expression="СтрокиПоказа = new Cleverence.Warehouse.DocumentItemCollection(Document.DeclaredItems)" id="2c811c91-3296-4817-9fd5-a0233f3ca189" indent="0" name="82" nextDirection="" /><AssignAction breakPoint="False" expression="MSGblack = &quot;СКАНИРУЙТЕ КОРОБКУ ИЛИ БУТЫЛКУ&quot;" id="fc05cda6-5559-4dff-8846-1b222272af72" indent="0" name="81" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="75c1977f-4aad-4baf-9c08-79a57b651054" indent="0" name="Обновить" nextDirection=""><KeyNames capacity="32" count="23"><String>ScannedBarcode</String><String>SelectedItem</String><String>УжеБылТакойПДФ</String><String>УжеБылаТакаяКоробка</String><String>ПроверкаУжеЕстьВКоробкеФакт</String><String>ЭтоПалета</String><String>ЭтоКоробка</String><String>ПередДобавлениемКоробки</String><String>Выбрали</String><String>УжеЗаведенаКоробкаПодбора</String><String>КоробкиФактПоСтрокеПлана</String><String>БутылкиФактПоСтрокеПлана</String><String>ГруппируемБутылки</String><String>БутылкиФактИзКоробокПодбора</String><String>КоробкиПодбораФакт</String><String>УжеБылаТакаяПалета</String><String>БутылкиИзЭтойКоробкиПодбора</String><String>УдаляемМикс</String><String>ИгратьОшибку</String><String>Запоминаем</String><String>ДляЗанесения</String><String>НетНаОстатках</String><String>Запоминаем</String></KeyNames></ClearSessionAction><ItemsViewAction id="e5ac4d1c-0769-49a3-8083-e55f96d7f675" name="ПЛАНФАКТ" nextDirection="71" headerText="&lt;b color=&quot;Red&quot; size=&quot;+2&quot;&gt;{MSG}&lt;/b&gt;&#xD;&#xA;&lt;r color=&quot;black&quot;&gt;{ДобавленаБутылка == true:Отсканировано: &lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt; {ЕстьВТаблице.АлкоКод}&#xD;&#xA;{ЕстьВТаблице.АлкоНаим:(0) }{ЕстьВТаблице.СкладСерия};}&#xD;&#xA;{ДобавленаКоробка == true:Отсканировано: &lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {ЕстьВТаблице.Коробка}&#xD;&#xA;{ЕстьВТаблице.АлкоНаим:(0) }{ЕстьВТаблице.СкладСерия}, &lt;b&gt;{ЕстьВТаблице.Количество} (бут.)&lt;/b&gt;;}&#xD;&#xA;{ДобавленМикс == true:Отсканировано: {БылаПалета == true:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt;;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;} {ШКМикса}&#xD;&#xA;&lt;b&gt;{БутылокДобавлено} (бут.)&lt;/b&gt;;}&lt;/r&gt;" footerText="{Document.КнопкаПоказ == true:&lt;button width=&quot;100%&quot; height=&quot;15%&quot; direction=&quot;Ген1&quot;&gt;Новая коробка&lt;/button&gt;;}" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{СтрокиПоказа}" welcomeText="&lt;b color=&quot;black&quot; size=&quot;+2&quot; align=&quot;center&quot;&gt;{MSGblack}&lt;/b&gt;&#xD;&#xA;&lt;r align=&quot;center&quot; size=&quot;-1&quot;&gt;(для удаления сканируйте повторно)&lt;/r&gt;"><KeyJumps count="3"><KeyToAction action="return" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="152 1" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="Обновить" barcode="" condition="" foreColor="#00000000" key="F5" modifiers="None" viewType="ButtonInHeader" visible="{Document.ServerHosted}" /></KeyJumps><Columns count="3"><ItemsColumn align="MiddleLeft" allBorder="0" backColor="White" bottomBorder="0" format="&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;{Item.АлкоНаим == &quot;&quot;:{Item.ProductName == &quot;&quot;:Без наименования;{Item.ProductName}};{Item.АлкоНаим}}&lt;br /&gt;{Item.СкладСерия==&quot;&quot;:;{Item.СкладСерия!=&quot;any&quot;:{Item.СкладСерия:Серия: &lt;b&gt;(0)&lt;/b&gt;}&lt;br /&gt;;}}{Item.АлкоКод==&quot;&quot;:;{Item.АлкоКод!=&quot;any&quot;:{Item.АлкоКод:Код: (0)};}}, &lt;b&gt;(бут.)&lt;/b&gt;" leftBorder="0" rightBorder="0" title="Номенклатура" topBorder="0" width="60%" /><ItemsColumn align="MiddleCenter" allBorder="0" backColor="White" bottomBorder="0" format="&lt;h2&gt;{Item.DeclaredQuantity:0.###}&lt;/h2&gt;" leftBorder="0" rightBorder="0" title="План" topBorder="0" width="20%" /><ItemsColumn align="MiddleRight" allBorder="0" backColor="White" bottomBorder="0" format="&lt;h2&gt;{Document.CreatedOnPDA == false:{Item.UnderloadedOrOverloaded == false:&lt;r color=&quot;Green&quot;&gt;OK&lt;/r&gt;;{Item.CurrentQuantity != 0:&lt;r color=&quot;Red&quot;&gt;{Item.CurrentQuantity:0.###}&lt;/r&gt;;0}};{Item.CurrentQuantity:0.###}}&lt;/h2&gt;" leftBorder="0" rightBorder="0" title="Факт" topBorder="0" width="20%" /></Columns><Query copySelection="False" documentLines="Declared" from="" sourceWhereExpression="" tableAlias="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><OperationAction abortDirection="" breakPoint="False" id="4a0e725f-3b82-4d04-bace-cb45ff3943b1" indent="0" name="152 1" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="5"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Pallet</String><String>Box</String></InKeys><InValues capacity="8" count="5"><String>{ScannedBarcode}</String><String>False</String><String>True</String><String>True</String><String>True</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error == true" id="fe402319-4f60-40b3-8b38-0704d3c166cb" indent="0" nextDirection="" noDirection="" yesDirection="Обновить" /><ClearSessionAction all="False" breakPoint="False" id="2944f33d-73cb-4e17-8f2a-a6f0d6b22f8f" indent="0" nextDirection=""><KeyNames capacity="32" count="17"><String>MSG</String><String>ErrorMessage</String><String>ДобавленаБутылка</String><String>ДобавленаКоробка</String><String>ДобавленМикс</String><String>БутылокДобавлено</String><String>БылаПалета</String><String>ШКМикса</String><String>ПланСтрока</String><String>ЕстьВТаблице</String><String>SelectedProduct</String><String>КоробкаДляЗанесения</String><String>НеПодходит</String><String>Превышение</String><String>ПовторКоробка</String><String>ПовторПалета</String><String>ПовторМарка</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="ЭтоКоробка == false &amp;&amp; ЭтоПалета == false" id="3cad2d1c-c2c5-42c2-aa20-ca5926ae6053" indent="0" name="36" nextDirection="" noDirection="" yesDirection="13" /><AssignAction breakPoint="False" comment="Коробки/палеты" expression="Запоминаем = new Cleverence.Warehouse.RowCollection();&#xD;&#xA;ДляЗанесения = new Cleverence.Warehouse.RowCollection();" id="c7a1cb85-b519-45f4-ac3b-e51568426996" indent="0" name="86" nextDirection="" /><OperationAction abortDirection="" breakPoint="False" comment="Коробки/палеты" id="75cb1227-d17a-476d-bb3b-f513704ecad4" indent="0" nextDirection="" operationName="ЕГАИС3 ОтгрузкаОбработкаКоробокПалет" transactionNotch="False"><InKeys count="1"><String>ТекущийПользователь</String></InKeys><InValues count="1"><String>{CurrentUser.Id}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="ПовторПалета == true" id="cf55b8d4-9023-4f4c-be78-ac550dcf0be5" indent="0" nextDirection="" noDirection="89" yesDirection="2 1 1 1" /><AssignAction breakPoint="False" comment="Повторное сканирование палеты" expression="MSG = &quot;Коробки с этой палеты уже занесены в документ&quot;;&#xD;&#xA;GO.PlayError();" id="890b71ba-e8d0-40d8-8e6f-fdc3dd1358a1" indent="1" name="2 1 1 1" nextDirection="Обновить" /><ConditionAction breakPoint="False" expression="ПовторКоробка == true" id="cbf04721-9b25-47b6-b36b-2c23ea2c2ff9" indent="0" name="89" nextDirection="" noDirection="88" yesDirection="" /><AssignAction breakPoint="False" comment="Повторное сканирование коробки" expression="Device.Vibrate(300)" id="56f77256-a64b-4ae9-af48-5239c2ed28be" indent="1" nextDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Повторное сканирование коробки" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;b size=&quot;+2&quot; color=&quot;Red&quot;&gt;УДАЛЕНИЕ КОРОБКИ&lt;/b&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {УжеБылаТакаяКоробка[0].Коробка}&#xD;&#xA;{УжеБылаТакаяКоробка.Count == 1:{УжеБылаТакаяКоробка[0].АлкоНаим:(0) }{УжеБылаТакаяКоробка[0].СкладСерия};}&#xD;&#xA;" id="e4c5e532-7137-4e0c-ba83-75b542190bc9" indent="1" name="Удаление коробки" nextDirection="" showAsMsgBox="True" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String></String><String>undo</String></ButtonDirections><ButtonTexts count="2"><String>Удалить</String><String>Отмена</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><ConditionAction breakPoint="False" comment="Повторное сканирование коробки" expression="УжеБылаТакаяКоробка.Count == 1" id="861a94bb-e4c1-4fdb-9b06-dc7ea2f056b5" indent="1" name="80" nextDirection="" noDirection="" yesDirection="83" /><AssignAction breakPoint="False" comment="Повторное сканирование коробки" expression="УдаляемМикс = true" id="e297dd95-9737-46ee-9116-bc66b81eeae6" indent="2" nextDirection="" /><OperationAction abortDirection="Обновить" breakPoint="False" comment="Повторное сканирование коробки" id="32a5df55-7348-4e34-83ff-eb91a3f1997d" indent="2" name="83" nextDirection="Обновить" operationName="ЕГАИС3 ОтгрузкаУдалениеКоробки" transactionNotch="False"><InKeys count="1"><String>УжеБылаТакаяКоробка</String></InKeys><InValues count="1"><String>{Document.ServerHosted ? null : УжеБылаТакаяКоробка}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="НетНаОстатках == true" id="00b28ff9-bc62-475e-91e1-57aff4bc3f73" indent="0" name="88" nextDirection="" noDirection="87" yesDirection="" /><ConditionAction breakPoint="False" comment="Нет на остатках" expression="СессияКоробкиПодбора == &quot;Готовые этикетки&quot; &amp;&amp; ЭтоКоробка == true" id="538d9327-1191-480c-812e-d434a80934bf" indent="1" nextDirection="" noDirection="38" yesDirection="" /><OperationAction abortDirection="" breakPoint="False" comment="Нет на остатках" id="6a2e0c82-ea24-487f-9b30-3ce80bee1ffa" indent="2" name="43" nextDirection="Обновить" operationName="ЕГАИС3 КоробкиПодбора" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" comment="Коробки/палеты - ошибки" expression="GO.PlayError();&#xD;&#xA;if (ЭтоКоробка == true)&#xD;&#xA;{MSG = &quot;Коробка не найдена в таблицах остатков&quot;;}&#xD;&#xA;else&#xD;&#xA;{MSG = &quot;Палета не найдена в таблицах остатков&quot;;}" id="3cb9bdb0-60e7-4fe5-ac00-61e8478499f4" indent="1" name="38" nextDirection="Обновить" /><ConditionAction breakPoint="False" comment="Коробки/палеты - ошибки" expression="НеПодходит == true" id="d207058d-cb45-4b31-a699-06e25bee7c34" indent="0" name="87" nextDirection="" noDirection="СканируйтеДальше" yesDirection="" /><ClearSessionAction all="False" breakPoint="False" comment="Коробки/палеты - ошибки" id="dc14c343-23f1-46b0-bb1c-9d63c5a92380" indent="1" nextDirection=""><KeyNames count="1"><String>НеПодходит</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" comment="Коробки/палеты - ошибки" expression="Превышение == true" id="015698ba-0779-464c-88b8-667a6363f40e" indent="1" nextDirection="" noDirection="2 1" yesDirection="" /><ClearSessionAction all="False" breakPoint="False" comment="Коробки/палеты - ошибки" id="5ace35e8-f18f-465b-87f2-9cdf3155499a" indent="2" nextDirection=""><KeyNames count="1"><String>Превышение</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" comment="Коробки/палеты - ошибки" expression="MSG = &quot;Превышение количества&quot;;&#xD;&#xA;GO.PlayError();" id="1f6a6cfe-5f4c-4866-8ff1-0e3d41abd8f4" indent="2" name="2 1 1" nextDirection="Обновить" /><AssignAction breakPoint="False" comment="Коробки/палеты - ошибки" expression="MSG = &quot;Не подходит по заданию&quot;;&#xD;&#xA;GO.PlayError();" id="d4b6afa4-23a6-4cea-82ff-39ee5d2f3fbb" indent="1" name="2 1" nextDirection="Обновить" /><OperationAction abortDirection="undo" breakPoint="False" comment="Печать" id="7b632a08-2b14-488b-9dcd-deb1c7ba5ed6" indent="0" name="Ген1" nextDirection="67" operationName="ЕГАИС3 ВременннаяКоробка" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="1"><String>ScannedBarcode</String></OutKeys><OutValues count="1"><String>ScannedBarcode</String></OutValues></OperationAction><OperationAction abortDirection="undo" breakPoint="False" comment="Печать" id="88477ba3-70c7-4a23-80cb-4a3842989188" indent="0" name="67" nextDirection="43" operationName="ЕГАИС3 Печать 3" transactionNotch="False"><InKeys count="2"><String>ШКПередан</String><String>PrintTemp</String></InKeys><InValues count="2"><String>"Ген"</String><String>Box</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><OperationAction abortDirection="undo" breakPoint="False" comment="Обработка марки" id="383044ea-8056-4eb1-ab7f-36c1620dc1f6" indent="0" name="13" nextDirection="" operationName="ЕГАИС3 ОтгрузкаОбработкаПДФ" transactionNotch="False"><InKeys count="1"><String>ТекущийПользователь</String></InKeys><InValues count="1"><String>{CurrentUser.Id}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" comment="Обработка марки" expression="ПовторМарка == true" id="2a0b1d5c-c720-40ed-b909-ca7d03b12731" indent="0" nextDirection="" noDirection="90" yesDirection="" /><AssignAction breakPoint="False" comment="Повторное сканирование марки" expression="Device.Vibrate(300)" id="c8a3591e-48ad-490f-a361-41bd769fef8d" indent="1" nextDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Повторное сканирование марки" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;b size=&quot;+2&quot; color=&quot;Red&quot;&gt;УДАЛЕНИЕ БУТЫЛКИ&lt;/b&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt; {УжеБылТакойПДФ.АлкоКод}&#xD;&#xA;{УжеБылТакойПДФ.АлкоНаим:(0) }{УжеБылТакойПДФ.СкладСерия}" id="aa7da9b5-6005-4bb4-bc19-f487a0a35764" indent="1" name="Удаление бутылки 1" nextDirection="" showAsMsgBox="True" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String></String><String>undo</String></ButtonDirections><ButtonTexts count="2"><String>Удалить</String><String>Отмена</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><OperationAction abortDirection="Обновить" breakPoint="False" comment="Повторное сканирование марки" id="d6c31f42-b05c-4da8-99b3-328c147eb09e" indent="1" nextDirection="Обновить" operationName="ЕГАИС3 ОтгрузкаУдалениеБутылки" transactionNotch="False"><InKeys count="1"><String>УжеБылТакойПДФ</String></InKeys><InValues count="1"><String>{Document.ServerHosted ? null : УжеБылТакойПДФ}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" comment="Обработка марки" expression="ИгратьОшибку == true" id="02b57eb1-cd63-4865-8fe4-d32af39b94e2" indent="0" name="90" nextDirection="" noDirection="СканируйтеДальше" yesDirection="" /><AssignAction breakPoint="False" comment="Обработка марки - ошибки" expression="GO.PlayError()" id="3290bb74-7602-46b0-81a7-4c1f54bf4ec0" indent="1" nextDirection="Обновить" /><AssignAction breakPoint="False" expression="Выбрали = SelectedItem" id="1a008082-19e6-472a-99c5-d988284a4983" indent="0" name="71" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="ba066474-12db-4030-a339-d821435e5b34" indent="0" nextDirection=""><KeyNames count="1"><String>MSG</String></KeyNames></ClearSessionAction><SelectDocumentLinesAction breakPoint="False" id="e3e97ff7-da7d-4ff7-9681-1c73fcad8b62" indent="0" name="68" nextDirection="" sessionVariable="КоробкиФактПоСтрокеПлана"><Query copySelection="False" documentLines="Declared" from="Document.КоробкиФакт" sourceWhereExpression="" tableAlias="Document.КоробкиФакт" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ПланСтрокаИд == Выбрали.Uid"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><SelectDocumentLinesAction breakPoint="False" id="da9b2f18-19c9-405f-a0a9-1ec40e1e8ac3" indent="0" nextDirection="" sessionVariable="БутылкиФактПоСтрокеПлана"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ПланСтрокаИд == Выбрали.Uid &amp;&amp; Item.УпакованоВ == null"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><SelectDocumentLinesAction breakPoint="False" id="5c0b574f-bca7-4b72-9328-515199be7b44" indent="0" name="69" nextDirection="" sessionVariable="ГруппируемБутылки"><Query copySelection="False" documentLines="Declared" from="БутылкиФактПоСтрокеПлана" sourceWhereExpression="" tableAlias="БутылкиФактПоСтрокеПлана" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="1"><String>КодНоменклатуры</String></GroupBy><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><SelectDocumentLinesAction breakPoint="False" id="b2046a71-9662-4453-84f5-9cf40bbebfd5" indent="0" nextDirection="" sessionVariable="БутылкиФактИзКоробокПодбора"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ПланСтрокаИд == Выбрали.Uid &amp;&amp; Item.УпакованоВ != null"><Fields count="0" /><GroupBy count="1"><String>УпакованоВ</String></GroupBy><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="ФактКоллекция = new Cleverence.Warehouse.HybridCollection();&#xD;&#xA;ФактКоллекция.AddCollection(КоробкиФактПоСтрокеПлана);&#xD;&#xA;ФактКоллекция.AddCollection(БутылкиФактИзКоробокПодбора);&#xD;&#xA;ФактКоллекция.AddCollection(ГруппируемБутылки);" id="e52446f8-1b00-4e78-8248-a4c420f9c4e8" indent="0" nextDirection="" /><ItemsViewAction id="7f626dad-7f3e-4550-a257-a082082ca5f1" name="ФАКТ" nextDirection="ФАКТ" headerText="&lt;b color=&quot;Red&quot; size=&quot;+2&quot;&gt;{MSG}&lt;/b&gt;&#xD;&#xA;&lt;r color=&quot;black&quot; align=&quot;right&quot;&gt;{КоробкиФактПоСтрокеПлана.Количество + БутылкиФактИзКоробокПодбора.CurrentQuantity &gt; 0:Набрано {КоробкиФактПоСтрокеПлана.Количество + БутылкиФактИзКоробокПодбора.CurrentQuantity} &lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt; в {КоробкиФактПоСтрокеПлана.Count + БутылкиФактИзКоробокПодбора.Count} &lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;;}&#xD;&#xA;{БутылкиФактПоСтрокеПлана.CurrentQuantity &gt; 0:Набрано {БутылкиФактПоСтрокеПлана.CurrentQuantity} &lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt; без коробок;}&lt;/r&gt;" footerText="" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{ФактКоллекция}" welcomeText="&lt;b color=&quot;black&quot; size=&quot;+2&quot; align=&quot;center&quot;&gt;ПРОСМОТР НАБРАННОГО&lt;/b&gt;&#xD;&#xA;&lt;r align=&quot;center&quot; size=&quot;-1&quot;&gt;для работы вернитесь на основной экран&lt;/r&gt;&#xD;&#xA;&lt;r align=&quot;center&quot; size=&quot;-1&quot;&gt;(для удаления сканируйте повторно)&lt;/r&gt;"><KeyJumps count="2"><KeyToAction action="Обновить" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="73" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="2"><ItemsColumn align="MiddleLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.УпакованоВ != &quot;&quot;:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {Item.УпакованоВ}&lt;br /&gt;&lt;crimson&gt;Коробка подбора&lt;/crimson&gt;;{Item.Количество != null:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {Item.Коробка}&lt;br /&gt;;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt; }{Item.АлкоНаим==&quot;&quot;:Без наименования&lt;br /&gt;;{Item.АлкоНаим!=&quot;any&quot;:{Item.АлкоНаим}&lt;br /&gt;;}}{Item.СкладСерия==&quot;&quot;:Без серии&lt;br /&gt;;{Item.СкладСерия!=&quot;any&quot;:{Item.СкладСерия:Серия: &lt;b&gt;(0)&lt;/b&gt;}&lt;br /&gt;;}}{Item.АлкоКод==&quot;&quot;:Без кода&lt;br /&gt;;{Item.АлкоКод!=&quot;any&quot;:{Item.АлкоКод:Код: (0)};}}}" leftBorder="0" rightBorder="0" title="Номенклатура" topBorder="0" width="80%" /><ItemsColumn align="MiddleCenter" allBorder="0" backColor="White" bottomBorder="0" format="&lt;h2&gt;{Item.Количество}{Item.CurrentQuantity}&lt;/h2&gt;" leftBorder="0" rightBorder="0" title="Факт" topBorder="0" width="20%" /></Columns><Query copySelection="False" documentLines="Declared" from="" sourceWhereExpression="" tableAlias="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><ClearSessionAction all="False" breakPoint="False" id="72f773d3-e6f2-4714-b938-49c16f4cc079" indent="0" name="73" nextDirection=""><KeyNames capacity="8" count="6"><String>MSG</String><String>УдаляемМикс</String><String>Коды</String><String>ЭтоПалета</String><String>ЭтоКоробка</String><String>Error</String></KeyNames></ClearSessionAction><OperationAction abortDirection="" breakPoint="False" id="b3747375-afd2-4127-bc12-ccfa87e61489" indent="0" name="152 1 1" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="5"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Pallet</String><String>Box</String></InKeys><InValues capacity="8" count="5"><String>{ScannedBarcode}</String><String>False</String><String>True</String><String>False</String><String>True</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error == true" id="f80ab4ca-02bd-4961-8050-81293c0baeda" indent="0" nextDirection="" noDirection="36 1" yesDirection="73 1" /><ClearSessionAction all="False" breakPoint="False" id="0d463ed7-72f5-45e6-a06b-9d1380a994f7" indent="1" name="73 1" nextDirection="ФАКТ"><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="ЭтоКоробка == true" id="0d53c4c9-b7b9-4d20-8433-2aa6bdfc71f7" indent="0" name="36 1" nextDirection="" noDirection="70" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Уже была коробка?" id="8bd28eab-daaf-40e5-8356-e4184be7dfee" indent="1" nextDirection="" sessionVariable="УжеБылаТакаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиФакт}" sourceWhereExpression="" tableAlias="{Document.КоробкиФакт}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Количество &gt; 0 &amp;&amp; Item.Коробка == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" comment="Уже была коробка?" expression="УжеБылаТакаяКоробка.Count &gt; 0" id="29e2fc68-84c4-445e-9fd2-b6771b2b2281" indent="1" nextDirection="" noDirection="72" yesDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Коробка была. Удаляем?" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;b size=&quot;+2&quot; color=&quot;Red&quot;&gt;УДАЛЕНИЕ КОРОБКИ&lt;/b&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {УжеБылаТакаяКоробка[0].Коробка}&#xD;&#xA;{УжеБылаТакаяКоробка.Count == 1:{УжеБылаТакаяКоробка[0].АлкоНаим:(0) }{УжеБылаТакаяКоробка[0].СкладСерия};}&#xD;&#xA;" id="95549b79-1474-4585-8339-adba0f634f3b" indent="2" name="Удаление коробки 1" nextDirection="" showAsMsgBox="True" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String></String><String>undo</String></ButtonDirections><ButtonTexts count="2"><String>Удалить</String><String>Отмена</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><ConditionAction breakPoint="False" comment="Просто коробка или микс?" expression="УжеБылаТакаяКоробка.Count == 1" id="d1c281a9-3327-48ab-a177-51654caf2440" indent="2" name="80 1" nextDirection="" noDirection="" yesDirection="84" /><AssignAction breakPoint="False" expression="УдаляемМикс = true" id="7772344a-dbff-456c-a201-ea988b24f410" indent="3" nextDirection="" /><OperationAction abortDirection="68" breakPoint="False" id="285fa072-219e-4573-ad5e-bfde7817b6f4" indent="2" name="84" nextDirection="68" operationName="ЕГАИС3 ОтгрузкаУдалениеКоробки" transactionNotch="False"><InKeys count="1"><String>УжеБылаТакаяКоробка</String></InKeys><InValues count="1"><String>{Document.ServerHosted ? null : УжеБылаТакаяКоробка}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" comment="Уже был" expression="УжеБылТакойПДФ = Document.CurrentItems.FindFirstByField(&quot;АлкоПДФ&quot;, ScannedBarcode)" id="bab17798-8530-4b3f-9afc-0584b48589c5" indent="0" name="70" nextDirection="" /><ConditionAction breakPoint="False" comment="Уже был" expression="УжеБылТакойПДФ != null" id="750d6a1d-9d77-4eb5-804c-e1256c16d2c8" indent="0" nextDirection="" noDirection="72" yesDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;b size=&quot;+2&quot; color=&quot;Red&quot;&gt;УДАЛЕНИЕ БУТЫЛКИ&lt;/b&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt; {УжеБылТакойПДФ.АлкоКод}&#xD;&#xA;{УжеБылТакойПДФ.АлкоНаим:(0) }{УжеБылТакойПДФ.СкладСерия}" id="4f7798a9-b037-40f4-aa7a-1f0bb19dceef" indent="1" name="Удаление бутылки" nextDirection="" showAsMsgBox="False" transactionNotch="False" welcomeText=""><ButtonDirections count="2"><String></String><String>undo</String></ButtonDirections><ButtonTexts count="2"><String>Удалить</String><String>Отмена</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><OperationAction abortDirection="undo" breakPoint="False" comment="Удаление" id="f02f3e56-0a70-49ca-a531-83d2010a8b65" indent="1" nextDirection="68" operationName="ЕГАИС3 ОтгрузкаУдалениеБутылки" transactionNotch="False"><InKeys count="1"><String>УжеБылТакойПДФ</String></InKeys><InValues count="1"><String>{Document.ServerHosted ? null : УжеБылТакойПДФ}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" expression="MSG = &quot;По штрихкоду не найдено товара для удаления, для работы вернитесь на основной экран&quot;" id="45640183-fdf2-46e2-b572-0144f6130c18" indent="0" name="72" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="753f3c75-af8b-4564-82dc-3ff79c0dabd4" indent="0" nextDirection="ФАКТ"><KeyNames count="4"><String>ЭтоКоробка</String><String>УжеБылаТакаяКоробка</String><String>ПланСтрока</String><String>УжеБылТакойПДФ</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" expression="MSGblack = &quot;СКАНИРУЙТЕ ДАЛЬШЕ&quot;;" id="b77eaff2-6ace-4bb3-b8f9-6b9ee6f61aef" indent="0" name="СканируйтеДальше" nextDirection="" /><ConditionAction breakPoint="False" expression="Document.ServerHosted == true" id="9c558ba2-c108-4d4c-a37d-cb9496177934" indent="0" name="85" nextDirection="" noDirection="" yesDirection="Обновить" /><OperationAction abortDirection="Обновить" breakPoint="False" id="87750c9e-d896-4f19-aad0-746cc90632de" indent="0" nextDirection="Обновить" operationName="ЕГАИС3 ПоднимаемСтроку" transactionNotch="False"><InKeys count="2"><String>Строка</String><String>ПоднимаемаяКоллекция</String></InKeys><InValues count="2"><String>{ПланСтрока}</String><String>{Запоминаем}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction></Actions><Parameters count="1"><FieldInfo alias="" eanAI="None" fieldName="СессияКоробкиПодбора" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="SessiyaKorobkiPodbora" valueTemplate="" /></Parameters><Returns count="0" /></Operation>