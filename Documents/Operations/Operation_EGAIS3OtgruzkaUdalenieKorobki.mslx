<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3 | sh" fullscreen="Inherit" lock="AllOperations" name="ЕГАИС3 ОтгрузкаУдалениеКоробки" serverHosted="True"><Actions capacity="16" count="13"><ConditionAction breakPoint="False" expression="Document.ServerHosted == true" id="eb43b547-9d92-4f79-a358-e0feeec00c4f" indent="0" nextDirection="" noDirection="80" yesDirection="" /><ClearSessionAction all="False" breakPoint="False" id="5ddc2612-9c68-4f0c-a926-b5e0da60df61" indent="1" nextDirection=""><KeyNames count="1"><String>УжеБылаТакаяКоробка</String></KeyNames></ClearSessionAction><SelectDocumentLinesAction breakPoint="False" comment="Уже была коробка?" id="4ecb9ce2-04f4-496d-87c8-3ac61df2d809" indent="1" nextDirection="" sessionVariable="УжеБылаТакаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиФакт}" sourceWhereExpression="" tableAlias="{Document.КоробкиФакт}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Количество &gt; 0 &amp;&amp; Item.Коробка == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" comment="Уже была коробка?" expression="УжеБылаТакаяКоробка.Count &gt; 0" id="b541fe6c-1030-4573-831f-7817091ee78c" indent="1" nextDirection="" noDirection="abort" yesDirection="" /><ConditionAction breakPoint="False" expression="УдаляемМикс == true" id="45a4c926-3d3e-4f26-a609-60aaec730a39" indent="0" name="80" nextDirection="" noDirection="" yesDirection="81" /><ConditionAction breakPoint="False" comment="Удаляем содержимое коробки" expression="УжеБылаТакаяКоробка[0].КоробкаПодбора == true" id="533c762f-ad74-46bf-a1a6-dd9751e1acf8" indent="1" nextDirection="" noDirection="Для одной строки" yesDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Удаляем содержимое коробки" id="5132ba06-4a31-4ac9-93d3-06d662cb7189" indent="2" nextDirection="" sessionVariable="БутылкиИзЭтойКоробкиПодбора"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.УпакованоВ == УжеБылаТакаяКоробка[0].Коробка"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="975edb21-c6d4-4143-a6ec-d789fa8eb47d" indent="2" items="{БутылкиИзЭтойКоробкиПодбора}" nextDirection="" transactionNotch="False"><Actions count="2"><SelectDocumentLineAction breakPoint="False" id="6ecc5a11-c795-424d-8780-830edc7bdcbd" indent="0" nextDirection="" sessionVariable="НужнаяПланСтрока"><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Uid == SelectedLine.ПланСтрокаИд"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><AssignAction breakPoint="False" expression="НужнаяПланСтрока.CurrentQuantity = НужнаяПланСтрока.CurrentQuantity - 1" id="6aa5110d-bc26-4820-9cd9-d656f164116c" indent="0" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><RemoveDocumentLineAction breakPoint="False" comment="Удаляем содержимое коробки" id="8777c1ed-8d6f-4afd-bf60-38d2fa9956fe" indent="2" nextDirection="76" packing="" quantity="" quantityErrorDirection="76" sessionVariable="БутылкиИзЭтойКоробкиПодбора" /><SelectDocumentLineAction breakPoint="False" id="5953ab55-6784-4282-b070-5ec60067f42a" indent="1" name="Для одной строки" nextDirection="" sessionVariable="ПланСтрока"><Query copySelection="False" documentLines="Declared" from="" sourceWhereExpression="" tableAlias="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Uid == УжеБылаТакаяКоробка[0].ПланСтрокаИд"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><AssignAction breakPoint="False" expression="ПланСтрока.CurrentQuantity = ПланСтрока.CurrentQuantity - УжеБылаТакаяКоробка[0].Количество" id="de10b030-0d94-4d8f-8900-a9acace003be" indent="1" name="75" nextDirection="" /><AssignAction breakPoint="False" expression="Document.КоробкиФакт.Rows.Remove(УжеБылаТакаяКоробка[0]);" id="f08a38c4-0ebb-46cc-801a-84be7e3e6409" indent="1" name="76" nextDirection="return" /><ForeachAction breakPoint="False" buttonExit="True" canFinishAlways="False" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="b2216eaf-4b89-428d-a2f6-bbf9164ea646" indent="0" items="{УжеБылаТакаяКоробка}" name="81" nextDirection="return" transactionNotch="False"><Actions count="3"><SelectDocumentLineAction breakPoint="False" id="da8fd2f5-0a0e-4298-a4e5-85c3d67f9b96" indent="0" name="Для одной строки 2" nextDirection="" sessionVariable="ПланСтрока"><Query copySelection="False" documentLines="Declared" from="" sourceWhereExpression="" tableAlias="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Uid == SelectedLine.ПланСтрокаИд"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><AssignAction breakPoint="False" expression="ПланСтрока.CurrentQuantity = ПланСтрока.CurrentQuantity - SelectedLine.Количество" id="39c1e61e-e0af-444f-9617-a07cf84668c9" indent="0" name="75 1" nextDirection="" /><AssignAction breakPoint="False" expression="Document.КоробкиФакт.Rows.Remove(SelectedLine);" id="3aa4e225-2467-49e9-838b-8d191ee537e1" indent="0" name="76 1" nextDirection="continue" /></Actions><LockObjects count="0" /></ForeachAction></Actions><Parameters count="3"><FieldInfo alias="" eanAI="None" fieldName="УжеБылаТакаяКоробка" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="UzheBylaTakayaKorobka" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="УдаляемМикс" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="UdalyaemMiks" valueTemplate="" /><FieldInfo alias="" eanAI="None" fieldName="ScannedBarcode" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="ScannedBarcode" valueTemplate="" /></Parameters><Returns count="0" /></Operation>