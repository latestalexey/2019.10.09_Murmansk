<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3 | sh" fullscreen="Inherit" lock="AllOperations" name="ЕГАИС3 ОбработкаСтрокПоказа" serverHosted="True"><Actions capacity="16" count="10"><AssignAction breakPoint="False" comment="// Здесь была сортировка по полю &quot;Статус&quot; у упаковок" expression="СписокТоваров = Document.Структура.FindByField(&quot;Родитель&quot;, ИдРодителя);&#xD;&#xA;СписокКоробок = Document.Коробки.FindByField(&quot;РодительПлан&quot;, ИдРодителя).FindByField(&quot;Статус&quot;,&quot;&quot;);&#xD;&#xA;СписокФактических = select (*) from (Document.Коробки.FindByField(&quot;РодительФакт&quot;, ИдРодителя)) where Item.Статус != &quot;&quot;;&#xD;&#xA;СписокКоробок.AddRange(СписокФактических);" id="19ea13e4-ff2e-4e30-bfe2-05a977065e7a" indent="0" nextDirection="" /><ConditionAction breakPoint="False" expression="ИдРодителя != &quot;&quot;" id="d30f07a1-eae7-4f90-8e5d-607575fef576" indent="0" nextDirection="" noDirection="120" yesDirection="" /><AssignAction breakPoint="False" expression="ТекущаяКоробка = Document.Коробки.FindFirstByField(&quot;Ид&quot;, ИдРодителя);&#xD;&#xA;ТекКорТовар = ТекущаяКоробка.Товар;&#xD;&#xA;ТекКорТоварШК = ТекущаяКоробка.ТоварШК;&#xD;&#xA;ТекКорЭтоПалета = ТекущаяКоробка.ЭтоПалета;&#xD;&#xA;ТекКорСерияМарки = ТекущаяКоробка.СерияМарки;&#xD;&#xA;ТекКорТипМарки = ТекущаяКоробка.ТипМарки;&#xD;&#xA;ТекКорСерийныйНомерКоробки = ТекущаяКоробка.СерийныйНомерКоробки;" id="405c655f-c9ba-45d4-8af3-49f3fa752908" indent="1" nextDirection="" /><AssignAction breakPoint="False" expression="СтрокиПоказа = global::Cleverence.Warehouse.ObjectCollection.CreateServerHosted();&#xD;&#xA;СтрокиПоказа.AddRange(СписокТоваров);&#xD;&#xA;СтрокиПоказа.AddRange(СписокКоробок);" id="1d11a725-8fb7-4c20-a7d4-df0812d86d70" indent="0" name="120" nextDirection="" /><AssignAction breakPoint="False" expression="СошлосьКоробок = СписокКоробок.FindByField(&quot;Статус&quot;, &quot;ок&quot;).FindByField(&quot;Внутри&quot;, &quot;ок&quot;).Count" id="a5d6d12b-5654-401b-bfd3-4de2ef19c3a0" indent="0" name="118" nextDirection="" /><AssignAction breakPoint="False" expression="ВсегоКоробок = СписокКоробок.Count" id="0aa894e3-5b42-434c-8e92-1f0589574658" indent="0" name="119" nextDirection="" /><SelectDocumentLinesAction breakPoint="False" id="e5d4134d-45dd-4fb8-afa1-c2e604938d25" indent="0" nextDirection="" sessionVariable="СписокСтрок"><Query copySelection="False" documentLines="Current" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.РодительФакт == ИдРодителя"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><AssignAction breakPoint="False" expression="СошлосьСтрок = СписокСтрок.FindByField(&quot;ПоПлануДаНет&quot;, true).Count" id="b3384d64-b4dc-4045-aa37-19e89e04a74f" indent="0" nextDirection="" /><AssignAction breakPoint="False" expression="ПланСтрок = СписокТоваров.План" id="b3cb9465-8d18-4f6c-ae8f-fe836002f65a" indent="0" name="117" nextDirection="" /><OperationAction abortDirection="" breakPoint="False" id="a12d063c-7301-45f5-9d5e-dd32276aecfb" indent="0" name="116" nextDirection="" operationName="ЕГАИС3 СчитаемКоличествоОшибок" transactionNotch="False"><InKeys count="2"><String>СписокВсехКоробок</String><String>ЛПШтучек</String></InKeys><InValues count="2"><String>{СписокКоробок}</String><String>{СписокСтрок}</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction></Actions><Parameters count="1"><FieldInfo alias="" eanAI="None" fieldName="ИдРодителя" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" uni="IdRoditelya" valueTemplate="" /></Parameters><Returns capacity="32" count="17"><ReturnFieldInfo alias="" eanAI="None" fieldName="СписокКоробок" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SpisokKorobok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СписокТоваров" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SpisokTovarov" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СошлосьКоробок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SoshlosKorobok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ВсегоКоробок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="VsegoKorobok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СошлосьСтрок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SoshlosStrok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ПланСтрок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="PlanStrok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="КоличествоОшибок" fieldType="Int32" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="KolichestvoOshibok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ТекущаяКоробка" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="TekushhayaKorobka" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="МожноЗакрывать" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="MozhnoZakryvat" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СтрокиПоказа" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="StrokiPokaza" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="СписокСтрок" fieldType="Object" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="SpisokStrok" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ТекКорТовар" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="TekKorTovar" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ТекКорЭтоПалета" fieldType="Boolean" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="TekKorEtoPaleta" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ТекКорСерийныйНомерКоробки" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="TekKorSerijnyjNomerKorobki" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ТекКорСерияМарки" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="TekKorSeriyaMarki" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ТекКорТипМарки" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="TekKorTipMarki" valueTemplate="" /><ReturnFieldInfo alias="" eanAI="None" fieldName="ТекКорТоварШК" fieldType="String" isSQLIndex="False" isSQLKeyIndex="False" isSQLSubstringIndex="False" oneTimeTemplateExecution="False" returnNull="True" uni="TekKorTovarShK" valueTemplate="" /></Returns></Operation>