<?xml version="1.0" encoding="utf-8"?><Operation xmlns:clr="http://schemas.cleverence.ru/clr" comment="ЕГАИС 3 | Коробки в палеты" fullscreen="Inherit" lock="No" name="ЕГАИС3 НаборПалет" serverHosted="False"><Actions capacity="128" count="108"><SelectDocumentLineAction breakPoint="False" comment="Проверка, закрыты ли все палеты" id="bcc875f1-8c31-4918-b0f3-7008cdd28b72" indent="0" nextDirection="" sessionVariable="ПроверкаКоробок"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Статус == &quot;Набирается&quot; &amp;&amp; Item.ЭтоРодитель == true"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="Проверка, закрыты ли все палеты" expression="ПроверкаКоробок == null" id="e078a78f-2b0c-46b9-a4e7-3c44e9ad83aa" indent="1" nextDirection="" noDirection="" yesDirection="ОчисткаСтартовая" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Есть незакрытая палета" defaultButtonHeight="15%" fullscreen="Inherit" headerText="&lt;h2&gt;Есть незакрытая палета!&lt;/h2&gt;&#xD;&#xA;&#xD;&#xA;{ПроверкаКоробок.Ид}&#xD;&#xA;{ПроверкаКоробок.Статус == &quot;Набирается&quot;:&lt;r color=&quot;Blue&quot;&gt;{ПроверкаКоробок.Статус}&lt;/r&gt;,;{ПроверкаКоробок.Статус}} cодержит {ПроверкаКоробок.Содержит} кор." id="730e4bc6-0a71-48a4-b787-1428c26b6887" indent="2" name="Есть незакрытая палета" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>ПродолжитьКоробку</String><String>81</String></ButtonDirections><ButtonTexts count="2"><String>Продолжить работу</String><String>Закрыть палету</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="abort" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><AssignAction breakPoint="False" comment="Выбрано &quot;Продолжить работу&quot;" expression="ТекущаяКоробка = ПроверкаКоробок" id="60a93d65-b3d4-4160-a368-a1e52641891f" indent="2" name="ПродолжитьКоробку" nextDirection="39 1" /><ConditionAction breakPoint="False" expression="GlobalVars.ШКПалет[&quot;АгрегацияЕГАИС3&quot;] == false" id="0ba6086a-2c3f-4b89-aec6-7950656938b0" indent="2" name="81" nextDirection="" noDirection="Печать при закрытии 1" yesDirection="ПродолжитьКоробку 2" /><AssignAction breakPoint="False" comment="Выбрано &quot;Продолжить работу&quot;" expression="ТекущаяКоробка = ПроверкаКоробок" id="f0af5c51-b4df-422d-a940-931b2f0618ad" indent="3" name="ПродолжитьКоробку 2" nextDirection="79" /><ConditionAction breakPoint="False" expression="ПроверкаКоробок.Ген == true" id="375677ce-c99d-4b6d-b294-4af57f77cb84" indent="2" name="Печать при закрытии 1" nextDirection="" noDirection="ЗакрытьКоробкуПриСтарте" yesDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="/////////// ЗДЕСЬ БУДЕТ ПЕЧАТЬ ///////////" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;h2&gt;Распечатать ШК?&lt;/h2&gt;" id="5cb5d094-89d8-4213-b2cf-64dd123c9468" indent="3" name="Печать ГенШК 1 1 1" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>67 1</String><String>ЗакрытьКоробкуПриСтарте</String></ButtonDirections><ButtonTexts count="2"><String>Распечатать ШК</String><String>Закрыть коробку</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><OperationAction abortDirection="Печать ГенШК 1 1 1" breakPoint="False" id="c32b972b-9b4e-4713-8200-64cfc175febb" indent="4" name="67 1" nextDirection="ЗакрытьКоробкуПриСтарте" operationName="ЕГАИС3 Печать 3" transactionNotch="False"><InKeys count="1"><String>PrintTemp</String></InKeys><InValues count="1"><String>Pallet</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><AssignAction breakPoint="False" comment="Выбрано &quot;Закрыть коробку&quot;" expression="ПроверкаКоробок.Статус = &quot;Закрыта&quot;" id="adfe42e1-3d38-45a4-8000-a0bf255d0dfc" indent="2" name="ЗакрытьКоробкуПриСтарте" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" comment="Выбрано &quot;Закрыть коробку&quot;" id="be2178dc-039f-4738-9d64-48901f9a1a84" indent="2" name="ОчисткаСтартовая" nextDirection=""><KeyNames capacity="8" count="5"><String>ScannedBarcode</String><String>SelectedProduct</String><String>ПроверкаКоробок</String><String>КоробкаПоШК</String><String>ТекущаяКоробка</String></KeyNames></ClearSessionAction><ClearSessionAction all="False" breakPoint="False" id="2313cab9-04ec-4f7a-8d25-606b7942f6e5" indent="0" name="ОчисткаПриСтартовойКоробке" nextDirection=""><KeyNames count="2"><String>ScannedBarcode</String><String>SelectedProduct</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" comment="Автогенерация коробки" expression="ТекущаяКоробка == null &amp;&amp; GlobalVars.ШКПалет[&quot;АгрегацияЕГАИС3&quot;] == true" id="02eef1bb-e0eb-4780-8610-ae9669d21dd7" indent="0" name="76 1" nextDirection="" noDirection="" yesDirection="Ген1" /><ConditionAction breakPoint="False" expression="ТекущаяКоробка == null &amp;&amp; GlobalVars.ШКПалет[&quot;АгрегацияЕГАИС3&quot;] == false" id="e0e0a758-1f8e-4c62-a12b-8c41c16f1d42" indent="0" nextDirection="" noDirection="80" yesDirection="" /><AssignAction breakPoint="False" expression="ScannedBarcode = &quot;Рабочая палета&quot;" id="5509e8b3-6538-4b77-a90d-d923de07e745" indent="1" nextDirection="34" /><SelectDocumentLinesAction breakPoint="False" id="3b9d4d4e-2813-456d-80a5-87d018873d1a" indent="0" name="80" nextDirection="" sessionVariable="Палеты"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ЭтоРодитель == true"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="1"><String>Статус DESC</String></SortBy><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ItemsViewAction id="809ce645-b0b4-4cd3-8db2-53b84d4c5898" name="Скан ШК коробки" nextDirection="40" headerText="{MSG==&quot;&quot;:&lt;r color=&quot;black&quot; size=&quot;-1&quot;&gt;{Коды.Ост:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;{Коды.Расширение+Коды.Ост}}&lt;/r&gt;;{MSG==&quot;Не нужно сканировать марку!&quot;:&lt;r  align=&quot;center&quot; color=&quot;Red&quot;&gt;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;{НаименованиеОшибка}&lt;/r&gt;;}{MSG==&quot;Не нужно сканировать палету!&quot;:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt;&lt;r align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}{MSG==&quot;Не нужно сканировать EAN-13!&quot;:&lt;r align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}{MSG==&quot;Не тот штрихкод!&quot;:&lt;r  align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}&#xD;&#xA;&lt;b  align=&quot;center&quot; color=&quot;Red&quot; size=&quot;+2&quot;&gt;{MSG}&lt;/b&gt;}" footerText="" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{Палеты}" welcomeText="&lt;b size=&quot;+1&quot; align=&quot;left&quot;&gt;{Палеты.Count != 0:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt;{Палеты.Count} пал.;}&lt;/b&gt;&#xD;&#xA;&lt;b size=&quot;+2&quot; align=&quot;left&quot; color=&quot;Black&quot;&gt;СКАНИРУЙТЕ ПАЛЕТУ&lt;/b&gt;"><KeyJumps count="2"><KeyToAction action="return" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /><KeyToAction action="76" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="1"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Статус == &quot;Набирается&quot;:&lt;Blue&gt;{Item.Статус}&lt;/Blue&gt;;&lt;DarkRed&gt;{Item.Статус}&lt;/DarkRed&gt;} &lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt; {Item.Ид == &quot;Рабочая палета&quot;:Рабочая палета;S/N {Item.ЦветнойСН}} &#xD;&#xA;Содержит &lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;{Item.Содержит} кор.&#xD;&#xA;" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.ЭтоРодитель == true"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="1"><String>Статус DESC</String></SortBy><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Статус == &quot;Набирается&quot;" id="dfd2a030-c21c-4c53-8ff0-91604076d5a6" indent="0" name="63" nextDirection="" noDirection="" yesDirection="79" /><OperationAction abortDirection="ОчисткаПриСтартовойКоробке" breakPoint="False" id="1d84399e-803d-48e2-bec4-f52ac2901d72" indent="0" name="Ген1" nextDirection="59" operationName="ЕГАИС3 ВременннаяКоробка" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="1"><String>ScannedBarcode</String></OutKeys><OutValues count="1"><String>ScannedBarcode</String></OutValues></OperationAction><AssignAction breakPoint="False" expression="Сгенерировано = true" id="d2f36ebe-7e1d-422b-838a-992f5c140699" indent="0" name="59" nextDirection="76" /><ClearSessionAction all="False" breakPoint="False" id="59d18e22-46ff-4c3a-954b-af20e212e46e" indent="0" name="76" nextDirection=""><KeyNames count="3"><String>MSG</String><String>ErrBarcode</String><String>НаименованиеОшибка</String></KeyNames></ClearSessionAction><ScanAction autoCloseTime="0" autoSelectSingleProduct="False" autoShowSelectionList="False" backgroundImage="" barcodeConvertion="None" barcodeSessionVariable="ScannedBarcode" breakPoint="False" cancelType="None" canManualShowProductList="False" canSelectCell="False" canSelectPallet="False" cellDirection="" comment="Зачем Выбор, если паллеты?" errorSelectDirection="103" fullscreen="Inherit" id="98a54e5f-7e0e-4b02-8c98-f82fdb4abe5e" ignoreBaseBarcodes="False" ignoreQuantityPolicy="False" indent="1" name="Выбор коробки по ШК" nextDirection="" notFoundErrorText="" palletDirection="" playAudioOnError="False" processSessionBarcode="True" productsListHeaderText="" quickSelectProduct="False" searchingProducts="" searchPreviousSelected="False" selectionCellNum="0" selectionCellText="" selectionFirstCellText="" selectionListFormat="{Item.товВСпискеВыбора}" selectionPalletText="" selectionSecondCellText="" selectionStorageVariable="" sucsessSelectDirection="103" transactionNotch="False" useOnlyDocumentProducts="False" waitImage="" welcomeText="" withoutControls="False"><ExcludeClassificators count="0" /><IncludeClassificators count="0" /><KeyJumps count="1"><KeyToAction action="ОчисткаПриСтартовойКоробке" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><TreeTypeIds count="0" /></ScanAction><OperationAction abortDirection="" breakPoint="False" id="8940a2e0-5a98-4d94-8783-ef1bd2b839e2" indent="1" name="103" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="5"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Pallet</String><String>Box</String></InKeys><InValues capacity="8" count="5"><String>{ScannedBarcode}</String><String>False</String><String>False</String><String>True</String><String>True</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error==True" id="4c17758f-a68d-4263-a2d5-bcd801130d80" indent="1" nextDirection="" noDirection="83" yesDirection="ОчисткаПриСтартовойКоробке" /><ConditionAction breakPoint="False" expression="ТекущаяКоробка != null" id="06a52004-2c1d-4dff-8bcb-80412843b3f1" indent="1" name="83" nextDirection="" noDirection="35" yesDirection="" /><ConditionAction breakPoint="False" expression="ScannedBarcode == ТекущаяКоробка.Ид" id="1a39c940-7b4b-4540-971b-3a2bc3f3b578" indent="1" name="45" nextDirection="" noDirection="" yesDirection="39 1" /><AssignAction breakPoint="False" expression="ТекущаяКоробка.Статус = &quot;Закрыта&quot;" id="80566cbb-6ece-4a47-ac2b-7367090b8212" indent="1" name="52" nextDirection="" /><SelectDocumentLineAction breakPoint="False" comment="Поиск коробки" id="11f54b6b-8c06-4a73-a635-30cc0a951353" indent="1" name="35" nextDirection="" sessionVariable="КоробкаПоШК"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="Поиск коробки" expression="КоробкаПоШК == null" id="17fc2510-6c50-4d17-90a6-01cdcb8908ce" indent="1" nextDirection="" noDirection="77" yesDirection="34" /><ConditionAction breakPoint="False" expression="КоробкаПоШК.ЭтоРодитель == true" id="36840ded-3645-4601-b9df-11c49fc3160c" indent="1" name="77" nextDirection="" noDirection="69 2" yesDirection="35 1" /><AssignAction breakPoint="False" expression="GO.PlayError();&#xD;&#xA;MSG = &quot;Отсканирована коробка, уже положенная в палету&quot;;" id="a5d98450-95e5-47fe-a9a2-162895147f67" indent="1" name="69 2" nextDirection="ОчисткаПриСтартовойКоробке" /><AssignAction breakPoint="False" comment="Создание родителя" expression="НовСтрока = new Cleverence.Warehouse.Row();&#xD;&#xA;НовСтрока.Ид = ScannedBarcode;&#xD;&#xA;НовСтрока.Статус = &quot;Набирается&quot;;&#xD;&#xA;НовСтрока.ЭтоРодитель = true;&#xD;&#xA;НовСтрока.СерийныйНомерКоробки = Коды.Отображение;&#xD;&#xA;Document.КоробкиПалеты.Rows.Add(НовСтрока);" id="6fd53282-24bb-4cfb-90a2-e7e96aef7a4a" indent="2" name="34" nextDirection="" /><ConditionAction breakPoint="False" expression="Сгенерировано == true" id="88eafd70-89ce-43c5-8a97-b695560f16ef" indent="2" nextDirection="" noDirection="61" yesDirection="" /><AssignAction breakPoint="False" expression="НовСтрока.Ген = true" id="f3a0f3af-3eac-458f-a9c8-a952b14f543f" indent="3" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="aaf78191-c7a8-4754-9fef-1e7b1ae3a9cf" indent="2" name="61" nextDirection=""><KeyNames count="1"><String>Сгенерировано</String></KeyNames></ClearSessionAction><SelectDocumentLineAction breakPoint="False" comment="Это текущая коробка" id="a982102d-406d-443b-ba9f-0ca55bfa6c00" indent="1" name="35 1" nextDirection="" sessionVariable="ТекущаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode &amp;&amp; Item.ЭтоРодитель == true"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Статус == &quot;Закрыта&quot;" id="19cd632f-9366-475e-a134-59358cdb2790" indent="1" nextDirection="" noDirection="" yesDirection="39 1" /><AssignAction breakPoint="False" comment="Это текущая коробка" expression="ТекущаяКоробка.Статус = &quot;Набирается&quot;" id="548935a9-f04c-4fa5-a059-785011b30696" indent="1" name="58" nextDirection="39 1" /><ClearSessionAction all="False" breakPoint="False" id="37669c3d-a367-4d76-8096-22eeff5a3736" indent="0" name="ОчисткаПриНаборе" nextDirection="44"><KeyNames count="2"><String>ScannedBarcode</String><String>SelectedProduct</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" comment="Закрытие коробки" expression="ТекущаяКоробка.Статус = &quot;Закрыта&quot;" id="a4a48211-7f14-4d0c-86de-341d82e489f7" indent="0" name="ЗакрытиеКоробки" nextDirection="" /><ClearSessionAction all="False" breakPoint="False" id="0a3012f2-17cb-4249-9237-4c8960f5e6e4" indent="0" nextDirection=""><KeyNames count="1"><String>ТекущаяКоробка</String></KeyNames></ClearSessionAction><ClearSessionAction all="False" breakPoint="False" comment="Закрытие коробки" id="14530e60-6948-4e38-abbb-928a4bde422c" indent="0" name="Очистка при закрытии" nextDirection="76 1"><KeyNames count="3"><String>ScannedBarcode</String><String>SelectedProduct</String><String>КоробкаПоШК</String></KeyNames></ClearSessionAction><SelectDocumentLinesAction breakPoint="False" comment="В ОКНЕ КОРОБКИ |" id="f9b70eb9-5e53-4b5b-9bca-80d42a59e12e" indent="0" name="39 1" nextDirection="43" sessionVariable="Содержимое"><Query copySelection="False" documentLines="Current" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Родитель == ТекущаяКоробка.Ид &amp;&amp; Item.ЭтоРодитель == false"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><SelectDocumentLineAction breakPoint="False" comment="В ОКНЕ КОРОБКИ |" id="0e8c8427-e145-4aea-9172-48db8674e569" indent="0" name="40" nextDirection="39 1" sessionVariable="ТекущаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == SelectedItem.Ид &amp;&amp; Item.ЭтоРодитель == true"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="В ОКНЕ КОРОБКИ |" expression="ТекущаяКоробка.Статус == &quot;Закрыта&quot;" id="c5ac2de0-1a4a-4cae-9f98-5ab0317d4e31" indent="0" name="43" nextDirection="" noDirection="44" yesDirection="55" /><AssignAction breakPoint="False" expression="СодержимоеСорт = Содержимое.Rotate()" id="26e8d6e5-4bbe-45b3-bc24-e55155eef0fa" indent="0" nextDirection="" /><ItemsViewAction id="4517cd58-b6fe-440a-96b4-bc6e0b51dbf7" name="55" nextDirection="Очистка при закрытии" headerText="&#xD;&#xA;&#xD;&#xA;" footerText="&lt;div&gt;&lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;&lt;td style=&quot;vertical-align:middle; text-align: center;&quot;&gt;&lt;r color=&quot;Red&quot;&gt;Палета закрыта&lt;/r&gt;&lt;/td&gt;&lt;td align=&quot;right&quot;&gt;&lt;button direction=&quot;57&quot;&gt;Открыть палету&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&#xD;&#xA;&#xD;&#xA;" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{Содержимое}" welcomeText="&lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt;{ТекущаяКоробка.ЦветнойСН} &lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;{Содержимое.Count} кор."><KeyJumps count="1"><KeyToAction action="Очистка при закрытии" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="1"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Ид}" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><SelectDocumentLineAction breakPoint="False" comment="Проверка, закрыты ли все коробки" id="2c1f6371-5264-4172-b3d5-76768cf1035d" indent="0" name="57" nextDirection="" sessionVariable="ПроверкаКоробок2"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Статус == &quot;Набирается&quot; &amp;&amp; Item.ЭтоРодитель == true"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" comment="Проверка, закрыты ли все коробки" expression="ПроверкаКоробок2 == null" id="715cd2b2-4c60-4787-8fd3-83106d3bf9b5" indent="1" nextDirection="" noDirection="" yesDirection="58" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Есть незакрытая коробка" defaultButtonHeight="15%" fullscreen="Inherit" headerText="&lt;h2&gt;Есть незакрытая коробка!&lt;/h2&gt;&#xD;&#xA;&#xD;&#xA;{ПроверкаКоробок2.Ид}&#xD;&#xA;{ПроверкаКоробок2.Статус == &quot;Набирается&quot;:&lt;r color=&quot;Blue&quot;&gt;{ПроверкаКоробок2.Статус}&lt;/r&gt;;{ПроверкаКоробок2.Статус}} cодержит {ПроверкаКоробок2.Содержит} единиц&#xD;&#xA;{ПроверкаКоробок2.ГоденДо != null:Годен до: {ПроверкаКоробок2.ГоденДо:d};Без срока годности}" id="7030f0fa-2716-41ad-aff7-ed47b4099a8d" indent="2" name="Есть незакрытая коробка 1" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="2"><String>ПродолжитьКоробку 1</String><String>ЗакрытьКоробкуПриСтарте 1</String></ButtonDirections><ButtonTexts count="2"><String>Вернуться к открытой коробке</String><String>Работать с этой коробкой, закрыть предыдущую</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="back" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><AssignAction breakPoint="False" comment="Выбрано &quot;Продолжить работу&quot;" expression="ТекущаяКоробка = ПроверкаКоробок2" id="abf974e6-9bcf-4abf-887b-8999c8aeb4b5" indent="2" name="ПродолжитьКоробку 1" nextDirection="39 1" /><AssignAction breakPoint="False" comment="Выбрано &quot;Закрыть коробку&quot;" expression="ПроверкаКоробок2.Статус = &quot;Закрыта&quot;" id="7d0fa4d3-c1f2-40d9-8a6d-f227fadb9cde" indent="2" name="ЗакрытьКоробкуПриСтарте 1" nextDirection="" /><ConditionAction breakPoint="False" expression="ПроверкаКоробок2.Ген == true" id="b7f54f14-385a-4036-bee6-fdcd952d7c99" indent="2" name="62" nextDirection="" noDirection="58" yesDirection="" /><QuestionAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Закрытие коробки" defaultButtonHeight="0 px" fullscreen="Inherit" headerText="&lt;h2&gt;Чек распечатан!&lt;/h2&gt;" id="6efafa56-67ba-430c-97fb-f4652be42ce8" indent="3" name="Печать ГенЧека 1" nextDirection="" showAsMsgBox="False" transactionNotch="True" welcomeText=""><ButtonDirections count="1"><String>58</String></ButtonDirections><ButtonTexts count="1"><String>ОК</String></ButtonTexts><KeyJumps count="1"><KeyToAction action="58" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps></QuestionAction><ClearSessionAction all="False" breakPoint="False" id="63da0474-9bea-419f-9481-f61fce962d91" indent="0" name="44" nextDirection="106"><KeyNames capacity="8" count="6"><String>ScannedBarcode</String><String>SelectedProduct</String><String>SelectedItem</String><String>УжеДобавлен</String><String>УжеБылТакойПДФ</String><String>УжеЕстьТакаяКоробка</String></KeyNames></ClearSessionAction><AssignAction breakPoint="False" expression="СодержимоеСорт = Содержимое.VirtualRotate()" id="1186d09b-f44c-4889-9247-ef21584f94e1" indent="0" name="106" nextDirection="" /><ItemsViewAction id="3d2e1c81-9f5b-4c25-845a-3d360a98f589" name="Скан ШК товаров в окне коробки" nextDirection="78" headerText="&lt;r color=&quot;black&quot; size=&quot;-1&quot; align=&quot;left&quot;&gt;&lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt; {ТекущаяКоробка.Ид == &quot;Рабочая палета&quot;:Рабочая палета;{ТекущаяКоробка.ЦветнойСН}} &lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;{Содержимое.Count} кор.&#xD;&#xA;{MSG==&quot;&quot;:&lt;r color=&quot;black&quot; size=&quot;-1&quot;&gt;{Коды.Ост:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;{Коды.Расширение+Коды.Ост}}&lt;/r&gt;;{MSG==&quot;Не нужно сканировать марку!&quot;:&lt;r  align=&quot;center&quot; color=&quot;Red&quot;&gt;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;{НаименованиеОшибка}&lt;/r&gt;;}{MSG==&quot;Не нужно сканировать палету!&quot;:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt;&lt;r align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}{MSG==&quot;Не нужно сканировать EAN-13!&quot;:&lt;r align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}{MSG==&quot;Не тот штрихкод!&quot;:&lt;r  align=&quot;center&quot; color=&quot;Red&quot;&gt;&quot;{ErrBarcode}&quot;&lt;/r&gt;;}&#xD;&#xA;&lt;b  align=&quot;center&quot; color=&quot;Red&quot; size=&quot;+2&quot;&gt;{MSG}&lt;/b&gt;}" footerText="&lt;button direction=&quot;79&quot; width=&quot;100%&quot;&gt;Закрыть палету&lt;/button&gt;" transactionNotch="True" cancelType="None" backgroundImage="" format="" selectedItem="SelectedItem" viewItems="{СодержимоеСорт}" welcomeText="&lt;b color=&quot;black&quot; size=&quot;+2&quot; align=&quot;left&quot;&gt;СКАНИРУЙТЕ КОРОБКУ&lt;/b&gt;"><KeyJumps count="2"><KeyToAction action="74 1" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="Очистка при закрытии" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Columns count="1"><ItemsColumn align="TopLeft" allBorder="0" backColor="White" bottomBorder="0" format="{Item.Ид}" leftBorder="0" rightBorder="0" topBorder="0" width="100%" /></Columns><Query copySelection="False" documentLines="Declared" from="{СодержимоеСорт}" sourceWhereExpression="" tableAlias="{СодержимоеСорт}" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></ItemsViewAction><ClearSessionAction all="False" breakPoint="False" id="4de5d40c-1f0a-4603-bf5a-d11310a3c326" indent="0" name="74 1" nextDirection=""><KeyNames count="4"><String>MSG</String><String>ErrBarcode</String><String>Error</String><String>НаименованиеОшибка</String></KeyNames></ClearSessionAction><OperationAction abortDirection="" breakPoint="False" id="48c94b79-dfbf-4443-af27-c9567919df4a" indent="0" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="5"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Pallet</String><String>Box</String></InKeys><InValues capacity="8" count="5"><String>{ScannedBarcode}</String><String>False</String><String>False</String><String>False</String><String>True</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error==True" id="b2df4c6e-3e8b-4011-bffc-00307f306654" indent="0" nextDirection="" noDirection="75" yesDirection="44" /><ConditionAction breakPoint="False" expression="ScannedBarcode == ТекущаяКоробка.Ид" id="b549f4d8-db3d-4f2a-a1af-073b71e454b2" indent="2" name="75" nextDirection="" noDirection="" yesDirection="73" /><SelectDocumentLineAction breakPoint="False" comment="Ищем контейнер" id="74921229-4897-47f6-9ca4-c8393133dcc2" indent="2" name="35 1 1" nextDirection="" sessionVariable="УжеЕстьТакаяКоробка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><ConditionAction breakPoint="False" expression="УжеЕстьТакаяКоробка != null" id="3d187579-de42-40f4-bfcd-d8139edfebf3" indent="2" nextDirection="" noDirection="34 1" yesDirection="" /><ConditionAction breakPoint="False" expression="УжеЕстьТакаяКоробка.ЭтоРодитель == true" id="d53ac1ab-eda2-445e-a8c7-6a9d3af080bd" indent="3" nextDirection="" noDirection="" yesDirection="74" /><ConditionAction breakPoint="False" expression="УжеЕстьТакаяКоробка.Родитель == ТекущаяКоробка.Ид" id="75d834c3-79ae-45e5-bfe9-d4a85f3c4548" indent="4" nextDirection="" noDirection="82" yesDirection="" /><ConditionAction breakPoint="False" comment="В коробку уже агрегировали бутылки?" expression="УжеЕстьТакаяКоробка.Содержит &gt; 0" id="89ae8616-fb24-4507-87b7-4d9b6dd2685b" indent="5" nextDirection="" noDirection="68 1" yesDirection="68 1 1" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Если да - отвязываем от палеты" fullscreen="Inherit" id="26e96e64-d76e-49e4-87b9-40adf6fab598" indent="6" message="В коробку &lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {УжеЕстьТакаяКоробка.ЦветнойСН} уже сагрегировано {УжеЕстьТакаяКоробка.Содержит} бут.&#xD;&#xA;&lt;b&gt;Убрать коробку с палеты?&lt;/b&gt;" name="68 1 1" nextDirection="" noDirection="undo" transactionNotch="False" yesDirection=""><KeyJumps count="0" /></QuestionYesNoAction><AssignAction breakPoint="False" comment="Если да - отвязываем от палеты" expression="УжеЕстьТакаяКоробка.Родитель = &quot;&quot;" id="e22fba38-33dc-49d6-9b75-302bffe00a44" indent="7" nextDirection="" /><AssignAction breakPoint="False" comment="Если да - отвязываем от палеты" expression="ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит - 1" id="dc8b9495-771e-4739-b1ba-7d01da244086" indent="7" name="72 1" nextDirection="39 1" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Если в коробке нет бутылок - удаляем полностью" fullscreen="Inherit" id="e93ef35c-158b-4655-af02-b7b0eb41badc" indent="5" message="&lt;b&gt;Удалить коробку?&lt;/b&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {УжеЕстьТакаяКоробка.ЦветнойСН}" name="68 1" nextDirection="" noDirection="undo" transactionNotch="False" yesDirection=""><KeyJumps count="0" /></QuestionYesNoAction><AssignAction breakPoint="False" expression="КоробкаНаУдаление = УжеЕстьТакаяКоробка" id="9071d9f0-1933-46ef-9445-346a4985b507" indent="5" nextDirection="72" /><ConditionAction breakPoint="False" expression="УжеЕстьТакаяКоробка.Родитель == &quot;&quot;" id="d308735b-5c07-48ab-8926-490bedef3602" indent="4" name="82" nextDirection="" noDirection="4" yesDirection="" /><AssignAction breakPoint="False" expression="УжеЕстьТакаяКоробка.Родитель = ТекущаяКоробка.Ид;&#xD;&#xA;ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит + 1;" id="059a00cf-936c-4963-8b40-450ac38e433a" indent="4" nextDirection="71" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="d33b0c75-a6eb-480e-8b42-083391a697aa" indent="4" message="&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {УжеЕстьТакаяКоробка.ЦветнойСН}&#xD;&#xA;Уже лежит в &#xD;&#xA;&lt;img align=&quot;center&quot; tcolor=&quot;yes&quot;&gt;alcores.pallet&lt;/img&gt; {УжеЕстьТакаяКоробка.Родитель}&#xD;&#xA;&lt;b&gt;Переместить в текущую палету?&lt;/b&gt;" name="4" nextDirection="" noDirection="undo" transactionNotch="True" yesDirection=""><KeyJumps count="0" /></QuestionYesNoAction><SelectDocumentLineAction breakPoint="False" id="444d477a-934c-4c62-8d96-7fedc8bb6f60" indent="4" nextDirection="" sessionVariable="ПрошлаяПалета"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == УжеЕстьТакаяКоробка.Родитель"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLineAction><AssignAction breakPoint="False" expression="ПрошлаяПалета.Содержит = ПрошлаяПалета.Содержит - 1;&#xD;&#xA;УжеЕстьТакаяКоробка.Родитель = ТекущаяКоробка.Ид;&#xD;&#xA;ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит + 1;" id="f185a135-7216-40c2-b2f5-c00cd22b938a" indent="4" nextDirection="71" /><AssignAction breakPoint="False" comment="Создание наследника" expression="НовСтрокаВнутрь = new Cleverence.Warehouse.Row();&#xD;&#xA;НовСтрокаВнутрь.Ид = ScannedBarcode;&#xD;&#xA;НовСтрокаВнутрь.ЭтоРодитель = false;&#xD;&#xA;НовСтрокаВнутрь.Родитель = ТекущаяКоробка.Ид;&#xD;&#xA;НовСтрокаВнутрь.СерийныйНомерКоробки = Коды.Отображение;&#xD;&#xA;ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит +1;&#xD;&#xA;Document.КоробкиПалеты.Rows.Add(НовСтрокаВнутрь);" id="42b37ae5-a030-4259-8d34-9d72b7ff15eb" indent="2" name="34 1" nextDirection="71" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="bb0e2b42-50f0-4c10-b5a6-0bf13455774e" indent="0" message="Отсканирована рабочая палета!&#xD;&#xA;&lt;b&gt;Закрыть?&lt;/b&gt;" name="73" nextDirection="" noDirection="undo" transactionNotch="False" yesDirection="ЗакрытиеКоробки"><KeyJumps count="0" /></QuestionYesNoAction><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="1d5ff27c-e4e5-431d-8574-bb254717d6ea" indent="0" message="Отсканирована другая палета!&#xD;&#xA;&lt;b&gt;Закрыть текущую и работать с отсканированной?&lt;/b&gt;" name="74" nextDirection="" noDirection="undo" transactionNotch="True" yesDirection="52"><KeyJumps count="0" /></QuestionYesNoAction><ConditionAction breakPoint="False" comment="// выключено" expression="ТекущаяКоробка.Содержит == Document.ИспользуемыйРазмерКоробок" id="cd66c3db-371c-4f8a-aeef-75898f23ec19" indent="2" name="71" nextDirection="" noDirection="Еще одна очистка" yesDirection="Еще одна очистка" /><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Ген == true" id="14e7f927-fb0b-4f35-889f-1bcc1668c6f6" indent="2" nextDirection="" noDirection="ЗакрытиеКоробки" yesDirection="67" /><OperationAction abortDirection="Еще одна очистка" breakPoint="False" id="a4ae0db3-0deb-4c1a-b07c-534720a36fcc" indent="3" name="67" nextDirection="ЗакрытиеКоробки" operationName="ЕГАИС3 Печать 3" transactionNotch="False"><InKeys count="1"><String>PrintTemp</String></InKeys><InValues count="1"><String>Pallet</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ClearSessionAction all="False" breakPoint="False" id="a55649a3-865d-4b48-a69f-42a5eaace54d" indent="2" name="Еще одна очистка" nextDirection="39 1"><KeyNames count="2"><String>ScannedBarcode</String><String>SelectedProduct</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" comment="В коробку уже агрегировали бутылки?" expression="SelectedItem.Содержит &gt; 0" id="e52414ab-a508-4998-b14c-051ce8112908" indent="2" name="78" nextDirection="" noDirection="68" yesDirection="68 1 1 1" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Если да - отвязываем от палеты" fullscreen="Inherit" id="64bdd4e4-448f-4097-8461-532276f90b8b" indent="3" message="В коробку &lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {SelectedItem.ЦветнойСН} уже сагрегировано {SelectedItem.Содержит} бут.&#xD;&#xA;&lt;b&gt;Убрать коробку с палеты?&lt;/b&gt;" name="68 1 1 1" nextDirection="" noDirection="undo" transactionNotch="False" yesDirection=""><KeyJumps count="0" /></QuestionYesNoAction><AssignAction breakPoint="False" comment="Если да - отвязываем от палеты" expression="SelectedItem.Родитель = &quot;&quot;" id="00770b9e-0908-4a36-81fc-2e0b7a213432" indent="4" nextDirection="" /><AssignAction breakPoint="False" comment="Если да - отвязываем от палеты" expression="ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит - 1" id="036f35b2-9373-4205-be06-4d743e0ce9b8" indent="4" name="72 1 1" nextDirection="39 1" /><QuestionYesNoAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" fullscreen="Inherit" id="f6710f80-6459-4f5a-aeca-3784c309b73e" indent="2" message="&lt;b&gt;Удалить коробку?&lt;/b&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt; {SelectedItem.ЦветнойСН}" name="68" nextDirection="" noDirection="undo" transactionNotch="False" yesDirection=""><KeyJumps count="0" /></QuestionYesNoAction><AssignAction breakPoint="False" expression="КоробкаНаУдаление = SelectedItem" id="14734039-0715-4e7e-b3c7-0d40881f7ba6" indent="2" nextDirection="" /><AssignAction breakPoint="False" expression="ТекущаяКоробка.Содержит = ТекущаяКоробка.Содержит - 1" id="0f854bd1-6c30-4c53-991b-b1e9797775dd" indent="2" name="72" nextDirection="" /><AssignAction breakPoint="False" expression="Document.КоробкиПалеты.Rows.Remove(КоробкаНаУдаление);" id="479ce47e-fe0d-4964-80ab-db9cb7ad9df0" indent="2" nextDirection="39 1" /><OperationAction abortDirection="undo" breakPoint="False" id="3ad3211c-f223-4585-8c9c-1ca4ebb6b7ee" indent="0" name="Пакуем" nextDirection="back" operationName="ЕГАИС3 ПакуемВсеНезапакованное" transactionNotch="False"><InKeys count="0" /><InValues count="0" /><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" comment="Скан палеты для закрытия" expression="ТекущаяКоробка.Ид == &quot;Рабочая палета&quot;" id="e20d3cd5-b5f9-4603-9db6-65230bf01a11" indent="0" name="79" nextDirection="" noDirection="Печать при закрытии" yesDirection="" /><ClearSessionAction all="False" breakPoint="False" id="8125e648-d678-4fca-a39f-60a92fe00e4b" indent="0" nextDirection=""><KeyNames count="1"><String>MSG</String></KeyNames></ClearSessionAction><FieldEditAction autoCloseTime="0" backgroundImage="" breakPoint="False" cancelType="None" comment="Скан палеты для закрытия" eanAI="None" editType="Session" fieldName="ScannedBarcode" fieldType="String" footerText="" format="" fullscreen="Inherit" headerText="{MSG==&quot;Отсканирована коробка!&quot;:&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.box&lt;/img&gt;&lt;r color=&quot;Black&quot; size=&quot;-1&quot;&gt;'{ErrBarcode}'&lt;/r&gt;;}{MSG==&quot;Отсканирована марка!&quot;:&lt;r color=&quot;Black&quot; size=&quot;-1&quot;&gt;{НаименованиеОшибка}&lt;/r&gt;&#xD;&#xA;&lt;img align=&quot;bottom&quot; tcolor=&quot;yes&quot;&gt;alcores.pill&lt;/img&gt;&lt;r color=&quot;Black&quot; size=&quot;-1&quot;&gt;{ErrBarcode}&lt;/r&gt;&#xD;&#xA;;}{MSG==&quot;Отсканирован EAN-13!&quot;:&lt;r color=&quot;Black&quot; size=&quot;-1&quot;&gt;'{ErrBarcode}'&lt;/r&gt;;}{MSG==&quot;Не тот Штрихкод!&quot;:'{ErrBarcode}';}&#xD;&#xA;&lt;b size=&quot;+2&quot; align=&quot;center&quot; color=&quot;Red&quot;&gt;{MSG}&lt;/b&gt;" id="c7eaa77e-e00a-43e6-a7ae-4dacea63dd15" indent="1" listItemFormat="" name="49" nextDirection="102" rememberPreviousValue="False" setForBuffer="False" showEditBox="True" showList="False" sizeType="Normal" transactionNotch="True" viewItems="" welcomeText="&lt;b size=&quot;+2&quot;&gt;Отсканируйте или введите палету&lt;/b&gt;"><Columns count="0" /><KeyJumps count="2"><KeyToAction action="102" barcode="{any}" condition="" foreColor="#00000000" key="None" modifiers="None" viewType="InMenu" /><KeyToAction action="undo" barcode="" condition="" foreColor="#00000000" key="Escape" modifiers="None" viewType="InMenu" /></KeyJumps><Query copySelection="False" documentLines="Declared" sourceWhereExpression="" useTableAliasForItem="False" whereCompiled="False" whereExpression=""><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></FieldEditAction><ClearSessionAction all="False" breakPoint="False" id="d0f2ccbe-0c65-415b-a6b2-f4601dd47778" indent="1" name="102" nextDirection=""><KeyNames count="4"><String>MSG</String><String>ErrBarcode</String><String>Error</String><String>НаименованиеОшибка</String></KeyNames></ClearSessionAction><OperationAction abortDirection="" breakPoint="False" id="8a747285-b04a-422f-8944-59de430ac417" indent="1" nextDirection="" operationName="ЕГАИС3 ОбработкаОшибки" transactionNotch="False"><InKeys capacity="8" count="5"><String>ScannedBarcode</String><String>EAN13</String><String>PDF417</String><String>Pallet</String><String>Box</String></InKeys><InValues capacity="8" count="5"><String>{ScannedBarcode}</String><String>False</String><String>False</String><String>True</String><String>False</String></InValues><OutKeys count="0" /><OutValues count="0" /></OperationAction><ConditionAction breakPoint="False" expression="Error==True" id="4d410b6f-7a47-4354-9b85-1e9781a97be4" indent="1" nextDirection="" noDirection="70" yesDirection="71 1" /><ClearSessionAction all="False" breakPoint="False" comment="Скан палеты для закрытия" id="a2f3a0a0-1cde-4308-a0fd-2f3a7b43d9f8" indent="2" name="71 1" nextDirection="49"><KeyNames count="1"><String>ScannedBarcode</String></KeyNames></ClearSessionAction><SelectDocumentLinesAction breakPoint="False" comment="Скан палеты для закрытия" id="e6b3a550-4446-4e5b-9adf-4186e22805bd" indent="2" name="70" nextDirection="" sessionVariable="Проверка"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Ид == ScannedBarcode"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ConditionAction breakPoint="False" comment="Скан палеты для закрытия" expression="Проверка.Count &gt; 0" id="ab5c8299-a63f-4b68-9ec8-9c752ddcffef" indent="2" nextDirection="" noDirection="104" yesDirection="105" /><AssignAction breakPoint="False" expression="GO.PlayError();&#xD;&#xA;MSG = &quot;Отсканирован контейнер из документа!&quot;;" id="24ca00bc-ef90-4778-9fac-a1765d3da25f" indent="3" name="105" nextDirection="71 1" /><AssignAction breakPoint="False" comment="Скан палеты для закрытия" expression="ТекущаяКоробка.Ид = ScannedBarcode;&#xD;&#xA;ТекущаяКоробка.СерийныйНомерКоробки = Коды.Отображение;" id="54e2fc46-0a58-4d5c-b468-7c809580d359" indent="2" name="104" nextDirection="" /><SelectDocumentLinesAction breakPoint="False" comment="Скан палеты для закрытия" id="7705c959-a800-4196-8d50-b8852d817e5f" indent="2" nextDirection="" sessionVariable="КладемКоробкиВПалету"><Query copySelection="False" documentLines="Declared" from="{Document.КоробкиПалеты}" sourceWhereExpression="" tableAlias="{Document.КоробкиПалеты}" useTableAliasForItem="False" whereCompiled="False" whereExpression="Item.Родитель == &quot;Рабочая палета&quot; &amp;&amp; Item.ЭтоРодитель != true"><Fields count="0" /><GroupBy count="0" /><QueryParameters count="0" /><SortBy count="0" /><Where count="0" /><WhereRootElement>null</WhereRootElement></Query></SelectDocumentLinesAction><ClearSessionAction all="False" breakPoint="False" id="d33a3c42-d591-48f2-b444-51e16830e64b" indent="2" nextDirection=""><KeyNames count="1"><String>MSG</String></KeyNames></ClearSessionAction><ConditionAction breakPoint="False" expression="КладемКоробкиВПалету.Count &gt; 0" id="c32b326b-5977-4d77-94e7-fbf2dadc5eee" indent="2" nextDirection="" noDirection="Печать при закрытии" yesDirection="" /><ForeachAction breakPoint="False" buttonExit="False" canFinishAlways="False" comment="Скан палеты для закрытия" cyclic="True" exitButtonText="Закончить набор" exitGroupCode="" fullscreen="Inherit" id="e4c918cf-4a95-4378-9ca7-4d02d7be6482" indent="2" items="{КладемКоробкиВПалету}" nextDirection="" transactionNotch="False"><Actions count="1"><AssignAction breakPoint="False" expression="SelectedLine.Родитель = ScannedBarcode" id="d3c96ce0-2147-44b2-b459-f3dd9977371b" indent="2" nextDirection="" /></Actions><LockObjects count="0" /></ForeachAction><ConditionAction breakPoint="False" expression="ТекущаяКоробка.Ген == true" id="dd1c3b1f-926b-4474-8710-4a2b8278004a" indent="0" name="Печать при закрытии" nextDirection="" noDirection="ЗакрытиеКоробки" yesDirection="67" /></Actions><Parameters count="0" /><Returns count="0" /></Operation>